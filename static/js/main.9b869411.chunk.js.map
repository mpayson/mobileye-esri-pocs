{"version":3,"sources":["icons.js","resources/images/SIGN_ICON_10.png","resources/images/SIGN_ICON_20.png","resources/images/SIGN_ICON_30.png","resources/images/SIGN_ICON_40.png","resources/images/SIGN_ICON_50.png","resources/images/SIGN_ICON_60.png","resources/images/SIGN_ICON_70.png","resources/images/SIGN_ICON_80.png","resources/images/SIGN_ICON_90.png","resources/images/SIGN_ICON_100.png","resources/images/SIGN_ICON_110.png","resources/images/SIGN_ICON_120.png","resources/images/SIGN_ICON_130.png","resources/images/SIGN_ICON_140.png","resources/images/ET_BICYCLE.png","resources/images/ET_PED_ON_HW.png","stores/AppState.js","config/esri-loader-options.js","components/HistMinMaxSlideFilter.js","components/SelectFilter.js","safety/LayerPanel.js","safety/RoutePanel.js","stores/Filters.js","utils/Utils.js","stores/Store.js","stores/HistogramStore.js","safety/SafetyStore.js","safety/SafetyConfig.js","safety/SafetyApp.js","events/LayerPanel.js","events/EventsConfig.js","events/EventsApp.js","survey/LayerPanel.js","components/HistogramComponent.js","survey/HistogramPanel.js","survey/SurveyConfig.js","survey/SurveyApp.js","config/config.js","App.js","serviceWorker.js","index.js","resources/images/map.png"],"names":["module","exports","SESSION_ID","AppState","appConfig","redirectToReferrer","this","config","session","serializedSession","localStorage","getItem","parsed","JSON","parse","tokenExpires","Date","UserSession","removeItem","newSession","setItem","serialize","redirectUri","window","location","origin","pathname","relativeRedirectUri","beginOAuth2","clientId","appId","popup","then","_registerSession","catch","er","console","log","username","decorate","observable","displayName","computed","isAuthenticated","action","bound","login","logout","options","url","css","dojoConfig","has","HistMinMaxSlideFilter","observer","props","context","onValuesChange","newValues","min","max","store","labelFunction","value","type","label","Math","ceil","upperBoundSupplied","isLogarithmic","pow","logBase","upperBound","lowerBound","floor","lowerBoundSupplied","sliderRef","React","createRef","loadModules","HistogramRangeSlider","slider","bins","values","excludedBarColor","rangeType","container","current","precision","labelFormatFunction","listener","watch","remove","loaded","title","fieldInfo","alias","style","height","width","ref","Component","Option","SelectFilter","mode","children","slice","sort","map","o","domainMap","get","key","marginBottom","placeholder","onSelect","onValueChange","onChange","selectValue","OptGroup","LayerPanel","parentOptionView","factorOptionView","FilterViews","filters","f","field","Error","aliasMap","rendererOptions","reduce","acc","p","c","optComponent","push","parentOptions","componentOptions","rendererField","size","disabled","setRendererField","marginTop","CreateIcon","InputGroup","Group","RoutePanel","startIcon","editMode","startGraphic","component","endIcon","endGraphic","compact","padding","onClick","_","onCreateClick","isSketchLoaded","startStr","endStr","ghost","generateRoutes","float","safetyTimeDelta","round","abs","stdTravelTime","prefix","color","suffix","safetyTravelTime","safetyScoreeDelta","safetyScoreDelta","stdTravelScore","safetyTravelScore","Filter","fieldName","featureLayer","fields","find","name","params","Map","domain","getFieldDomain","codedValues","cv","set","code","queryFeatures","where","returnDistinctValues","outFields","res","features","attributes","v","fieldType","getSelectWhere","load","MultiSelectFilter","length","wstr","join","getMultiSelectWhere","MinMaxFilter","numBins","view","lwrUprPromise","isLwr","isUpr","histPromise","Promise","resolve","queries","onStatisticField","outStatisticField","statisticType","getMinQuery","getMaxQuery","outStatistics","qRes","attrs","all","getHistogram","minMaxRes","rawMin","rawMax","layer","minValue","maxValue","valueExpression","histRes","maxWhere","minWhere","isMin","isMax","getMinMaxWhere","pUtils","HistogramStore","Store","appState","storeConfig","credential","layerId","layerItemId","histograms","withFilter","renderers","Object","keys","initialRendererField","popupTemplate","layerLoaded","viewConfig","whenLayerView","lyr","lV","lyrView","forEach","onApplyFilter","debounce","layerView","filter","effectHandler","autorun","rendererHandler","renderer","_type","rendererJsonUtils","fromJSON","mapViewDiv","MapView","FeatureLayer","promiseUtils","esriId","registerToken","toCredential","_buildAutoRunEffects","portalItem","id","basemap","layers","center","zoom","_loadLayers","user","scoreStatQuery","outStatisticFieldName","SafetyStore","SketchVM","sketchVM","graphics","sketchListener","on","onCreateComplete","evt","state","graphic","setAddressFromGeocode","stopType","Locator","locationToAddress","geometry","locationType","address","e","cancel","create","RouteTask","RouteParameters","FeatureSet","SpatialReference","routeTask","routeParams","stops","outSpatialReference","WebMercator","solve","data","stdRoute","routeResults","route","symbol","add","pQuery","extent","orderByFields","returnGeometry","pModules","qres","geometryEngine","polygonBarriers","scorepolys","i","geodesicBuffer","addMany","scoreRoute","generateStdRoute","generateScoreRoute","onStartClick","onEndClick","getRenderer","visualVariables","safetyConfig","content","Header","Content","Sider","MenuFilterIcon","filled","MenuBookmarkIcon","MenuRouteFromIcon","MenuInformationIcon","SafetyApp","collapsed","navKey","onCollapse","setState","item","onClose","componentDidMount","modulePromise","loadPromise","mapViewRef","Search","Legend","mapView","search","ui","legend","move","panel","signin","theme","lineHeight","Item","minHeight","paddingLeft","paddingRight","collapsible","defaultSelectedKeys","selectedKeys","span","closable","placement","visible","mask","getContainer","position","background","bodyStyle","overflowY","eventsConfig","defaultSymbol","uniqueValueInfos","pedImage","bicycleImage","EventsApp","TimeSlider","timeSlider","loop","fullTimeExtent","timeInfo","left","right","bottom","HistogramComponent","createHistogram","histogram","Histogram","histRef","HistogramPanel","HistogramViews","surveyConfig","opacity","minDataValue","maxDataValue","minSize","maxSize","sign10Image","sign20Image","sign30Image","sign40Image","sign50Image","sign60Image","sign70Image","sign80Image","sign90Image","sign100Image","sign110Image","sign120Image","sign130Image","sign140Image","expressionInfos","expression","MenuHistogramIcon","SurveyApp","portalUrl","OAuth","completeOAuth2","PrivateRoute","rest","render","to","from","Home","loadScript","topComponent","linkClass","justify","align","textAlign","md","xl","cover","alt","src","MapImage","className","App","hash","includes","path","exact","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9b869411.chunk.js","sourcesContent":["// export {\n//   default as DownOutline\n// } from \"@ant-design/icons/lib/outline/DownOutline\";\n\nimport RightOutline from \"@ant-design/icons/lib/outline/RightOutline\";\nimport LeftOutline from \"@ant-design/icons/lib/outline/LeftOutline\";\nimport UpOutline from \"@ant-design/icons/lib/outline/UpOutline\";\nimport DownOutline from \"@ant-design/icons/lib/outline/DownOutline\";\nimport CloseOutline from \"@ant-design/icons/lib/outline/CloseOutline\";\nimport CheckOutline from \"@ant-design/icons/lib/outline/CheckOutline\";\nimport ArrowUpOutline from \"@ant-design/icons/lib/outline/ArrowUpOutline\";\nimport ArrowDownOutline from \"@ant-design/icons/lib/outline/ArrowDownOutline\";\nimport MinusOutline from \"@ant-design/icons/lib/outline/MinusOutline\";\n\nexport {\n  RightOutline,\n  LeftOutline,\n  CloseOutline,\n  CheckOutline,\n  UpOutline,\n  DownOutline,\n  ArrowUpOutline,\n  ArrowDownOutline,\n  MinusOutline\n}","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_10.5806b9be.png\";","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_20.0614d6f7.png\";","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_30.24e1ec6c.png\";","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_40.4db57bb3.png\";","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_50.a484fdea.png\";","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_60.e20224b9.png\";","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_70.cb2a61f0.png\";","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_80.2eff9931.png\";","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_90.3f1c8a35.png\";","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_100.d2e0243d.png\";","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_110.bd979545.png\";","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_120.8523d789.png\";","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_130.f4e343b4.png\";","module.exports = __webpack_public_path__ + \"static/media/SIGN_ICON_140.59029177.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","import {decorate, observable, action, computed} from 'mobx';\nimport {\n  UserSession\n} from \"@esri/arcgis-rest-auth\";\n\nconst SESSION_ID = '__MOBILEYE_ESRI_POCS__';\n\nclass AppState {\n\n  redirectToReferrer = false;\n\n  constructor(appConfig){\n    this.config = appConfig;\n    this.session = null;\n    const serializedSession = localStorage.getItem(SESSION_ID);\n    if(serializedSession !== null && serializedSession !== \"undefined\"){\n      let parsed = JSON.parse(serializedSession);\n      parsed.tokenExpires = new Date(parsed.tokenExpires);\n      if(parsed.tokenExpires > new Date()){\n        this.session = new UserSession(parsed);\n      } else {\n        localStorage.removeItem(SESSION_ID);\n      }\n    }\n  }\n\n  _registerSession(newSession){\n    this.session = newSession;\n    this.redirectToReferrer = true;\n    localStorage.setItem(SESSION_ID, this.session.serialize());\n  }\n\n  login(){\n    const redirectUri = `${window.location.origin}${window.location.pathname}${this.config.relativeRedirectUri}`\n    UserSession.beginOAuth2({\n      clientId: this.config.appId,\n      redirectUri,\n      popup: true\n    })\n    .then(this._registerSession)\n    .catch(er => console.log(er));\n  }\n\n  get displayName(){\n    // for now just show user name\n    if(this.session) return this.session.username;\n    return null;\n  }\n\n  get isAuthenticated(){\n    return !!this.session;\n  }\n\n  logout(){\n    localStorage.removeItem(SESSION_ID);\n    this.session = null;\n  }\n\n}\n\ndecorate(AppState, {\n  session: observable,\n  redirectToReferrer: observable,\n  displayName: computed,\n  isAuthenticated: computed,\n  _registerSession: action.bound,\n  login: action.bound,\n  logout: action.bound\n})\n\nexport default AppState;","const options = {\n  url: \"https://jsdev.arcgis.com/4.13/\",\n  // url: \"https://js.arcgis.com/4.12/\",\n  // css: \"/jscss/my-theme/main.css\",\n  // css: true,\n  css: \"https://jsdev.arcgis.com/4.13/esri/themes/light/main.css\",\n  dojoConfig: {\n    has: {\n      \"esri-native-promise\": true\n    }\n  }\n}\n\nexport default options;","import React from 'react';\nimport {loadModules} from 'esri-loader';\nimport { observer } from \"mobx-react\";\nimport options from '../config/esri-loader-options';\n\nconst HistMinMaxSlideFilter = observer(class HistMinMaxSlideFilter extends React.Component{\n\n  constructor(props, context){\n    super(props, context);\n    this.sliderRef = React.createRef();\n    this.store = props.store;\n  }\n\n  onValuesChange = (newValues) => {\n    const [min, max] = newValues;\n    this.store.onValuesChange(min, max);\n  }\n\n  labelFunction = (value, type) => {\n    let label = ''\n    if (type === \"max\")\n      label = Math.ceil((!this.store.upperBoundSupplied && this.store.isLogarithmic) ? Math.pow(this.store.logBase,this.store.upperBound ) : this.store.upperBound);\n    if (type === \"min\") {\n      label = 0\n      if (this.store.lowerBound !== 0)\n        label = Math.floor((!this.store.lowerBoundSupplied && this.store.isLogarithmic) ? Math.pow(this.store.logBase, this.store.lowerBound) : this.store.lowerBound);\n    }\n    return label;\n  }\n\n  componentDidMount(){\n    loadModules([\n      'esri/widgets/HistogramRangeSlider',\n    ], options)\n    .then(([HistogramRangeSlider]) => {\n\n\n      this.slider = new HistogramRangeSlider({\n        bins: this.store.bins,\n        min: this.store.lowerBound,\n        max: this.store.upperBound,\n        values: [\n          this.store.min || this.store.lowerBound,\n          this.store.max || this.store.upperBound\n        ],\n        excludedBarColor: \"#bfbfbf\",\n        rangeType: \"between\",\n        container: this.sliderRef.current,\n        precision: 1\n      });\n      this.slider.labelFormatFunction = this.labelFunction;\n\n      this.listener = this.slider.watch(\"values\", this.onValuesChange);\n    })\n    .catch(er => console.log(er));\n  }\n\n  componentWillUnmount(){\n    if(this.listener) this.listener.remove();\n  }\n\n  render(){\n\n    if(this.slider && this.store.loaded){\n      this.slider.bins = this.store.bins;\n      this.slider.min = this.store.lowerBound;\n      this.slider.max = this.store.upperBound;\n      this.slider.values = [\n        this.store.min || this.store.lowerBound,\n        this.store.max || this.store.upperBound\n      ];\n    }\n\n    const title = this.store.fieldInfo.alias;\n    \n    return(\n      <>\n        <p>{title}</p>\n        <div style={{height: \"6rem\", width: \"100%\"}}>\n          <div ref={this.sliderRef}></div>\n        </div>\n      </>\n    )\n  }\n});\n\nexport default HistMinMaxSlideFilter;","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport { Select } from 'antd';\nconst { Option } = Select;\n\nconst SelectFilter = observer( ({store, mode}) => {\n  const children = store.options.slice().sort().map(o => {\n    let label = o;\n    if (store.domainMap.has(o)) {\n        label = store.domainMap.get(o);\n    }\n    return <Option key={o}>{label}</Option>\n  })\n  const title = store.fieldInfo.alias;\n  return (\n    <div style={{marginBottom: \"1rem\"}}>\n      <p>{title}</p>\n      <Select\n        mode={mode}\n        style={{ width: '100%' }}\n        placeholder=\"Please select\"\n        onSelect={mode === \"multiple\" ? null : store.onValueChange}\n        onChange={mode === \"multiple\" ? store.onValueChange : null}\n        value={store.selectValue}\n      >\n        {children}\n      </Select>\n    </div>\n  )\n})\n\nexport default SelectFilter;","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport { Card } from 'antd';\nimport HistMinMaxSlideFilter from '../components/HistMinMaxSlideFilter';\nimport SelectFilter from '../components/SelectFilter';\nimport { Select } from 'antd';\nconst { Option, OptGroup } = Select;\n\nconst LayerPanel = observer(class LayerPanel extends React.Component{\n\n  render(){\n\n    const FilterViews = this.props.store.filters.map(f => {\n      switch(f.type){\n        case 'minmax':\n          return <HistMinMaxSlideFilter store={f} key={f.field}/>\n        case 'multiselect':\n          return <SelectFilter store={f} key={f.field} mode=\"multiple\"/>\n        case 'select':\n          return <SelectFilter store={f} key={f.field}/>\n        default:\n          throw new Error(\"Unknown filter type!\");\n      }\n    });\n\n    let parentOptionView, factorOptionView, value;\n    if(this.props.store.aliasMap){\n      const [\n        parentOptions,\n        componentOptions\n      ] = this.props.store.rendererOptions.reduce((acc, o) => {\n        const [p, c] = acc;\n        if(o === 'eventvalue'){\n          const optComponent = <Option key={o}><b>{this.props.store.aliasMap.get(o)}</b></Option>\n          p.push(optComponent);\n        } else {\n          const optComponent = <Option key={o}>{this.props.store.aliasMap.get(o)}</Option>\n          c.push(optComponent);\n        }\n        return([p, c]);\n      }, [[],[]]);\n      parentOptionView = parentOptions[0];\n      factorOptionView = (\n        <OptGroup label=\"Contributing factors\">\n          {componentOptions}\n        </OptGroup>\n      );\n      value = this.props.store.aliasMap.get(this.props.store.rendererField);\n    }\n\n    return (\n      <>\n        <Card size=\"small\">\n          <h1>Explore</h1>\n          <Select\n            disabled={!this.props.store.aliasMap}\n            style={{ width: '100%' }}\n            placeholder=\"Please select\"\n            onChange={this.props.store.setRendererField}\n            size=\"large\"\n            value={value}>\n            {parentOptionView}\n            {factorOptionView}\n          </Select>\n        </Card>\n        <Card size=\"small\" style={{marginTop: \"10px\"}}>\n          <h1>Apply Filters</h1>\n          {FilterViews}\n        </Card>\n      </>\n    )\n  }\n\n});\n\nexport default LayerPanel;\n","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport {\n  Input,\n  Button,\n  Icon,\n  Statistic,\n  Card,\n  Divider\n} from 'antd';\nimport PinIcon from 'calcite-ui-icons-react/PinPlusIcon';\n\nconst CreateIcon = () => (\n  <PinIcon size=\"17\"/>\n)\n\nconst InputGroup = Input.Group;\n\nconst RoutePanel = observer(class RoutePanel extends React.Component{\n  render(){\n    const store = this.props.store;\n\n    const startIcon = store.editMode === 'start' || store.startGraphic\n      ? <Icon type='close'/>\n      : <Icon component={CreateIcon} />;\n    \n    const endIcon = store.editMode === 'end' || store.endGraphic\n      ? <Icon type='close'/>\n      : <Icon component={CreateIcon} />\n\n    return(\n      <>\n        <p>Route Start</p>\n        <InputGroup compact style={{marginBottom: \"15px\"}}>\n          <Button\n            style={{padding: \"0px 10px\"}}\n            onClick={_ => store.onCreateClick('start')}\n            disabled={!store.isSketchLoaded}>\n            {startIcon}\n          </Button>\n          <Input\n            style={{width: 'calc(100% - 40px)'}}\n            value={store.startStr}>\n          </Input>\n        </InputGroup>\n        <p>Route End</p>\n        <InputGroup compact style={{marginBottom: \"30px\"}}>\n          <Button\n            style={{padding: \"0px 10px\"}}\n            onClick={_ => store.onCreateClick('end')}\n            disabled={!store.isSketchLoaded}>\n            {endIcon}\n          </Button>\n          <Input\n            style={{width: 'calc(100% - 40px)'}}\n            value={store.endStr}>\n          </Input>\n        </InputGroup>\n        <Button\n          size=\"large\"\n          style={{width: \"100%\"}}\n          disabled={!(store.startGraphic && store.endGraphic)}\n          type=\"primary\"\n          ghost\n          onClick={store.generateRoutes}>\n          Generate routes\n        </Button>\n        <Divider/>\n        <Card\n          title={\n            <div>Travel Time\n              <span style={{float: 'right'}}>\n                <Icon type={store.safetyTimeDelta > 0 ? 'arrow-up' : 'arrow-down'}/>\n                <b>{` ${store.safetyTimeDelta ? Math.round(Math.abs(store.safetyTimeDelta)) : ' - - '}%`}</b>\n              </span>\n            </div>\n          }\n          size=\"small\"\n          style={{marginBottom: '15px'}}>\n          <Statistic\n            title=\"Without accounting for risk\"\n            value={store.stdTravelTime ? store.stdTravelTime : ' - - '}\n            precision={0}\n            prefix={<Icon type=\"minus\" style={{color: 'rgb(94, 43, 255)'}}/>}\n            suffix=\"min\"\n          />\n          <Statistic\n            title=\"Accounting for risk\"\n            value={store.safetyTravelTime ? store.safetyTravelTime : ' - - '}\n            precision={0}\n            prefix={<Icon type=\"minus\" style={{color: \"rgb(227, 69, 143)\"}}/>}\n            suffix=\"min\"\n          />\n        </Card>\n        <Card\n          title={\n            <div>Travel Safety Score\n              <span style={{float: 'right'}}>\n                <Icon type={store.safetyScoreeDelta > 0 ? 'arrow-up' : 'arrow-down'}/>\n                <b>{` ${store.safetyScoreDelta ? Math.round(Math.abs(store.safetyScoreDelta)) : ' - - '}%`}</b>\n              </span>\n            </div>\n          }\n          size=\"small\">\n          <Statistic\n            title=\"Without accounting for risk\"\n            value={store.stdTravelScore ? store.stdTravelScore : ' - - '}\n            precision={2}\n            prefix={<Icon type=\"minus\" style={{color: 'rgb(94, 43, 255)'}}/>}\n          />\n          <Statistic\n            title=\"Accounting for risk\"\n            value={store.safetyTravelScore ? store.safetyTravelScore : ' - - '}\n            precision={2}\n            prefix={<Icon type=\"minus\" style={{color: \"rgb(227, 69, 143)\"}}/>}\n          />\n        </Card>\n\n      </>\n    ) \n  }\n});\n\nexport default RoutePanel;","import { decorate, observable, action, computed } from 'mobx';\nimport {loadModules} from 'esri-loader';\nimport options from '../config/esri-loader-options';\nimport {getMinMaxWhere, getMultiSelectWhere, getSelectWhere} from '../utils/Utils';\n\nconst getMaxQuery = (field) => ({\n  onStatisticField: field,\n  outStatisticField: `MAX_${field}`,\n  statisticType: 'max'\n});\nconst getMinQuery = (field) => ({\n  onStatisticField: field,\n  outStatisticField: `MIN_${field}`,\n  statisticType: 'min'\n});\n\nclass Filter {\n  constructor(fieldName){\n    this.field = fieldName;\n    this.fieldInfo = {};\n  }\n  load(featureLayer){\n\n    if(!featureLayer.loaded){\n      throw new Error(\"Please wait until the layer is loaded\");\n    }\n    this.fieldInfo = featureLayer.fields.find(f => f.name === this.field);\n  }\n}\n\nclass SelectFilter extends Filter{\n  type = 'select';\n  loaded = false;\n  options = [];\n  selectValue = null;\n  domainMap = new Map();\n\n  constructor(fieldName, params){\n    super(fieldName);\n  }\n\n  load(featureLayer){\n    super.load(featureLayer);\n    const domain = featureLayer.getFieldDomain(this.field);\n    if(domain){\n      this.domainMap = domain.codedValues.reduce((p, cv) => {\n        p.set(cv.code, cv.name);\n        return p;\n      }, new Map());\n      console.log(domain);\n    }\n    featureLayer.queryFeatures({\n      where: \"1=1\",\n      returnDistinctValues: true,\n      outFields: [this.field]\n    }).then(res => {\n      this.options = res.features.map(f => \n        f.attributes[this.field]\n      ).sort();\n      this.loaded = true;\n    });\n  }\n\n  onValueChange(v){\n    console.log(\"CALLED\")\n    if(this.selectValue === v){\n      this.selectValue = null;\n    } else {\n      this.selectValue = v;\n    }\n  }\n\n  get where(){\n    return getSelectWhere(this.field, this.selectValue, this.fieldInfo.type);\n  }\n\n}\n\ndecorate(SelectFilter, {\n  options: observable,\n  loaded: observable,\n  selectValue: observable,\n  load: action.bound,\n  where: computed,\n  onValueChange: action.bound\n})\n\nclass MultiSelectFilter extends SelectFilter{\n  \n  type = 'multiselect';\n  selectValue = [];\n\n  onValueChange(v){\n    this.selectValue = v;\n  }\n  \n  get where(){\n    return getMultiSelectWhere(this.field, this.selectValue, this.fieldInfo.type);\n  }\n\n};\n\ndecorate(MultiSelectFilter, {\n  onValueChange: action.bound,\n  where: computed\n})\n\nclass MinMaxFilter extends Filter{\n\n  type = 'minmax';\n  bins = [];\n  loaded = false;\n  min = null;\n  max = null;\n\n  constructor(fieldName, params){\n    super(fieldName);\n    this.lowerBound = params.lowerBound || null;\n    this.upperBound = params.upperBound || null;\n    this.upperBoundSupplied = this.upperBound !== null;\n    this.lowerBoundSupplied = this.lowerBound !== null;\n    this.logBase = 10;\n    this.isLogarithmic = params.isLogarithmic || false;\n    this.numBins = (typeof params.numBins === 'undefined') ? 50 : params.numBins;\n    this.bins = [];\n    this.loaded = false;\n  }\n  load(featureLayer, view){\n    super.load(featureLayer);\n    const field = this.field;\n\n    const isLwr = this.lowerBound || this.lowerBound === 0;\n    const isUpr = this.upperBound || this.upperBound === 0;\n\n    let histPromise = loadModules([\n      'esri/renderers/smartMapping/statistics/histogram'\n    ], options);\n\n    let lwrUprPromise;\n    if(isLwr && isUpr){\n      lwrUprPromise = Promise.resolve([this.lowerBound, this.upperBound]);\n    } else {\n      let queries = [];\n      if(!isLwr) queries.push(getMinQuery(field));\n      if(!isUpr) queries.push(getMaxQuery(field));\n      lwrUprPromise = featureLayer.queryFeatures({\n        where: \"1=1\",\n        outStatistics: queries\n      }).then(qRes => {\n\n        const attrs = qRes.features[0].attributes;\n        return [\n          isLwr ? this.lowerBound : attrs[`MIN_${field}`],\n          isUpr ? this.upperBound : attrs[`MAX_${field}`]\n        ]\n      })\n    }\n\n    Promise.all([histPromise, lwrUprPromise])\n      .then(([[getHistogram], minMaxRes]) => {\n        const [rawMin, rawMax] = minMaxRes;\n        this.lowerBound = Math.floor(rawMin);\n        this.upperBound = Math.ceil(rawMax);\n        if (this.isLogarithmic){\n          if (!this.lowerBoundSupplied && this.lowerBound !== 0)\n            this.lowerBound = Math.floor((Math.log(this.lowerBound) / Math.log(this.logBase)) * 100) / 100;\n          if (!this.upperBoundSupplied && this.upperBound !== 0)\n            this.upperBound = Math.ceil((Math.log(this.upperBound) / Math.log(this.logBase)) * 100) / 100;\n        }\n        console.log(`Field: ${this.field}, Min:${this.lowerBound}, Max:${this.upperBound}`);\n\n        return getHistogram({\n          layer: featureLayer,\n          field: field,\n          numBins: this.numBins,\n          minValue: this.lowerBound,\n          maxValue: this.upperBound,\n          valueExpression: this.isLogarithmic ? `IIf($feature.${this.field} != 0,Log($feature.${this.field}) / Log(${this.logBase}),0)` : `$feature.${this.field}`,\n          view\n        })\n      })\n      .then(histRes => {\n        this.bins = histRes.bins;\n        this.loaded = true;\n      })\n  }\n  onValuesChange(min, max){\n    this.min = min;\n    this.max = max;\n    //console.log(`${min},${max}`)\n  }\n\n  get where(){\n    if(this.min === this.lowerBound && this.max === this.upperBound){\n      return null;\n    }\n\n    let maxWhere = (!this.upperBoundSupplied && this.isLogarithmic) ? Math.pow(this.logBase, this.max) : this.max;\n    let minWhere = (!this.lowerBoundSupplied && this.isLogarithmic) ? Math.pow(this.logBase, this.min) : this.min;\n\n    \n    return getMinMaxWhere(this.field, minWhere, maxWhere);\n  }\n}\ndecorate(MinMaxFilter, {\n  min: observable,\n  max: observable,\n  loaded: observable,\n  fieldInfo: observable,\n  where: computed,\n  load: action.bound,\n  onValuesChange: action.bound\n})\n\nexport {SelectFilter, MinMaxFilter, MultiSelectFilter}","const getMinMaxWhere = (field, min, max) => {\n  const isMin = min || min === 0;\n  const isMax = max || max === 0;\n  let where = null;\n  if(isMin && isMax){\n    where = field + \" <= \" + max + \" AND \" + field + \" >= \" + min;\n  } else if(isMax){\n    where = field + \" <= \" + max;\n  } else if(isMin){\n    where = field + \" >= \" + min;\n  }\n  console.log(\"ORK hmm\", where)\n  return where;\n}\n\nconst getMultiSelectWhere = (field, values, fieldType) => {\n  if(!values || values.length < 1) return null;\n  let where = null;\n  if(fieldType === 'string') {\n    const wstr = values.join(\"','\");\n    where = `${field} IN ('${wstr}')`;\n  } else {\n    const wstr = values.join(\",\");\n    where =  `${field} IN (${wstr})`;\n  }\n  return where;\n}\n\nconst getSelectWhere = (field, value, fieldType) => {\n  if(!value) return null;\n  let where = null;\n  where = (fieldType === 'string')\n    ? `${field} = '${value}'` :\n    `${field} = ${value}`;\n  return where\n}\n\nexport {getMinMaxWhere, getMultiSelectWhere, getSelectWhere};","import {decorate, observable, action, computed, autorun} from 'mobx';\nimport { MinMaxFilter, MultiSelectFilter, SelectFilter } from './Filters';\nimport { HistogramStore } from './HistogramStore';\nimport {loadModules} from 'esri-loader';\nimport options from '../config/esri-loader-options';\n\nlet pUtils;\n\nclass Store {\n\n  credential = {};\n  aliasMap = null;\n\n  constructor(appState, storeConfig){\n    this.appState = appState;\n    this.layerId = storeConfig.layerItemId;\n    this.filters = storeConfig.filters.map(f => {\n      switch(f.type){\n        case 'minmax':\n          return new MinMaxFilter(f.name, f.params)\n        case 'multiselect':\n          return new MultiSelectFilter(f.name, f.params);\n        case 'select':\n          return new SelectFilter(f.name, f.params);\n        default:\n          throw new Error(\"Unknown filter type!\")\n      }\n    });\n    this.histograms =  (typeof storeConfig.histograms === 'undefined') ? [] :\n      storeConfig.histograms.map(f => {\n        if(f.withFilter) {        \n          return new MinMaxFilter(f.name, f.params);\n        } else {\n          return new HistogramStore(f.name, f.params);\n        }\n      });\n    \n    this.renderers = storeConfig.renderers;\n    this.rendererOptions = [...Object.keys(this.renderers)];\n    this.rendererField = storeConfig.initialRendererField;\n    this.popupTemplate = storeConfig.popupTemplate;\n    this.layerLoaded = false;\n    this.viewConfig = storeConfig.viewConfig;\n  }\n\n  _loadLayers(){\n    this.view.whenLayerView(this.lyr)\n    .then(lV => {\n      this.lyrView = lV;\n      this.filters.forEach(f => f.load(this.lyr, this.view));\n      this.histograms.forEach(f => f.load(this.lyr, this.view));\n      this.aliasMap = this.lyr.fields.reduce((p, f) => {\n        p.set(f.name, f.alias);\n        return p;\n      }, new Map());\n      this.layerLoaded = true;\n    });\n  }\n\n  _buildAutoRunEffects(){\n    const onApplyFilter = pUtils.debounce(function(layerView, where){\n      layerView.filter = {where};\n    });\n    this.effectHandler = autorun(_ => {\n      const where = this.where;\n      if(this.lyrView && onApplyFilter){\n        onApplyFilter(this.lyrView, where);\n      }\n    });\n    this.rendererHandler = autorun(_ => {\n      const rendererField = this.rendererField;\n      if(!this.lyr) return;\n      const renderer = this.renderers[rendererField];\n      if(renderer._type === 'jsapi') {\n        this.lyr.renderer = renderer;\n        return;\n      } \n      loadModules(['esri/renderers/support/jsonUtils'], options)\n        .then(([rendererJsonUtils]) => {\n          this.lyr.renderer = rendererJsonUtils.fromJSON(this.renderers[rendererField]);\n        });\n    })\n  }\n\n  setRendererField(field){\n    this.rendererField = field;\n  }\n\n  load(mapViewDiv){\n    \n    return loadModules([\n      'esri/Map',\n      'esri/views/MapView',\n      'esri/layers/FeatureLayer',\n      'esri/core/promiseUtils',\n      'esri/identity/IdentityManager',\n      'esri/renderers/support/jsonUtils'\n    ], options)\n    .then(([Map, MapView, FeatureLayer, promiseUtils, esriId, rendererJsonUtils]) => {\n\n      esriId.registerToken(this.appState.session.toCredential());\n\n      pUtils = promiseUtils; \n      this._buildAutoRunEffects();\n\n      let renderer;\n      if (this.renderers[this.rendererField]._type === 'jsapi')\n        renderer = this.renderers[this.rendererField];\n      else\n        renderer = rendererJsonUtils.fromJSON(this.renderers[this.rendererField]);\n\n      this.lyr = new FeatureLayer({\n        portalItem: {id: this.layerId},\n        renderer: renderer,\n\n        popupTemplate: this.popupTemplate\n      });\n      this.map = new Map({\n        basemap: 'dark-gray-vector',\n        layers: [this.lyr]\n      });\n      this.view = new MapView({\n        map: this.map,\n        container: mapViewDiv,\n        center: this.viewConfig.center,\n        zoom: this.viewConfig.zoom\n      });\n      this._loadLayers();\n      return this.view;\n    });\n  }\n\n  get where(){\n    const where = this.filters\n      .filter(f => !!f.where)\n      .map(f => f.where)\n      .join(' AND ') +\n      this.histograms\n      .filter(f => !!f.where)\n      .map(f => f.where)\n      .join(' AND '); \n    return where ? where : \"1=1\";\n  }\n}\n\ndecorate(Store, {\n  user: observable,\n  rendererField: observable,\n  layerLoaded: observable,\n  aliasMap: observable,\n  where: computed,\n  load: action.bound,\n  setRendererField: action.bound,\n  _loadLayers: action.bound,\n});\n\nexport default Store;","import { decorate, observable, action } from 'mobx';\nimport {loadModules} from 'esri-loader';\nimport options from '../config/esri-loader-options';\n\nclass HistogramStore {\n\n    bins = [];\n    loaded = false;\n    \n\n    constructor(fieldName, params){\n      this.field = fieldName;\n      this.fieldInfo = {};\n      this.log = params.log || false;\n      this.bins = [];\n      this.loaded = false;\n    }\n\n    load(featureLayer){\n      if(!featureLayer.loaded){\n            throw new Error(\"Please wait until the layer is loaded\");\n      }\n      this.fieldInfo = featureLayer.fields.find(f => f.name === this.field);\n      const field = this.field;\n  \n  \n      let histPromise = loadModules([\n        'esri/widgets/Histogram'\n      ], options);\n  \n  \n      Promise.all([histPromise])\n        .then(([[getHistogram]]) => {\n          return getHistogram({\n            layer: featureLayer,\n            field: field,\n//            normalizationField: field,\n            numBins: 140,\n            minValue : 0,\n            maxValue : 140,\n          })\n        })\n        .then(histRes => {\n            this.bins = histRes.bins;\n//            console.log(\"ORK 1\", this.bins)\n            this.loaded = true;})\n    }\n  \n  }\n  decorate(HistogramStore, {\n    loaded: observable,\n    fieldInfo: observable,\n    load: action.bound,\n    bins:observable,\n  })\n\n\n  export {HistogramStore}","import {decorate, observable, action } from 'mobx';\nimport {loadModules} from 'esri-loader';\nimport options from '../config/esri-loader-options';\nimport Store from '../stores/Store';\n\nconst scoreStatQuery = {\n  onStatisticField: 'eventvalue',\n  outStatisticFieldName: 'score_sum',\n  statisticType: 'sum'\n}\n\nclass SafetyStore extends Store {\n  editMode = null;\n  startGraphic = null;\n  endGraphic = null;\n  startStr = '';\n  endStr = '';\n  isSketchLoaded = false;\n\n  stdTravelTime = null;\n  safetyTravelTime = null;\n  stdTravelScore = null;\n  safetyTravelScore = null;\n\n  load(mapViewDiv){\n    return super.load(mapViewDiv)\n      .then(view => {\n        loadModules(['esri/widgets/Sketch/SketchViewModel'], options)\n          .then(([SketchVM]) => {\n            this.sketchVM = new SketchVM({\n              view,\n              layer: view.graphics\n            });\n            this.sketchListener = this.sketchVM.on(\"create\", this.onCreateComplete);\n            this.isSketchLoaded = true;\n          });\n        return view;\n      })\n  }\n\n  onCreateComplete(evt){\n    if(evt.state !== 'complete') return;\n    if(this.editMode === 'start'){\n      this.startGraphic = evt.graphic;\n      this.setAddressFromGeocode('start', this.startGraphic);\n    } else if (this.editMode === 'end'){\n      this.endGraphic = evt.graphic;\n      this.setAddressFromGeocode('end', this.endGraphic);\n    } else {\n      this.view.graphics.remove(evt.graphic);\n    }\n  }\n\n  setAddressFromGeocode(stopType, graphic){\n    loadModules(['esri/tasks/Locator'], options)\n    .then(([Locator]) => {\n      const locator = new Locator({\n        url: \"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer\"\n      });\n      return locator.locationToAddress({\n        location: graphic.geometry,\n        locationType: \"street\"\n      });\n    })\n    .then(res => {\n      if(stopType === 'start') this.startStr = res.address;\n      else if(stopType === 'end') this.endStr = res.address;\n    });\n  }\n\n  // don't like this logic, re-write at some point #refactor!\n  onCreateClick(e){\n    if(e === 'start' && this.startGraphic){\n      this.view.graphics.remove(this.startGraphic);\n      this.startGraphic = null;\n      this.editMode = e;\n      this.startStr = '';\n    }\n    if(e === 'end' && this.endGraphic){\n      this.view.graphics.remove(this.endGraphic);\n      this.endGraphic = null;\n      this.editMode = e;\n      this.endStr = '';\n    }\n    if(this.editMode === e){\n      this.editMode = null;\n      if(this.sketchVM.state === 'active') {\n        this.sketchVM.cancel();\n      }\n    } else {\n      this.sketchVM.create(\"point\");\n      this.editMode = e;\n    }\n  }\n\n  generateStdRoute(){\n    loadModules([\n      'esri/tasks/RouteTask',\n      'esri/tasks/support/RouteParameters',\n      'esri/tasks/support/FeatureSet',\n      'esri/geometry/SpatialReference'\n    ], options)\n    .then(([\n      RouteTask,\n      RouteParameters,\n      FeatureSet,\n      SpatialReference\n    ]) => {\n      const routeTask = new RouteTask({\n        url: \"https://route.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World/solve\"\n      });\n  \n      const routeParams = new RouteParameters({\n        stops: new FeatureSet(),\n        outSpatialReference: SpatialReference.WebMercator\n      });\n  \n      routeParams.stops.features.push(this.startGraphic);\n      routeParams.stops.features.push(this.endGraphic);\n  \n      return routeTask.solve(routeParams)\n    })\n    .then(data => {\n      if(this.stdRoute) this.view.graphics.remove(this.stdRoute);\n      this.stdRoute = data.routeResults[0].route;\n      this.stdRoute.symbol = {\n        type: \"simple-line\",\n        color: [94, 43, 255, 1],\n        width: 3\n      };\n      this.stdTravelTime = this.stdRoute.attributes['Total_TravelTime'];\n      this.view.graphics.add(this.stdRoute);\n      return this.lyrView.queryFeatures({\n        where: \"1=1\",\n        geometry: this.stdRoute.geometry,\n        outStatistics: [scoreStatQuery]\n      })\n    }).then(res => {\n      if(res.features && res.features.length){\n        this.stdTravelScore = res.features[0].attributes['score_sum']\n      }\n    });\n  }\n\n  generateScoreRoute(){\n    const pQuery = this.lyrView.queryFeatures({\n      where: \"1=1\",\n      geometry: this.view.extent,\n      orderByFields: ['eventvalue DESC'],\n      returnGeometry: true,\n      outFields: ['eventvalue', 'OBJECTID']\n    });\n    const pModules = loadModules([\n      'esri/tasks/RouteTask',\n      'esri/tasks/support/RouteParameters',\n      'esri/tasks/support/FeatureSet',\n      'esri/geometry/SpatialReference',\n      \"esri/geometry/geometryEngine\"\n    ], options);\n\n    Promise.all([pQuery, pModules])\n    .then(([\n      qres,\n      [ RouteTask, RouteParameters, FeatureSet, SpatialReference,geometryEngine]\n    ]) => {\n\n      const routeTask = new RouteTask({\n        url: \"https://route.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World/solve\"\n      });\n  \n      const routeParams = new RouteParameters({\n        stops: new FeatureSet(),\n        //polylineBarriers: new FeatureSet(),\n        polygonBarriers: new FeatureSet(),\n        outSpatialReference: SpatialReference.WebMercator\n      });\n  \n      routeParams.stops.features.push(this.startGraphic);\n      routeParams.stops.features.push(this.endGraphic);\n\n      var scorepolys = qres.features.slice(0,100).map((f,i) => {\n        var scorebuffer = {\n          geometry: geometryEngine.geodesicBuffer(f.geometry, 15, \"meters\"),\n          symbol: {type: \"simple-fill\", color: 'red'}\n        }\n        return scorebuffer;  \n      });\n      this.view.graphics.addMany(scorepolys);\n      routeParams.polygonBarriers.features = scorepolys;\n\n      return routeTask.solve(routeParams)\n    })\n    .then(data => {\n      if(this.scoreRoute) this.view.graphics.remove(this.scoreRoute);\n      this.scoreRoute = data.routeResults[0].route;\n      this.scoreRoute.symbol = {\n        type: \"simple-line\",\n        color: [227, 69, 143, 1],\n        width: 3\n      };\n      this.safetyTravelTime = this.scoreRoute.attributes['Total_TravelTime'];\n      this.view.graphics.add(this.scoreRoute);\n      return this.lyrView.queryFeatures({\n        where: \"1=1\",\n        geometry: this.scoreRoute.geometry,\n        outStatistics: [scoreStatQuery]\n      })\n    }).then(res => {\n      if(res.features && res.features.length){\n        this.safetyTravelScore = res.features[0].attributes['score_sum']\n      }\n    });\n  }\n\n   generateRoutes(){\n    \n    loadModules([\n      'esri/tasks/RouteTask',\n      'esri/tasks/support/RouteParameters',\n      'esri/tasks/support/FeatureSet',\n      'esri/geometry/SpatialReference'\n    ], options)\n    .then(_ => {\n      this.generateStdRoute();\n      this.generateScoreRoute();\n    });\n\n   }\n\n   get safetyScoreDelta(){\n     if(!this.stdTravelScore || !this.safetyTravelScore){\n       return null;\n     }\n     return 100 * ((this.safetyTravelScore - this.stdTravelScore) / this.stdTravelScore);\n   }\n\n   get safetyTimeDelta(){\n    if(!this.stdTravelTime || !this.safetyTravelTime){\n      return null;\n    }\n    return 100 * ((this.safetyTravelTime - this.stdTravelTime) / this.stdTravelTime);\n  }\n\n}\n\ndecorate(SafetyStore, {\n  editMode: observable,\n  startGraphic: observable,\n  endGraphic: observable,\n  startStr: observable,\n  endStr: observable,\n  isSketchLoaded: observable,\n  stdTravelTime: observable,\n  safetyTravelTime: observable,\n  stdTravelScore: observable,\n  safetyTravelScore: observable,\n  onStartClick: action.bound,\n  onEndClick: action.bound,\n  load: action.bound,\n  onCreateComplete: action.bound,\n  setAddressFromGeocode: action.bound,\n  generateRoutes: action.bound,\n  generateStdRoute: action.bound\n})\n\nexport default SafetyStore;","const getRenderer = (field) => ({\n  _type: \"jsapi\",\n  type: \"simple\",\n  symbol: { type: \"simple-line\" },\n  visualVariables: [{\n    type: \"color\",\n    field,\n    stops: [\n      { value: 1, color: [13,38,68,255], label: '1' },\n      { value: 2, color: [56,98,122,255], label: null },\n      { value: 4, color: [98,158,176,255], label: '4' },\n      { value: 8, color: [177,205,194,255], label: null },\n      { value: 16, color: [255,252,212,255], label: '16'},\n    ]\n  }]\n})\n\nconst safetyConfig = {\n  layerItemId: '534f26d211154527b31c976ea6b5eafe',\n  initialRendererField: 'eventvalue',\n  renderers: {\n    'eventvalue': getRenderer('eventvalue'),\n    'harsh_cornering_ratio': getRenderer('harsh_cornering_ratio'),\n    'harsh_acc_ratio': getRenderer('harsh_acc_ratio'),\n    'pedestrians_density': getRenderer('pedestrians_density'),\n    'bicycles_density': getRenderer('bicycles_density'),\n    'speeding_ratio': getRenderer('speeding_ratio'),\n    'avarge_speed': {\n      _type: \"jsapi\",\n      type: \"simple\",\n      symbol: { type: \"simple-line\" },\n      visualVariables: [{\n        type: \"color\",\n        field: 'avarge_speed',\n        stops: [\n          { value: 0, color: [13,38,68,255], label: '0' },\n          { value: 25, color: [56,98,122,255], label: null },\n          { value: 50, color: [98,158,176,255], label: '50' },\n          { value: 75, color: [177,205,194,255], label: null },\n          { value: 100, color: [255,252,212,255], label: '100'},\n        ]\n      }]\n    }\n  },\n  filters: [\n      //lowerBound: 0, upperBound: 100,\n    {name: 'eventvalue', type: 'minmax', params: {isLogarithmic: true, log: true}},\n    {name: 'harsh_cornering_ratio', type: 'minmax', params: {isLogarithmic: true, log: true}},\n    {name: 'harsh_acc_ratio', type: 'minmax', params: {isLogarithmic: true, log: true}},\n    {name: 'pedestrians_density', type: 'minmax', params: {isLogarithmic: true, log: true}},\n    {name: 'bicycles_density', type: 'minmax', params: {isLogarithmic: true, log: true}},\n    {name: 'speeding_ratio', type: 'minmax', params: {isLogarithmic: true, log: true}},\n    {name: 'avarge_speed', type: 'minmax', params: {isLogarithmic: true, log: true}}\n  ],\n  popupTemplate: {\n    title: \"Hello world!\",\n    content: \"Road safety score: <b>{eventvalue}</b>\"\n  },\n  viewConfig: {\n    center: [-74.00157, 40.71955],\n    zoom: 12\n  }\n\n}\n\nexport default safetyConfig;","import React from 'react'\nimport { observer } from \"mobx-react\";\nimport { Layout, Menu, Drawer, Icon, Row, Col } from 'antd';\nimport LayerFilterIcon from 'calcite-ui-icons-react/LayersIcon';\nimport BookmarkIcon from 'calcite-ui-icons-react/BookmarkIcon';\nimport RouteFromIcon from 'calcite-ui-icons-react/RouteFromIcon';\nimport InformationIcon from 'calcite-ui-icons-react/InformationIcon';\nimport {loadModules} from 'esri-loader';\nimport options from '../config/esri-loader-options';\nimport LayerPanel from './LayerPanel';\nimport RoutePanel from './RoutePanel';\nimport SafetyStore from './SafetyStore';\nimport safetyConfig from './SafetyConfig';\n\nconst { Header, Content, Sider } = Layout;\n\nconst MenuFilterIcon = () => (\n  <LayerFilterIcon size=\"18\" filled/>\n)\nconst MenuBookmarkIcon = () => (\n  <BookmarkIcon size=\"18\" filled/>\n)\nconst MenuRouteFromIcon = () => (\n  <RouteFromIcon size=\"20\" filled/>\n)\nconst MenuInformationIcon = () => (\n  <InformationIcon size=\"17\" filled/>\n)\n\nconst SafetyApp = observer(class App extends React.Component {\n\n  state = {\n    collapsed: false,\n    loaded: false,\n    navKey: null\n  };\n\n  constructor(props, context){\n    super(props, context);\n    this.mapViewRef = React.createRef();\n    this.store = new SafetyStore(props.appState, safetyConfig);\n  }\n\n  onCollapse = collapsed => {\n    this.setState({ collapsed });\n  };\n\n  onSelect = item => {\n    const navKey = this.state.navKey === item.key\n      ? null\n      : item.key;\n    this.setState({navKey});\n  }\n\n  onClose = () => {\n    this.setState({\n      navKey: null,\n    });\n  };\n\n  componentDidMount = () => {\n\n    const modulePromise = loadModules([\n      'esri/widgets/Search',\n      'esri/widgets/Legend'\n    ], options);\n    const loadPromise = this.store.load(this.mapViewRef.current);\n\n    Promise.all([modulePromise, loadPromise])\n      .then(([[Search, Legend], mapView]) => {\n        this.view = mapView;\n        const search = new Search({view: this.view});\n        this.view.ui.add(search, \"top-right\");\n        const legend = new Legend({view: this.view});\n        this.view.ui.add(legend, \"bottom-right\");\n        this.view.ui.move(\"zoom\", \"top-right\");\n      });\n  }\n\n  render() {\n    let panel;\n    switch(this.state.navKey){\n      case 'Layers':\n        panel = <LayerPanel store={this.store}/>;\n        break;\n      case 'Bookmarks':\n        panel = <h1>Woah this are some awesome bookmarks!</h1>;\n        break;\n      case 'Route':\n        panel = <RoutePanel store={this.store}/>\n        break;\n      case 'About':\n        panel = <h1>This is a slick app! Thanks Max!</h1>;\n        break;\n      default:\n        panel = null;\n    }\n\n    const signin = this.props.appState.displayName\n      ? (\n        <Menu\n          theme=\"dark\"\n          mode=\"horizontal\"\n          style={{ lineHeight: '64px', float: \"right\" }}\n        >\n          <Menu.Item key=\"sign in\">{this.props.appState.displayName}</Menu.Item>\n        </Menu>\n      )\n      : null;\n\n    return (\n      <Layout style={{ minHeight: '100vh' }}>\n        <Header style={{paddingLeft: \"1rem\", paddingRight: \"0rem\"}}>\n          <h1 style={{color: \"rgba(255,255,255,0.8\", float: \"left\"}}>Road Safety Score</h1>\n          {signin}\n        </Header>\n        <Layout>\n          <Sider collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse}>\n            <Menu\n              defaultSelectedKeys={['0']}\n              mode=\"inline\"\n              theme=\"dark\"\n              selectedKeys={[this.state.navKey]}\n              onClick={this.onSelect}>\n              <Menu.Item key=\"Layers\">\n                <Icon component={MenuFilterIcon} />\n                <span>Layers</span>\n              </Menu.Item>\n              <Menu.Item key=\"Bookmarks\">\n                <Icon component={MenuBookmarkIcon} />\n                <span>Bookmarks</span>\n              </Menu.Item>\n              <Menu.Item key=\"Route\">\n                <Icon component={MenuRouteFromIcon} />\n                <span>Route</span>\n              </Menu.Item>\n              <Menu.Item key=\"About\">\n                <Icon component={MenuInformationIcon} />\n                <span>About</span>\n              </Menu.Item>\n            </Menu>\n          </Sider>\n          <Content>\n            <Row>\n              <Col\n                span={24}\n                style={{height: \"calc(100vh - 64px)\"}}>\n              <div\n                ref={this.mapViewRef}\n                style={{width: \"100%\", height: \"100%\"}}/>\n              <Drawer\n                // title={this.state.navKey}\n                closable={false}\n                // onClose={this.onClose}\n                placement=\"left\"\n                visible={this.state.navKey}\n                mask={false}\n                getContainer={false}\n                style={{ position: 'absolute', background: \"#f5f5f5\", height: \"calc(100% - 15px)\"}}\n                bodyStyle={{ padding: \"10px\", background: \"#f5f5f5\", height: \"100%\", overflowY: 'scroll' }}\n              >\n                {panel}\n              </Drawer>\n            </Col>\n            </Row>\n          </Content>\n        </Layout>\n      </Layout>\n    );\n  }\n});\n\nexport default SafetyApp;","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport { Card } from 'antd';\nimport HistMinMaxSlideFilter from '../components/HistMinMaxSlideFilter';\nimport SelectFilter from '../components/SelectFilter';\n\nconst LayerPanel = observer(class LayerPanel extends React.Component{\n\n  render(){\n\n    const FilterViews = this.props.store.filters.map(f => {\n      switch(f.type){\n        case 'minmax':\n          return <HistMinMaxSlideFilter store={f} key={f.field}/>\n        case 'multiselect':\n          return <SelectFilter store={f} key={f.field} mode=\"multiple\"/>\n        case 'select':\n          return <SelectFilter store={f} key={f.field}/>\n        default:\n          throw new Error(\"Unknown filter type!\");\n      }\n    })\n\n    return (\n      <>\n        <Card size=\"small\">\n          <h1>Explore</h1>\n        </Card>\n        <Card size=\"small\" style={{marginTop: \"10px\"}}>\n          <h1>Apply Filters</h1>\n          {FilterViews}\n        </Card>\n      </>\n    )\n  }\n\n});\n\nexport default LayerPanel;\n","// update to map\n\nimport bicycleImage from '../resources/images/ET_BICYCLE.png'\nimport pedImage from '../resources/images/ET_PED_ON_HW.png'\n\nconst eventsConfig = {\n  layerItemId: 'b6e8773284fe4b6891c7196a57e238b8',\n  initialRendererField: 'eventsubtype',\n  renderers : {\n    'eventsubtype': {\n      _type: \"jsapi\",\n      type: \"unique-value\",  // autocasts as new UniqueValueRenderer()\n      field: \"eventsubtype\",\n      defaultSymbol: {type: \"simple-marker\", color: \"blue\"},\n      uniqueValueInfos: [{\n        value: \"pedestrians\",\n        symbol: {\n          type: \"picture-marker\",\n          url: pedImage\n        }\n      }, {\n        value: \"bicycles\",\n        symbol: {\n          type: \"picture-marker\",\n          url: bicycleImage\n        }\n      }\n      ]\n    }\n  }\n  ,\n  filters: [\n    {name: 'eventvalue', type: 'minmax', params: {lowerBound: 0, upperBound: 20, log: true}},\n//    {name: 'eventtype', type: 'multiselect'},\n    {name: 'eventsubtype', type: 'multiselect'},\n    {name: 'project', type: 'multiselect', params: {lowerBound: 0, upperBound: 100, log: true}},\n//    {name: 'eventtimestamp', type: 'minmax', params: {lowerBound: 0, upperBound: 100, log: true}},\n  ],\n  popupTemplate: {\n    title: \"Event information:\",\n    content: \"Event type: <b>{eventsubtype}</b><br>\" +\n        \"Project: {project}<br>\" +\n        \"Event value: {eventvalue}<br>\" +\n        \"Event timestamp: {eventtimestamp}\"\n  },\n  viewConfig: {\n    center: [-74.00157, 40.71955],\n    zoom: 12\n  }\n\n}\n\nexport default eventsConfig;\n\n\n","import React from 'react'\nimport { observer } from \"mobx-react\";\nimport { Layout, Menu, Drawer, Icon, Row, Col } from 'antd';\nimport LayerFilterIcon from 'calcite-ui-icons-react/LayersIcon';\nimport BookmarkIcon from 'calcite-ui-icons-react/BookmarkIcon';\nimport RouteFromIcon from 'calcite-ui-icons-react/RouteFromIcon';\nimport InformationIcon from 'calcite-ui-icons-react/InformationIcon';\nimport {loadModules} from 'esri-loader';\nimport options from '../config/esri-loader-options';\nimport LayerPanel from './LayerPanel';\nimport Store from '../stores/Store';\nimport eventsConfig from './EventsConfig';\n\nconst { Header, Content, Sider } = Layout;\n\nconst MenuFilterIcon = () => (\n  <LayerFilterIcon size=\"18\" filled/>\n)\nconst MenuBookmarkIcon = () => (\n  <BookmarkIcon size=\"18\" filled/>\n)\nconst MenuRouteFromIcon = () => (\n  <RouteFromIcon size=\"20\" filled/>\n)\nconst MenuInformationIcon = () => (\n  <InformationIcon size=\"17\" filled/>\n)\n\nconst EventsApp = observer(class App extends React.Component {\n\n  state = {\n    collapsed: true,\n    loaded: false,\n    navKey: \"Layers\"\n  };\n\n  constructor(props, context){\n    super(props, context);\n    this.mapViewRef = React.createRef();\n    this.sliderRef = React.createRef();\n    this.store = new Store(props.appState, eventsConfig);\n  }\n\n  onCollapse = collapsed => {\n    this.setState({ collapsed });\n  };\n\n  onSelect = item => {\n    const navKey = this.state.navKey === item.key\n      ? null\n      : item.key;\n    this.setState({navKey});\n  }\n\n  onClose = () => {\n    this.setState({\n      navKey: null,\n    });\n  };\n\n  componentDidMount = () => {\n\n    const modulePromise = loadModules([\n      'esri/widgets/Search',\n      'esri/widgets/Legend',\n      'esri/widgets/TimeSlider'\n\n    ], options);\n    const loadPromise = this.store.load(this.mapViewRef.current);\n\n    Promise.all([modulePromise, loadPromise])\n      .then(([[Search, Legend, TimeSlider], mapView]) => {\n        this.view = mapView;\n        const search = new Search({view: this.view});\n        const legend = new Legend({view: this.view});\n\n        // create a new time slider widget\n        // set other properties when the layer view is loaded\n        // by default timeSlider.mode is \"time-window\" - shows\n        // data falls within time range\n        const timeSlider = new TimeSlider({\n          container: \"timeSlider\",\n          mode: \"time-window\",\n          view: this.view,\n          loop: false\n\n        });\n\n        // const timeSlider = new TimeSlider({\n        //   container: \"timeSlider\",\n        //   playRate: 50,\n        //   stops: {\n        //     interval: {\n        //       value: 1,\n        //       unit: \"hours\"\n        //     }\n        //   }\n        // });\n        this.timeSlider = timeSlider;\n        //timeSlider.values = [new Date(2019, 1, 1), new Date(2020, 1, 1)];\n        this.view.ui.add(timeSlider, \"top-right\");\n        this.view.ui.add(search, \"top-right\");\n        this.view.ui.add(legend, \"bottom-right\");\n        this.view.ui.move(\"zoom\", \"top-right\");\n      });\n  }\n\n  render() {\n    let panel;\n    switch (this.state.navKey) {\n      case 'Layers':\n        panel = <LayerPanel store={this.store} map={this.map}/>;\n        break;\n      case 'Bookmarks':\n        panel = <h1>Woah this are some awesome bookmarks!</h1>;\n        break;\n      case 'Route':\n        panel = <h1>Routing seems like a lot of work</h1>;\n        break;\n      case 'About':\n        panel = <h1>This is a slick app! Thanks Max!</h1>;\n        break;\n      default:\n        panel = null;\n    }\n\n    // Init Time Slider\n    if (this.store.layerLoaded){\n      const fullTimeExtent = this.store.lyr.timeInfo.fullTimeExtent;\n\n      // set up time slider properties\n      this.timeSlider.fullTimeExtent = fullTimeExtent;\n      // this.timeSlider.stops = {\n      //   interval: this.store.lyr.timeInfo.interval\n      // };\n    }\n\n\n    const signin = this.props.appState.displayName\n      ? (\n        <Menu\n          theme=\"dark\"\n          mode=\"horizontal\"\n          style={{ lineHeight: '64px', float: \"right\" }}\n        >\n          <Menu.Item key=\"sign in\">{this.props.appState.displayName}</Menu.Item>\n        </Menu>\n      )\n      : null;\n\n    return (\n      <Layout style={{ minHeight: '100vh' }}>\n        <Header style={{paddingLeft: \"1rem\", paddingRight: \"0rem\"}}>\n          <h1 style={{color: \"rgba(255,255,255,0.8\", float: \"left\"}}>Live Events</h1>\n          {signin}\n        </Header>\n        <Layout>\n          <Sider collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse}>\n            <Menu\n              defaultSelectedKeys={['0']}\n              mode=\"inline\"\n              theme=\"dark\"\n              selectedKeys={[this.state.navKey]}\n              onClick={this.onSelect}>\n              <Menu.Item key=\"Layers\">\n                <Icon component={MenuFilterIcon} />\n                <span>Layers</span>\n              </Menu.Item>\n              <Menu.Item key=\"Bookmarks\">\n                <Icon component={MenuBookmarkIcon} />\n                <span>Bookmarks</span>\n              </Menu.Item>\n              <Menu.Item key=\"Route\">\n                <Icon component={MenuRouteFromIcon} />\n                <span>Route</span>\n              </Menu.Item>\n              <Menu.Item key=\"About\">\n                <Icon component={MenuInformationIcon} />\n                <span>About</span>\n              </Menu.Item>\n            </Menu>\n          </Sider>\n          <Content>\n            <Row>\n              <Col\n                span={24}\n                style={{height: \"calc(100vh - 64px)\"}}>\n              <div\n                style={{ position: 'absolute', left: '30%', right: '15px', bottom: '30px'}}\n                ref={this.sliderRef}/>\n              <div\n                ref={this.mapViewRef}\n                style={{width: \"100%\", height: \"100%\"}}/>\n              <Drawer\n                // title={this.state.navKey}\n                closable={false}\n                // onClose={this.onClose}\n                placement=\"left\"\n                visible={this.state.navKey}\n                mask={false}\n                getContainer={false}\n                style={{ position: 'absolute', background: \"#f5f5f5\"}}\n                bodyStyle={{ padding: \"10px\", background: \"#f5f5f5\", height: \"100%\" }}\n              >\n                {panel}\n              </Drawer>\n            </Col>\n            </Row>\n          </Content>\n        </Layout>\n      </Layout>\n    );\n  }\n});\n\nexport default EventsApp;","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport { Card } from 'antd';\nimport HistMinMaxSlideFilter from '../components/HistMinMaxSlideFilter';\nimport SelectFilter from '../components/SelectFilter';\n\nconst LayerPanel = observer(class LayerPanel extends React.Component{\n\n  render(){\n\n    const FilterViews = this.props.store.filters.map(f => {\n      switch(f.type){\n        case 'minmax':\n          return <HistMinMaxSlideFilter store={f} key={f.field}/>\n        case 'multiselect':\n          return <SelectFilter store={f} key={f.field} mode=\"multiple\"/>\n        case 'select':\n          return <SelectFilter store={f} key={f.field}/>\n        default:\n          throw new Error(\"Unknown filter type!\");\n      }\n    })\n\n    return (\n      <>\n        <Card size=\"small\" style={{marginTop: \"10px\"}}>\n          <h1>Apply Filters</h1>\n          {FilterViews}\n        </Card>\n      </>\n    )\n  }\n\n});\n\nexport default LayerPanel;\n","import React from 'react';\nimport {loadModules} from 'esri-loader';\nimport { observer } from \"mobx-react\";\nimport options from '../config/esri-loader-options';\n\nconst HistogramComponent = observer(class HistogramComponent extends React.Component{\n\n  constructor(props, context){\n    super(props, context);\n    this.histRef = React.createRef();\n    this.store = props.store;\n  }\n\n  // onChange = (v) => {\n  //   this.setState({sliderValues: v});\n  // }\n\n  // onValuesChange = (newValues) => {\n  //   const [min, max] = newValues;\n  //   this.store.onValuesChange(min, max);\n  // }\n\n  createHistogram = () => {\n    if (\n      this.histogram\n      || !this.Histogram\n      || !this.histRef.current\n      || !this.store.loaded\n    ) return;\n\n    this.histogram = new this.Histogram({\n      bins: this.store.bins,\n      excludedBarColor: \"#bfbfbf\",\n      container: this.histRef.current,\n    });\n    //console.log(\"ORK\", this.store.bins)\n  }\n\n  componentDidMount(){\n    loadModules([\n      'esri/widgets/Histogram',\n    ], options)\n    .then(([Histogram]) => {\n      this.Histogram = Histogram;\n      this.createHistogram();\n    })\n    .catch(er => console.log(er));\n  }\n\n\n  render(){\n\n    if(!this.histogram && this.store.loaded) this.createHistogram();\n\n    const title = this.store.fieldInfo.alias;\n\n    return(\n      <>\n        <p>{title}</p>\n        <div style={{height: \"6rem\", width: \"10rem\"}}>\n          <div ref={this.histRef}></div>\n        </div>\n      </>\n    )\n  }\n});\n\nexport default HistogramComponent;","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport { Card } from 'antd';\nimport HistogramComponent from '../components/HistogramComponent';\nimport {MinMaxFilter} from \"../stores/Filters\"\nimport HistMinMaxSlideFilter from '../components/HistMinMaxSlideFilter';\n\nconst HistogramPanel = observer(class HistogramPanel extends React.Component{\n\n  render(){\n\n    const HistogramViews = this.props.store.histograms.map(f => {\n      \n      if(f instanceof MinMaxFilter) {      \n        return <HistMinMaxSlideFilter store={f} key={f.field}/>\n      } else {\n        return <HistogramComponent store={f} key={f.field}/>\n      }\n    })\n\n    return (\n      <>\n        <Card size=\"small\" style={{marginTop: \"10px\"}}>\n          <h1>Histograms</h1>\n          {HistogramViews}\n        </Card>\n      </>\n    )\n  }\n\n});\n\nexport default HistogramPanel;\n","import sign10Image from '../resources/images/SIGN_ICON_10.png'\nimport sign20Image from '../resources/images/SIGN_ICON_20.png'\nimport sign30Image from '../resources/images/SIGN_ICON_30.png'\nimport sign40Image from '../resources/images/SIGN_ICON_40.png'\nimport sign50Image from '../resources/images/SIGN_ICON_50.png'\nimport sign60Image from '../resources/images/SIGN_ICON_60.png'\nimport sign70Image from '../resources/images/SIGN_ICON_70.png'\nimport sign80Image from '../resources/images/SIGN_ICON_80.png'\nimport sign90Image from '../resources/images/SIGN_ICON_90.png'\nimport sign100Image from '../resources/images/SIGN_ICON_100.png'\nimport sign110Image from '../resources/images/SIGN_ICON_110.png'\nimport sign120Image from '../resources/images/SIGN_ICON_120.png'\nimport sign130Image from '../resources/images/SIGN_ICON_130.png'\nimport sign140Image from '../resources/images/SIGN_ICON_140.png'\n\n\n// update to map\n\nconst surveyConfig = {\n  layerItemId: '8560701bf1b44bccb3da5bb876e7f625',\n  initialRendererField: 'signs',\n  renderers: {\n    'signs': {\n      _type: \"jsapi\",\n      type: \"unique-value\",  // autocasts as new UniqueValueRenderer()\n      field: \"sign_type\",\n      defaultSymbol: {type: \"simple-marker\", color: \"blue\"},\n      visualVariables: [{\n        type: \"opacity\",\n        field: \"comparsion_to_prev_map\",\n        stops: [\n              {value: '2', opacity: 0.3},\n              {value: '1', opacity: 1},\n              {value: '0', opacity: 1}\n        ]\n      },\n      {\n        type: \"size\",\n        field: \"edge_length_or_diameter\",\n          minDataValue: 0.0,\n          maxDataValue: 2.0,\n          minSize: 0,\n          maxSize: 30\n      }],\n      uniqueValueInfos: [\n        {value: '0', symbol: {type: \"picture-marker\", url: sign10Image}},\n        {value: '1', symbol: {type: \"picture-marker\", url: sign20Image}},\n        {value: '2', symbol: {type: \"picture-marker\", url: sign30Image}},\n        {value: '3', symbol: {type: \"picture-marker\", url: sign40Image}},\n        {value: '4', symbol: {type: \"picture-marker\", url: sign50Image}},\n        {value: '5', symbol: {type: \"picture-marker\", url: sign60Image}},\n        {value: '6', symbol: {type: \"picture-marker\", url: sign70Image}},\n        {value: '7', symbol: {type: \"picture-marker\", url: sign80Image}},\n        {value: '8', symbol: {type: \"picture-marker\", url: sign90Image}},\n        {value: '9', symbol: {type: \"picture-marker\", url: sign100Image}},\n        {value: '10', symbol: {type: \"picture-marker\", url: sign110Image}},\n        {value: '11', symbol: {type: \"picture-marker\", url: sign120Image}},\n        {value: '12', symbol: {type: \"picture-marker\", url: sign130Image}},\n        {value: '13', symbol: {type: \"picture-marker\", url: sign140Image}},\n        {value: '28', symbol: {type: \"picture-marker\", url: sign10Image}},\n        {value: '29', symbol: {type: \"picture-marker\", url: sign20Image}},\n        {value: '30', symbol: {type: \"picture-marker\", url: sign30Image}},\n        {value: '31', symbol: {type: \"picture-marker\", url: sign40Image}},\n        {value: '32', symbol: {type: \"picture-marker\", url: sign50Image}},\n        {value: '33', symbol: {type: \"picture-marker\", url: sign60Image}},\n        {value: '34', symbol: {type: \"picture-marker\", url: sign70Image}},\n        {value: '35', symbol: {type: \"picture-marker\", url: sign80Image}},\n        {value: '36', symbol: {type: \"picture-marker\", url: sign90Image}},\n        {value: '37', symbol: {type: \"picture-marker\", url: sign100Image}},\n        {value: '38', symbol: {type: \"picture-marker\", url: sign110Image}},\n        {value: '39', symbol: {type: \"picture-marker\", url: sign120Image}},\n        {value: '40', symbol: {type: \"picture-marker\", url: sign130Image}},\n        {value: '41', symbol: {type: \"picture-marker\", url: sign140Image}}\n    ]\n  }\n  },\n  filters: [\n    {name: 'sign_type', type: 'multiselect', params: {}},\n    {name: 'comparsion_to_prev_map', type: 'multiselect', params: {}},\n    {name: 'landmark_type', type: 'multiselect', params: {}},\n    {name: 'map_version', type: 'select', params: {}},\n    \n  ],\n  histograms: [\n    {name: 'display_text', withFilter : true, params: {isLogarithmic: false, log: true, numBins: 14}},\n    {name: 'edge_length_or_diameter', withFilter : true, params: {isLogarithmic: false, log: true}},\n  ],\n  popupTemplate: {\n    title: \"{expression/title-expression}\",\n    content: \"Sign type: <b>{sign_type}{expression/speed-units}{expression/landmark_type}</b><br>\" +\n             \"Detected at {publish_date} (version {map_version})<br>\" +\n             \"{expression/size_marker}: {edge_length_or_diameter} m<br>\",\n    expressionInfos: [{\n          name: \"speed-units\",\n          title: \"Speed units\",\n          expression: \"When(($feature.sign_type >= 0 && $feature.sign_type <= 13) || ($feature.sign_type >= 28 && $feature.sign_type <= 41), ' KM/h speed limit', '')\"\n    } ,\n    {\n      name: \"size_marker\",\n      title: \"Size marker\",\n      expression: \"When ($feature.landmark_type == 1, 'Diameter', 'Edge size')\"\n    },\n    {\n      name: \"landmark_type\",\n      title: \"Landmark type\",\n      expression: \"When($feature.landmark_type == 2, ' (electronic)', '')\"\n    },\n    {\n      name: \"title-expression\",\n      title: \"Title Expression\",\n      expression: \"When($feature.edge_length_or_diameter == 2, '<b>Missing<\\b> Sign', $feature.edge_length_or_diameter == 1, '<b>New<\\b> Sign',  'Sign information')\"\n    }]\n  },\n  viewConfig: { \n    center: [11.432656,48.194704],\n    zoom: 12\n  }\n}\n\nexport default surveyConfig;","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport { Layout, Menu, Drawer, Icon, Row, Col } from 'antd';\nimport LayerFilterIcon from 'calcite-ui-icons-react/LayersIcon';\nimport GraphHistogramIcon from 'calcite-ui-icons-react/GraphHistogramIcon';\nimport BookmarkIcon from 'calcite-ui-icons-react/BookmarkIcon';\nimport InformationIcon from 'calcite-ui-icons-react/InformationIcon';\nimport {loadModules} from 'esri-loader';\nimport options from '../config/esri-loader-options';\nimport LayerPanel from './LayerPanel';\nimport HistogramPanel from './HistogramPanel';\nimport Store from '../stores/Store';\nimport surveyConfig from './SurveyConfig';\n\nconst { Header, Content, Sider } = Layout;\n\nconst MenuFilterIcon = () => (\n  <LayerFilterIcon size=\"18\" filled/>\n)\nconst MenuHistogramIcon = () => (\n  <GraphHistogramIcon size=\"18\" filled/>\n)\nconst MenuBookmarkIcon = () => (\n  <BookmarkIcon size=\"18\" filled/>\n)\nconst MenuInformationIcon = () => (\n  <InformationIcon size=\"17\" filled/>\n)\n\nconst SurveyApp = observer(class App extends React.Component {\n\n  state = {\n    collapsed: true,\n    loaded: false,\n    navKey: \"Layers\"\n  };\n\n  constructor(props, context){\n    super(props, context);\n    this.mapViewRef = React.createRef();\n    this.store = new Store(props.appState, surveyConfig);\n  }\n\n  onCollapse = collapsed => {\n    this.setState({ collapsed });\n  };\n\n  onSelect = item => {\n    const navKey = this.state.navKey === item.key\n      ? null\n      : item.key;\n    this.setState({navKey});\n  }\n\n  onClose = () => {\n    this.setState({\n      navKey: null,\n    });\n  };\n\n  componentDidMount = () => {\n\n    const modulePromise = loadModules([\n      'esri/widgets/Search',\n      //'esri/widgets/Legend'\n    ], options);\n    const loadPromise = this.store.load(this.mapViewRef.current);\n\n    Promise.all([modulePromise, loadPromise])\n      .then(([[Search, Legend], mapView]) => {\n        this.view = mapView;\n        const search = new Search({view: this.view});\n        this.view.ui.add(search, \"top-right\");\n        //const legend = new Legend({view: this.view});\n        //this.view.ui.add(legend, \"bottom-right\");\n        this.view.ui.move(\"zoom\", \"top-right\");\n      });\n  }\n\n  render() {\n    let panel;\n    switch(this.state.navKey){\n      case 'Layers':\n        panel = <LayerPanel store={this.store} map={this.map} layer={this.lyr} layerView={this.lyrView}/>;\n        break;\n      case 'Histograms':\n        panel = <HistogramPanel store={this.store} map={this.map} layer={this.lyr} layerView={this.lyrView}/>;\n        break;\n      case 'Bookmarks':\n        panel = <h1>Woah this are some awesome bookmarks!</h1>;\n        break;\n      case 'About':\n        panel = <h1>This is a slick app! Thanks Max!</h1>;\n        break;\n      default:\n        panel = null;\n    }\n\n    const signin = this.props.appState.displayName\n      ? (\n        <Menu\n          theme=\"dark\"\n          mode=\"horizontal\"\n          style={{ lineHeight: '64px', float: \"right\" }}\n        >\n          <Menu.Item key=\"sign in\">{this.props.appState.displayName}</Menu.Item>\n        </Menu>\n      )\n      : null;\n\n    return (\n      <Layout style={{ minHeight: '100vh' }}>\n        <Header style={{paddingLeft: \"1rem\", paddingRight: \"0rem\"}}>\n          <h1 style={{color: \"rgba(255,255,255,0.8\", float: \"left\"}}>Sign Survey</h1>\n          {signin}\n        </Header>\n        <Layout>\n          <Sider collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse}>\n            <Menu\n              defaultSelectedKeys={['0']}\n              mode=\"inline\"\n              theme=\"dark\"\n              selectedKeys={[this.state.navKey]}\n              onClick={this.onSelect}>\n              <Menu.Item key=\"Layers\">\n                <Icon component={MenuFilterIcon} />\n                <span>Layers</span>\n              </Menu.Item>\n              <Menu.Item key=\"Histograms\">\n                <Icon component={MenuHistogramIcon} />\n                <span>Histograms</span>\n              </Menu.Item>\n              <Menu.Item key=\"Bookmarks\">\n                <Icon component={MenuBookmarkIcon} />\n                <span>Bookmarks</span>\n              </Menu.Item>\n              <Menu.Item key=\"About\">\n                <Icon component={MenuInformationIcon} />\n                <span>About</span>\n              </Menu.Item>\n            </Menu>\n          </Sider>\n          <Content>\n            <Row>\n              <Col\n                span={24}\n                style={{height: \"calc(100vh - 64px)\"}}>\n              <div\n                ref={this.mapViewRef}\n                style={{width: \"100%\", height: \"100%\"}}/>\n              <Drawer\n                // title={this.state.navKey}\n                closable={false}\n                // onClose={this.onClose}\n                placement=\"left\"\n                visible={this.state.navKey}\n                mask={false}\n                getContainer={false}\n                style={{ position: 'absolute', background: \"#f5f5f5\", height: \"calc(100%-40px)\"}}\n                bodyStyle={{ padding: \"10px\", background: \"#f5f5f5\", height: \"100%\" }}\n              >\n                {panel}\n              </Drawer>\n            </Col>\n            </Row>\n          </Content>\n        </Layout>\n      </Layout>\n    );\n  }\n});\n\n\nexport default SurveyApp;","const config = {\n  appId: \"o3Zbi02dIsAez6sL\",\n  portalUrl: \"https://www.arcgis.com/sharing\"\n}\n\nexport default config;","import React from 'react'\nimport { observer } from \"mobx-react\";\nimport { HashRouter as Router, BrowserRouter, Route, Link, Redirect } from \"react-router-dom\";\nimport { Row, Col, Card, Layout, Button, Divider } from 'antd';\nimport AppState from './stores/AppState';\nimport MapImage from './resources/images/map.png';\nimport SafetyApp from './safety/SafetyApp';\nimport EventsApp from './events/EventsApp';\nimport SurveyApp from './survey/SurveyApp';\nimport {\n  UserSession\n} from \"@esri/arcgis-rest-auth\";\nimport config from './config/config';\nimport {loadScript} from 'esri-loader';\nimport options from './config/esri-loader-options';\n\nconst { Content } = Layout;\nconst { appId } = config;\n\n// TODO, see if faster way to accept callback without loading whole app\nconst OAuth = _ => {\n  UserSession.completeOAuth2({\n    clientId: appId,\n  });\n  return(\n    // <div/>\n    <h1>HELLO WORLD THIS IS MY PAGE FOR HANDLING OAUTH!!!!</h1>\n  )\n}\n\nconst PrivateRoute = observer(({Component, appState, ...rest}) => (\n  <Route\n    {...rest}\n    render={(props) => (\n      appState.isAuthenticated === true\n        ? <Component appState={appState} {...props}/>\n        : <Redirect to={{\n            pathname: '/',\n            state: {from: props.location}\n          }}/>\n    )}/>\n));\n\nconst Home = observer(class Home extends React.Component{\n  \n  componentDidMount(){\n    loadScript(options);\n  }\n\n  render(){\n    let appState = this.props.appState;\n\n    let topComponent = appState.isAuthenticated\n      ? <h1>Hello <b>{appState.displayName}</b>, welcome to our demos!</h1>\n      : <Button type=\"primary\" size=\"large\" onClick={appState.login}>Log in to get started</Button>;\n\n    const {from} = this.props.location.state || {from: null};\n    if(appState.redirectToReferrer && from){\n      return <Redirect to={from}/>\n    }\n\n    // Not good practice, should find a way to inject router Link into antd Button\n    const linkClass = \"ant-btn ant-btn-primary ant-btn-background-ghost ant-btn-block ant-btn ant-btn-lg\";\n\n    return(\n      <Layout style={{ minHeight: '100vh' }}>\n        <Content style={{ padding: '50px 50px'}}>\n          <Row type=\"flex\" justify=\"space-around\" align=\"middle\">\n            <Col style={{textAlign: 'center'}}>\n              {topComponent}\n            </Col>\n          </Row>\n          <Divider/>\n          <Row type=\"flex\" justify=\"space-around\" align=\"middle\">\n            <Col md={{span: 0}} xl={{span: 2}}/>\n            <Col md={{span: 6}} xl={{span: 4}}>\n              <Card\n              cover={<img alt=\"example\" src={MapImage} />}>\n                <Link\n                  to=\"/safety\"\n                  className={linkClass}\n                  disabled={!appState.isAuthenticated}>\n                  Explore Safety\n                </Link>\n              </Card>\n            </Col>\n            <Col md={{span: 6}} xl={{span: 4}}>\n              <Card\n              cover={<img alt=\"example\" src={MapImage}/>}>\n                <Link\n                  to=\"/events\"\n                  className={linkClass}\n                  disabled={!appState.isAuthenticated}>\n                  Explore Events\n                </Link>\n              </Card>\n            </Col>\n            <Col md={{span: 6}} xl={{span: 4}}>\n              <Card\n              cover={<img alt=\"example\" src={MapImage} />}>\n              <Link\n                to=\"/survey\"\n                className={linkClass}\n                disabled={!appState.isAuthenticated}>\n                Explore Survey\n              </Link>\n              </Card>\n            </Col>\n            <Col md={{span: 0}} xl={{span: 2}}/>\n          </Row>\n        </Content>\n      </Layout>\n    )\n  }\n});\n\n\nclass App extends React.Component{\n\n  constructor(props, context){\n    super(props, context);\n    const relativeRedirectUri = '';\n    this.appState = new AppState({...config, relativeRedirectUri});\n    console.log('v 0.0.0.4')\n  }\n\n  render(){\n    if(window.location.hash.includes(\"access_token=\")){\n      return (\n        <BrowserRouter>\n          <Route path=\"/\" component={OAuth} />\n        </BrowserRouter>\n      )\n    }\n    return(\n      <Router>\n        <Route\n          path=\"/\"\n          exact\n          render={props => <Home {...props} appState={this.appState}/>}/>\n        <PrivateRoute\n          path=\"/safety\"\n          appState={this.appState}\n          Component={SafetyApp}/>\n        <PrivateRoute\n          path=\"/events\"\n          appState={this.appState}\n          Component={EventsApp}/>\n        <PrivateRoute\n          path=\"/survey\"\n          appState={this.appState}\n          Component={SurveyApp}/>\n      </Router>\n    )\n  }\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n \nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/map.05f48ce5.png\";"],"sourceRoot":""}