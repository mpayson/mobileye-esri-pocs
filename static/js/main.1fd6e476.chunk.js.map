{"version":3,"sources":["resources/images/map.png","icons.js","resources/Basic_Web_White_Logo.png","resources/images/ET_BICYCLE.png","resources/images/ET_PED_ON_HW.png","stores/AppState.js","config/esri-loader-options.js","components/filters/MinMaxSlideFilter.js","components/filters/HistMinMaxSlideFilter.js","components/filters/SelectFilter.js","components/PanelCard.js","components/FilterPanel.js","safety/LayerPanel.js","safety/RoutePanel.js","stores/objects/Filter.js","utils/Utils.js","stores/objects/SelectFilter.js","stores/objects/MinMaxFilter.js","stores/objects/MultiSelectFilter.js","stores/objects/QuantileFilter.js","stores/Store.js","safety/SafetyStore.js","safety/SafetyConfig.js","components/BookmarkPanel.js","safety/SafetyTooltip.js","safety/SafetyApp.js","events/EventsConfig.js","events/LayerPanel.js","events/EventsApp.js","components/charts/BarChart.js","components/ChartPanel.js","components/LayerListPanel.js","survey/SurveyConfig.js","survey/SurveyApp.js","config/config.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","SESSION_ID","AppState","appConfig","redirectToReferrer","this","config","session","serializedSession","localStorage","getItem","parsed","JSON","parse","tokenExpires","Date","UserSession","removeItem","newSession","setItem","serialize","redirectUri","window","location","origin","pathname","relativeRedirectUri","beginOAuth2","clientId","appId","popup","then","_registerSession","catch","er","console","log","username","decorate","observable","displayName","computed","isAuthenticated","action","bound","login","logout","options","url","css","dojoConfig","has","MinMaxSlideFilter","observer","props","context","onChange","newValues","min","max","store","onValuesChange","loaded","range","defaultValue","disabled","values","lowerBound","upperBound","lowerMark","lowerBoundLabel","toString","upperMark","upperBoundLabel","marks","step","Math","round","value","tooltipVisible","React","Component","HistMinMaxSlideFilter","labelFunction","type","label","ceil","upperBoundSupplied","isLogarithmic","pow","logBase","floor","lowerBoundSupplied","sliderRef","createRef","loadModules","HistogramRangeSlider","precision","slider","bins","excludedBarColor","rangeType","container","current","labelFormatFunction","listener","watch","remove","style","height","width","ref","Option","ButtonGroup","Group","DropdownSelectFilter","mode","children","displayOptions","map","o","domainMap","get","key","marginBottom","placeholder","onSelect","onValueChange","selectValue","BtnMultiSelectFilter","_onButtonClick","e","id","target","onValueOptionChange","selectedSet","selectedOptionSet","padding","onClick","ghost","margin","SelectFilter","Error","Panel","PanelCard","title","icon","collapsible","defaultActive","open","header","marginLeft","size","marginTop","bordered","expandIconPosition","className","defaultActiveKey","undefined","activeKey","border","customPanelStyle","borderRadius","FilterPanel","state","activeKeys","onAccordionChange","keys","setState","onToggleClick","length","filters","f","field","filterViews","alias","isActive","color","infoText","content","placement","marginRight","filter","hasHistograms","getFilterView","activeFilterKeys","onFilterAccordionChange","panelOpen","onPanelChange","onFilterToggleAllClick","toggleButtonText","position","top","left","display","clearFilters","float","Text","radioStyle","lineHeight","LayerPanel","nonMainRenderer","filterActiveKeys","filterPanelOpen","_updateAccordionForRender","rendererField","includes","nextKeys","slice","push","onRadioChange","renderer","setRendererField","onSwitchChange","isChecked","onFilterAccordionClick","onFilterPanelChange","isOpen","radioOptions","aliasMap","rendererOptions","radioValue","isSwitchChecked","checked","strong","CreateIcon","filled","InputGroup","IndicatorTitle","text","abs","spanStyle","iconType","RoutePanel","alertFading","closeAlert","clearRouteData","afterCloseAlert","alert","startIcon","editMode","startGraphic","component","endIcon","endGraphic","safetyScoreDelta","message","description","onClose","afterClose","closable","safetyTimeDelta","compact","_","onCreateClick","isSketchLoaded","cursor","startStr","endStr","generateRoutes","stdTravelTime","fontWeight","fontSize","prefix","suffix","safetyTravelTime","Filter","fieldName","params","fieldInfo","info","isDynamic","dynamic","featureLayer","fields","find","name","setFieldInfoFromLayer","where","load","getDomainMap","domain","codedValues","reduce","p","cv","set","code","Map","getMinMaxWhere","isMin","isMax","results","features","attributes","sort","getFieldDomain","queryFeatures","returnDistinctValues","outFields","_setFromQueryResults","featureLayerView","v","fieldType","getSelectWhere","Set","clear","optionSet","MinMaxFilter","numBins","rawMin","rawMax","view","getHistogram","layer","minValue","maxValue","valueExpression","histRes","lwrUprPromise","isLwr","isUpr","Promise","resolve","queries","onStatisticField","outStatisticField","statisticType","getMinQuery","getMaxQuery","outStatistics","qRes","attrs","minMaxRes","_setBoundsFromQueryResult","_setHistogramBins","maxWhere","minWhere","MultiSelectFilter","option","s","wstr","join","getMultiSelectWhere","QuantileFilter","quantiles","q","labelMap","forEach","i","pUtils","Store","appState","storeConfig","credential","chartResultMap","layerVisibleMap","tooltipResults","bookmarkInfo","layerId","layerItemId","mapId","webmapId","charts","renderers","Object","initialRendererField","popupTemplate","layerLoaded","viewConfig","hasCustomTooltip","bookmarkInfos","effectHandler","rendererHandler","_tooltipListener","lyr","c","queryDefinition","storedResult","resultTransform","whenLayerView","lV","destroy","lyrView","loadFilters","loadCharts","layers","l","visible","on","_onMouseMove","error","onApplyFilter","debounce","layerView","autorun","_type","rendererJsonUtils","fromJSON","evt","classRef","event","hitTest","hit","_tooltipHighlight","r","graphic","screenPoint","highlight","handleEvt","isVisible","mapViewDiv","loading","WebMap","MapView","FeatureLayer","promiseUtils","esriId","registerToken","toCredential","_buildAutoRunEffects","center","zoom","portalItem","when","basemap","_loadLayers","index","bookmarks","bookmark","goTo","extent","items","reverse","user","shallow","toggleLayerVisibility","onBookmarkClick","onClearBookmark","scoreStatQuery","outStatisticFieldName","SafetyStore","stdRoute","stdTravelScore","scoreRoute","safetyTravelScore","SketchVM","SpatialReference","sketchVM","graphics","sketchListener","onCreateComplete","routeResultLyr","geometryType","spatialReference","WebMercator","objectIdField","source","add","setAddressFromGeocode","stopType","Locator","locationToAddress","geometry","locationType","res","address","cancel","create","RouteTask","RouteParameters","FeatureSet","routeTask","routeParams","stops","outSpatialReference","impedanceAttribute","accumulateAttributes","solve","data","routeResults","route","symbol","pQuery","spatialRelationship","orderByFields","returnGeometry","pModules","all","qres","geometryEngine","polygonBarriers","scorepolys","geodesicBuffer","Name","BarrierType","Attr_Miles","generateStdRoute","generateScoreRoute","onStartClick","onEndClick","getRenderer","labels","visualVariables","safetyConfig","classBreakInfos","BookmarkPanelItem","b","PureComponent","BookmarkPanel","bookmarkViews","getQuantileLabel","SafetyTooltip","x","y","isSubsetFields","overflow","zIndex","pointerEvents","aM","infoContent","defaultBool","hasOwnProperty","percent","status","showInfo","Header","Content","Sider","MenuFilterIcon","MenuBookmarkIcon","MenuRouteFromIcon","SafetyApp","collapsed","navKey","onCollapse","item","onSignOutClick","componentDidMount","modulePromise","loadPromise","mapViewRef","Search","Legend","mapView","search","ui","legend","layerInfos","actions","removeAll","move","panel","bookmarkCard","signin","Item","tooltip","bottom","minHeight","src","MobileyeLogo","alt","defaultSelectedKeys","theme","selectedKeys","paddingLeft","paddingRight","background","span","mask","getContainer","bodyStyle","eventsConfig","uniqueValueInfos","pedImage","bicycleImage","eventFilter","eventOptions","MenuInformationIcon","EventsApp","TimeSlider","timeSlider","loop","fullTimeExtent","timeInfo","right","MyBarChart","xField","yField","chartData","queryResults","transformQueryToRechartSeries","layout","tick","dataKey","fill","chartViews","chart","BarChart","getChartView","ListLayer","onToggle","visibleMap","defaultChecked","layerListViews","surveyConfig","defaultSymbol","opacity","groupByFieldsForStatistics","result","newFeatures","fieldValue","system_type_group_label","system_type_label","expressionInfos","expression","MenuHistogramIcon","SurveyApp","ChartPanel","portalUrl","OAuth","completeOAuth2","PrivateRoute","rest","isAuth","render","to","from","Home","loadScript","topComponent","linkClass","justify","align","textAlign","md","xl","cover","MapImage","App","hash","path","exact","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1fd6e476.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/map.05f48ce5.png\";","// export {\n//   default as DownOutline\n// } from \"@ant-design/icons/lib/outline/DownOutline\";\n\nimport RightOutline from \"@ant-design/icons/lib/outline/RightOutline\";\nimport LeftOutline from \"@ant-design/icons/lib/outline/LeftOutline\";\nimport UpOutline from \"@ant-design/icons/lib/outline/UpOutline\";\nimport DownOutline from \"@ant-design/icons/lib/outline/DownOutline\";\nimport CloseOutline from \"@ant-design/icons/lib/outline/CloseOutline\";\nimport CheckOutline from \"@ant-design/icons/lib/outline/CheckOutline\";\nimport ArrowUpOutline from \"@ant-design/icons/lib/outline/ArrowUpOutline\";\nimport ArrowDownOutline from \"@ant-design/icons/lib/outline/ArrowDownOutline\";\nimport MinusOutline from \"@ant-design/icons/lib/outline/MinusOutline\";\nimport LoadingOutline from \"@ant-design/icons/lib/outline/LoadingOutline\";\nimport CloseCircleFill from \"@ant-design/icons/lib/fill/CloseCircleFill\";\nimport LogoutOutline from \"@ant-design/icons/lib/outline/LogoutOutline\";\nimport InfoCircleOutline from \"@ant-design/icons/lib/outline/InfoCircleOutline\";\nimport EyeOutline from \"@ant-design/icons/lib/outline/EyeOutline\";\n\nexport {\n  RightOutline,\n  LeftOutline,\n  CloseOutline,\n  CheckOutline,\n  UpOutline,\n  DownOutline,\n  ArrowUpOutline,\n  ArrowDownOutline,\n  MinusOutline,\n  LoadingOutline,\n  CloseCircleFill,\n  LogoutOutline,\n  InfoCircleOutline,\n  EyeOutline\n}","module.exports = __webpack_public_path__ + \"static/media/Basic_Web_White_Logo.cf14d591.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4wcDCgcd3UHPugAAGvBJREFUeNrtnXmUVdWd7z+/fW8VBRSjYAATFVEMzhiMAlUg5hkjmVqjtGlNnm3yqqWKirFf0nlvvU53pdMOa70kRqEKYj993ab7JWpctm3HIRhLasAJhzjh0CAOOFBMCgVF3br7+/7Yl0Goe86tW6Pp81mrRKhzz93D7+z927/pQEJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCwh8DNtgN+GOn7kXclu2M7vKMlaN9xRw2Y2iw27WXRAD6gStbGZHyTAM7FTgVOAYoB3YKnsV0e0MFrw52OyERgD6jpoXDBTPM24kYM4CjgU8BnwTGAimgC3gPeADpR/XzeHuw250e7AZ8HKlaAy5DSSrDUTI3w9B0xLEGx2AcAxwBDO/mo+nc776Cs+dASwe7L4kA9IDq1aTN2yTbbbOEjsOYbmgGMB04DHAF3MaAsYiLEEsHew1OtoACqV3FMDk7XnAJcB4wg+6f8kIQsKlDOu6WeewYzH4lK0CByGyK4BtALTCsl7czYHipmAo8N5j9KmTJ+k/PVY/hZJwI/Cm9n/y9pCwoi4PKH9UKULUSlyoh5VKkyAm3INP2Lpk7FxV/X3nKzJgi8ak+bG7KzGYwyCaBIScAV7RgZVCKSBt7J9IMM4dw4e9ygBk4sfffcPKMwCgHRoJGAh7svQmf4I3Fzdq+vJJMMW3yXTgZFu7XZ6um0xAQgCGjBNY1QlvaDcuisc40AzHVYBxQDlaOWTliNDAKNAooNygXjArXMJruJ2czcJfQTd6xdsXcno94nbC2VluI+D/ApJjLu3I/HijJ/XRHVsaLbe/oVIDerFC9YSitACngWymoRXZc7u/70aHzVuBMTgC+4bDhHl0FbO9pw+oMVbdoLcbtJrsq4tKMiWdlWmnGG5L9CXB+nmudiem5fmb7eWzzMmSUwLa0+xnox8CnOXjye88IwcyU57xib9BQwXrET4SuAT7Y9wuxBezXhi43p2OsVHPqK/lfXY47gNcjbmlA2eGTmXb45D7vb8EMiRWguoXzkC4gLPn9RZnJHRZW5qJ5xzzXmlhBSlMRma4uey2VpgMjw/6lH4KQtAEdQFm+GyqcBF5nkFaBISEA5m0Rxjj6VyfZ5Z1/vzc3aKjE197HLoapgxSbALZsVifokD18xRxU00wbQQjynh7MMwN4EIpTUHvLkBAAHCeiPjtfd8du4KUstPT2RksXAuEp74y7VrJNZtpEhABgLrfl9WplKpqhIQDq1z1wE3A/xj9kwolgwMhN/qaYzs9gEHWxoSEA2KugE8h/ZOoJO4D1wMu5n7XAC3Jad+ucgd1nJW0ysxgB4Lh0imF1L7Kz7sSBNwoMDQGQ7sY4BxjRyzs9C/xaZs8beg/0nhdblleyZzC65UVbymiLuWyMz2rS1q1sJyiRA8qQEACTHpHZ3QRb+/ii74O9KXhE8q8d8CiNXNzMyMHol0QKsQujEyjNc5nzcBxiHf9ZBWDZfDYvadEKydqBc4BjCRa+DLAV2Eg4Th1JhEIlNB34tsO2DnafgL1nmtPjLhM2HeNh0O6BbuKQEACAZRU8V9Oqn8vb0wanEFaCTuBdjPWIMrCvg6IcMp/O/XysMJgurGQw/AJDRgAA6ueyEfQr4FdXryYN6Iac4lbT7E4DvjLYbewXQmRRXyjARXz1x4ArWrDhuNlI1wBnD3Z7+oH3TMwp260NPzlvYJeBIeMLiKJUNhrpFIOZg92WfuITiHGdJQPvExjyAlDbinPYTOBCwZjBbk8/Yd5paqakX62h3dJvOkDVGkjtwVkuiMOEQwZmIbRCXhJyIksKD/hlFYfeR+IwQ/OABQM9OAOJGccb9nhNE1lMyPBmeBw+U4K/eVb/fG9/KoEpgi/+WEJmzERC4MZwwnl3B7ANWAe8BrxDNx4xyeYBX+vntg4+sgvBpoA2ATsJTqTXgf/I/X+/WDH7VAmsbeIY7zgH7BzEHEISREETZ7BJZo8iPYLpAZdmvTo5WmY/AK7oj85/TOgCNmKsBj3sPA8vncf6vrp5rwWg9j6G+XIuwGwRcBZhn07nfnqiYyjX2QzQjvEUwgOnAVNiunELcB1oQA1ArhTnO+0W0EL6xo+RD8/+ULMPBI+adKfbyd1LF/bOzF2UAFStwVyG4a6LCw1bDEwjxOSVFXvPgxDs61gJ0RFCW+RZILF2+dkaMFNqTYsrA36A9H2CD2OgjtQiWEU/BNYhNfg0d2dL2X3zrJ4fIXt8CqhpoqxkF2elu+xWw64BZgGfIOztfTUIRhCmMmLCw8x0E2h9NjNwk1/dwijh/xypGhjZh/0udGyGE8Z8FmbXOm+/THdQsbil55lKBTf84juwwye5I8y4VGgRcBzBXj9YeGCdS+sc4J2lswcmoqKmmdHAQoLwHzOI/T+QduBVzH4tz/9re89vvHNRYatBQQpabROl3uwU0BUKUa5HMfhWxA7gpsPOYiMDZESvbqUcMR/Z9xk6kw9hFToNaawZR0+cZLdUNeq5mxfEh5nFbgFVTQzzZrMN/hJYRMh7H+zJJ7TBBsxwsriZEXibjexqgmI61DBgKnCxGd8rSVlFbWP+YNS9RK4ANa0Mx1slUCU4l6Do9ZQMIUJ2K2GpyhD29REEj99EirNIloIua1vt3upI86/Id/aXWNa2Msx7mwVUA5VFtrcQBLyd+3Mc4cnu6XdNAL6EUerTVlLTqub6ueR1M+cdssXNlDisEqghpEP3JKhiK8HAsy7XofeBrZK1m+UEwDQCMZ7g4z+aYDA6FuKl9iCe8tjfAI3LK32f+9NrmyjxZjNz43AxxaeEF4IEyywYf0YTFL1PErabo+nZA9hOiDau96g5X1pctwJQtQYr3W2zBN8Bvkrhyt5G4AXgGeApTC948dbyStrzfeDq1Yzs7OJ4zC4FvkmQ4J7ysMTfgtY0zKOj6OE/iO89iOsYbifJ+AvgUor3RWQIpWG2AicT/VRfgfSbiVl2bnWM9cZUmZ1EcISdBpwAHF7g9+4A7gFunNilp+oWHKordbsFlOxxRwl9E/gChU3+TkKe+0OIe016adl8dhXSwhvm0H5lIy+nUgzDivaGnWPGu4hrl6zi1WXzex9aVdeItaVsGqEmwMUUN/kimHH/AKwiTMjfRd5LHGkwum7BPlP5NtDTNav4V5mdjvFFg3kEQYpbjUYR5nDrlpRrA//GwRccIok1qyjH87XcBwt5Gt8D7jXTD5zp+vp5WlPo5O9rRMrOxPgyoZhSsSzC7E9wNrHuxV5qA4LNJW4KxmUYf0rQU3pKhhCdfDvor90OXY/xKMabkZ8yjpTZIQ9d/Xw+bJinR8xUh+mHhOU9LuAUwhyeL/hadQvlB//yIwJQtQbDOAt0EcG6F4UH3gW7JZ2hpqyd1qUV9HgPrm5hlDm+mxvk3kxcCVCNcebWD3u3T//FajdeYcn/MyiqJkAn8BLGjaBr6it5YulCssjaERtiPnskWN69vr6C9sxuHspmVIX4Z0LeQdwx+FiZLjY4s67xo2P8kS0gvYcxmF0BnET0ZHjgfWE/aaj0PytmkC++Y9//nof4HNHLWSb3U0r0yeUIia9ns2yobeQPSxf03D5Q3cwIPIsIW+CxRXStC3hB4rquLv37zQv26ySGbwdeV7ScHwkajcg7Azefi68TbaDvbWpx2wzVEH2aMuAkZFdsT2kNByS37vtAdSNmnguBz8KhS8UBCGgT9tNiJx9gzHhszHhGGPYjojV/Aa+B/VawgXhp/wre5tDNMhpHdQtp4EuGFgMnFtEtAa9I/Kgrq3sPnHwAiXZFZwyD8UkZo897KVpK6gzqDN9Q6X9sZsuALTFjUw58tsu4oGrN/nsfKDHDwb5JOJZFsU1m/9JQUfzkA5QOo7R0GJcjTiDa3t+BeCRl/iqDOoitqlVm2Jfl7OQimjXPsP9JULCKYTvwQ+e08uYFh3rplGYXZhsi7yBGmDh82ubCj90T5vprDX7DgWnr3XOUwhzve+D2CYBLs4hw3oxya+4Cmka0+x/2pt7t1atxaWOKyf6ugMtbMN15UwXvmukBM/113Adk+pzQZ6sbCx/E6hZmmeznhJD0YnQRL/Q3Qk3L8uhCh89mtxlvQayudKRLFZ4qX2f4XabvE5Jfo+5dAhxbuouL9/6DA6gTTuEcHqftrvWmawvoQCSdWTcuK/eXWGwW0CaM3w8Tj+b+vlVyD4LdH/O5Eoy5Ll3YMl7TwnEmqweOp0grn2G/cbj7CWf9fAjPLovbBuAI+R7XStiF13WEfMgoJsrssroQqhf+s7mF0wnlSqJs6xsN+y3wh96ELi9ZRZlJp4AuJf5JWyl03+hsWE6XVSDn9KaZfkbcViA+K1lsumVtI5OQ/YKw7JdSHO2gFaCNDZX5v7HOQLIOydbFtP0IcGN70oBbKxDwFNgDwLsRlw4Dprc1BX9GTtrdFwlmxnwTIuBlTHcur4jPi4/sW8omybGE+DP/yxgrgVfrDggHdSntAV4Euyfy08ZkjBNqWrov6vTdRuy7jYxS2hoIim9PTdAH9upXQi+ZFBudY6YOM/1H9DUcYaa48TmE+vnsAd1OWAXyCaIBY2RuIYBDmNC5RGfmvm/wmJleK36QoLqFsUJn5459UU9/F3CfPKsaKj6qTN14FsKzzaRfEp1MmQamWzdu28sbsQ5no7vS9vc5J1dvInq6gF8abFs6r4CV0dSBKXIFEEyRMa5OxbRJLyMeJ7ouwQgzfR7A1TzGFMJ5N0r5Ww+0Lp1bfPzZ5Y04ZNNM9l+JN6s+gfi9z2pjt2OY1R7EswZrYu4zTbKPGLTqBOVlNjblqBV8nXA8Kt4AZTxt2Eumwkq8SHQoZAJHUQ5MaHu851nN9SEVvgUiA0dLgOnfWcVkZ1lOJzqsqQtY51J6uuhBAkammWTweeCMmEuDA8PsqRV5AhqWLkA4dgC/i7nXpzCOrFqzX7FrW+3GK2tfB75NcSbeg/k3GTsLevqBTmOPN3sLi3RaOcQkyxRXNEvoaYInNl8ouQEjvXG6E3Ya0efwbcC68WMKsjt3S20jpchOJThV4qR6FcYjmeE+5vuUAT0Uc69yYFJqd3CjVrcwTtJCpMWEqKbeY3oIKzwe8R/m4g0+RGyMuXSyQgn6HrMry/uEFWBbxGUpYael2V+sMB/vCl6vO7H4mDul3FGYvkC8gUXADsTM9G6bWt2c/0IPhhhtFlm+1QGnGHZZdTObTUwhJJmcVECz23Pjkk85FLAja6ylJ0kbBtZMBniVaH/LJLDDiol2+8cF+Jpm1hNOA/kceilgepqgJEWdfdtAcdKal+oWRkqaAyyksBjEuRQaclXYzj3TQlBFJ2H1KcS58x4hKGMS+f0BHli/Yg4fFjEsnQQBOD/imsnFCkBAb0NkfSIHHJMOXxQpANutF9W1TDadsPcX4lgxcqboPozuGkXPope3W9jX30AsjGh3liAkRaDcChDZy08YOqxqDVZMvL9gs0Wbhh3GFEf0+R+gXS7WxtwtVzZSApzJxyenfxfwIMYvJNtAtIdSFFmKxkSnKfatYWMFE0o6iswYFh8SAnXyNgMY5YivzJWRijP+mDGasMVMKebzA0wn0IrxM0vrOfant+VDxDtfuiVVSsbSrCfajpECxpuKC5KRYw/x1UfLHeFMGOn7T/viMlPTjmEE0+OQeVFivj5ivOjhbzNezy49iy4XtsXonciKiz+88Sy8z9oWQkZ0FKlskWFyJVmyRJcfNSDtCNquIu+VKs5G3mVsJShUg1Knr0AEvC10Faanb54XVjuF0m6Rxzv53tQ1tC6wxogL9gDvlzmK2mYUHrySyEuMdkfYJ6IEYBgqrqPLK+nA7EnY580biuz2pm8Lnlj+UbPzHqLrAZtZL6qbO78H539B/mX6ccmevGFOcZ5Xb4wgLtBG7HQEDT9KAMaZL95i5j70jWDXYvYIQ2sr8MBGLy3E03jQ5IP3O4h2e6cMxcVN5qV+Ll31c3nU0KWIt9hvSxCyZsmu2ZX1Dxd7fzMmEl1+XzLa0gSTYVRUzmEyN7kX1ayzwCrzegHTDBnHm3rjeTuwlzjJrid6qXsG8aCZDiwV3+Xh7ZTZY15sppul3qBN0ZY0Jzie4LApym2T4x6f5dFUSqd5mGKO9Rgv4q3bdhWKzE1GirIkZk22Lo3ZOqRsxCBOdmhqsQ0J5dV95jur2ORhm4wnrW9Sq1LmOUkWa1x6xhm/0EcDNQR0pZ06llZ0vyrJsRlFvl7GAROrm5gGrG8o8glZVkln1Uq9k0qxmXDqyJhTpr5Cvct2lqYSffrywLq00HMWbco8XDDtqscov/GsyHNlJDfNxxP21T5RCJc0UyZjFtGaegfiHef09o0VPXuaSsWmzuBSjarzm3KOSuBNCnh/QD5uPhcPfZfRVNXEKIKZOWrrziL9wXmvx4leakqBYzJdRQdK9hOWBot7B9A7GG/1dPIBxnTRSZjY96KuE/ZVYcVGEvULpcYpxMd3ZpzT485neRN4g2ghONZkFUNFhatuocSbZihE8kSxXqaiCirVLUAmbYDYRI5KQ1Nrm4dIFTMBWAXRpvcMsCHteNvlwpebiNZ4JwNnLm7l6MHuX+ikjUJ2CTFaLvCqiaKjmBQcNnEm2/GSu8DLlRdyz/7myham5h6MqPcbdgCrbphDZ04Z072QP4OXYFQ4xckWXnzH4BaHqG6lFONYgwtjLt0ErHVd0Ut4FN54G3iJkHSRH9MloGk1Tf1aKSyWi+/AHPZFQmh7lA9hJ+i3kNPGPTxJOA5GKTKfAr48cdLgvfD48kYMb4eb+DOIXY2eA15cuqB4pXN5JR3Ai4SU9yg+DSySbMIBKW8DzsTJnGDwJYL7Ox+dwDrzPAk5AVheyTbgPqLPvWXAaWb2jdqmwanZOyLtxhh8Drgk5tLdhFp6cTHysZhpLbCa6NOLYVxiRsXESUVVUek1NS2MMewbwKlEWwC3Ce5bNj8ccfefx6W7CQpPlDJ4OHCRNzu/5vGiY+iLYkkTww3NAr5FqJwRxSsGT0zIFr/872XCODaa8Rjxvv8jMb5lxsya5j4ydBVIVQi5WwhcFDM2GeB1M9299x/2CUB9JS8DDxO93zngKMFf0Wmzq1YOjOZbE878pxKKNVTEXN4B3IfphboisoMPpu5EvKQXgPuJt2GcS3gKT6xtGZjK31UrSaedzUb8FSGYJkpH2wL8vr5if/bQ/hXAkJduI+x3UbpAicGJiOvTpTazupGS6iifVi9ZEgbyZLD/RsjXj1NCXwBWdpbxVl+1we1gA54HUGzalQMuA7tcMGNJPwpBVRNUNVFSUmozzbgeI+61e53A8zLddnCD97F8Hi9Ldg/xadilGGeY4xZzdgppRla39HHh6fuwmiY3EtlnwGoIT3/citMO/CPS8zfP6rvCkUsX4uX0PMZtEFv9ZBhQJdkS4NSaJob3tWJY24KVOkamzE41x60YZxCd1iZgg2H/1lDx0WPtITZ5n/K3sb+eTRQp4GQc/47xBZON+06zpa5e3ScdTPkRNgr4quCnhOJRcUcsH9LFbGX9vJhjWxE0VLIpJKXa/cTb/UuBKyS7DuPc8RNs5OLm3vs/rl4NtS2WkmwccL6DexUinOOCRnYYPGLytx38i0MatWIuHwg1UPh7dieZ7A6T3QDMoG+qZk9XmmsJSaBnUViM6AbndcPwXT4u66ZoXIl/DdP/JpS+i8OAc8BWpNP8mPhjayGUADOE/Vyy24k29uxFQJNM9UvnHRrBnHdga5pZCPY/CIURC8PYiewupP8r6amG+T1wHglb0sLpCtXHv0zhpdAAtpvT1zBWL5vTd06V7qhtZrjgbGG307No47eBu/C6rX4ez/SkvkL1KsrN7DOY/XmuflNPUsaakK6vn0e3KfVRAlAi3CJD/53CX9YkwlGjA3gFaMX0uIkXTLyxdF7YVuoaYY+jdGeaI+Q5Rbj5hs5WyNYZSVhCC9Up9iBdgXGvpdi5bE7/eixqmzFvjBJ81WS3UPiK53NjswN4BbNHkH9MKV5q/4C3du0gs/cV9LVNjJJxlIyTkJ1JyJU4nnC+j4vhPJCnMfsp3t9ZP68HhSL3dbbJjfKOC5G+S8/r42YIBpm9LuAMQRPdjZFClBOUulJC+PXw3N97okx2KqR53WXwYX2B+Xm9pboVQ4wxcQnYjfSsrsDeh2Q34UHZG3vYnvtzeO5+JbAvqHY4Pd9anwW7IQV331Tp8+pzkVr1YVm/Y3OJu4esdUqqBWb3oAEl3TRagM9NU29ekeYxtgjVSdwFfNgwQJMP0DAX1TTzAfBrmZzJfkxwTBUivEaY4FI+miXtc+MTH40cz2rDllqKB8bv8ZHKfOwX1Qk2t7qxkuYS3t3zFQb3BU4ZwcsG18npdw1z+17j7wnVrRyG7HwLhpjjKb7KSF/QRSgNe6thqydU+O11MTNcsKTVNFEOnIzZRYQiinHm2P5gq+B3gn8yr9aG+bFH1QHhylZGp2ThARH/hd5VPC2W94B/keku4LmGikjv7j56tNTUNlEq+JTMPkdwx55D/74saS+7CF65e4Q90GH+uVsrCivIMFDUPkZJtsudZujziAsIdQYHwieQAR4yuFumh2W81TC38PC0Hu81tfdhGsEIUpwh7ByCd+4z0C9mz12EgIwm4GGhJxoqIwsgDTrVrUwyb7MJL7qcB0ynf0rM7wGeAh5CergkzZNjx7C7LrYs1kcpWtm4cnVILkx3ubNlqiDk/p9AME70Zh/0hOXsNUKV7cec6fHDMrzeF86dgaBqDS69i6PM2WzgTMQpBEGYRO8iojtzY/MS8DxmLYZ/BNixrMiAvT6x31/ZSrnLMtOcnYGYQfBKTSIUJxhDeALydbyDcDbenOvcRoy1iKfxenbT+7xf6AuQhhpVa3Cle5gob6cKZlmwlB6RG5vxubHJt014wlHxgwPG5k2MtfJ60qd4ZsXc4qO099Ln4V1LVjEWx3FgMxTMn1MIpU72nvNT7D8LZxBbZLwP9rqhV5z0cirL1p8v6H3N/6HEFS2khsG4FDZD2AykIxGTc8Uy9xbBdoQQ/S7C5G8B3jHYAFqL57W9gRx9Rb/H9118BzZ6AmUlaUY5o0wwzAnvjfayFO03zBkamvxgUbWSkakyRpljhDwpgz1edGS62PHhZjo+rqtfQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkLCwPL/AeYghSXk5dLSAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTA3LTAzVDA4OjA3OjI5KzAyOjAwco9ghwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wNy0wM1QwODowNzoyOSswMjowMAPS2DsAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","import {decorate, observable, action, computed} from 'mobx';\nimport {\n  UserSession\n} from \"@esri/arcgis-rest-auth\";\n\nconst SESSION_ID = '__MOBILEYE_ESRI_POCS__';\n\nclass AppState {\n\n  redirectToReferrer = false;\n\n  constructor(appConfig){\n    this.config = appConfig;\n    this.session = null;\n    \n    const serializedSession = localStorage.getItem(SESSION_ID);\n    if(serializedSession !== null && serializedSession !== \"undefined\"){\n      let parsed = JSON.parse(serializedSession);\n      parsed.tokenExpires = new Date(parsed.tokenExpires);\n      if(parsed.tokenExpires > new Date()){\n        this.session = new UserSession(parsed);\n      } else {\n        localStorage.removeItem(SESSION_ID);\n      }\n    }\n  }\n\n  _registerSession(newSession){\n    this.session = newSession;\n    this.redirectToReferrer = true;\n    localStorage.setItem(SESSION_ID, this.session.serialize());\n  }\n\n  login(){\n    // let session\n    const redirectUri = `${window.location.origin}${window.location.pathname}${this.config.relativeRedirectUri}`\n    UserSession.beginOAuth2({\n      clientId: this.config.appId,\n      redirectUri,\n      popup: true\n    })\n    .then(this._registerSession)\n    // .then(newSession => {\n    //   session = newSession;\n    //   return session.getUser();\n    // })\n    // .then(res => {\n    //   this._registerSession(session);\n    //   console.log(res);\n    // })\n    .catch(er => console.log(er));\n  }\n\n  get displayName(){\n    // for now just show user name\n    if(this.session) return this.session.username;\n    return null;\n  }\n\n  get isAuthenticated(){\n    return !!this.session;\n  }\n\n  logout(){\n    localStorage.removeItem(SESSION_ID);\n    this.redirectToReferrer = false; // DO NOT REDIRECT TO REFERRER ON LOGOUT\n    this.session = null;\n  }\n\n}\n\ndecorate(AppState, {\n  session: observable,\n  redirectToReferrer: observable,\n  displayName: computed,\n  isAuthenticated: computed,\n  _registerSession: action.bound,\n  login: action.bound,\n  logout: action.bound\n})\n\nexport default AppState;","const options = {\n  url: \"https://js.arcgis.com/4.13/\",\n  // url: \"https://js.arcgis.com/4.12/\",\n  // css: \"/jscss/my-theme/main.css\",\n  // css: true,\n  css: \"https://js.arcgis.com/4.13/esri/themes/light/main.css\",\n  dojoConfig: {\n    has: {\n      \"esri-native-promise\": true\n    }\n  }\n}\n\nexport default options;","import React from 'react';\nimport { Slider } from 'antd';\nimport { observer } from \"mobx-react\";\n\nconst MinMaxSlideFilter = observer(class MinMaxSlideFilter extends React.Component{\n  \n  constructor(props, context){\n    super(props, context);\n    this.store = props.store;\n  }\n\n  onChange = (newValues) => {\n    const [min, max] = newValues;\n    this.store.onValuesChange(min, max);\n  }\n  \n  render(){\n\n    if(!this.store.loaded){\n      return <Slider\n        range\n        min={0}\n        max={100}\n        defaultValue={[0, 100]}\n        disabled={true}\n      />\n    }\n\n    const min = this.store.min || this.store.min === 0\n      ? this.store.min\n      : this.store.lowerBound;\n    const max = this.store.max || this.store.max === 0\n      ? this.store.max\n      : this.store.upperBound;\n    const values = [min, max];\n\n    // should marks live in the store?\n    const lowerMark = this.props.lowerBoundLabel\n      ? this.props.lowerBoundLabel\n      : this.store.lowerBound.toString();\n\n    const upperMark = this.props.upperBoundLabel\n      ? this.props.upperBoundLabel\n      : this.store.upperBound.toString();\n\n    const marks = {\n      [this.store.lowerBound]: lowerMark,\n      [this.store.upperBound]: upperMark\n    }\n\n    // 100 step values to 2 point precision (eg Math.round(trueStep * 100) / 100)\n    const step = Math.round(this.store.upperBound - this.store.lowerBound) / 100;\n\n    return(\n      <Slider\n        range\n        min={this.store.lowerBound}\n        max={this.store.upperBound}\n        marks={marks}\n        defaultValue={[this.store.lowerBound, this.store.upperBound]}\n        value={values}\n        onChange={this.onChange}\n        disabled={!this.store.loaded}\n        step={step}\n        tooltipVisible={false}\n      />\n    )\n  }\n})\n\nexport default MinMaxSlideFilter;\n\n","import React from 'react';\nimport {loadModules} from 'esri-loader';\nimport { observer } from \"mobx-react\";\nimport options from '../../config/esri-loader-options';\n\nconst HistMinMaxSlideFilter = observer(class HistMinMaxSlideFilter extends React.Component{\n\n  constructor(props, context){\n    super(props, context);\n    this.sliderRef = React.createRef();\n    this.store = props.store;\n  }\n\n  onValuesChange = (newValues) => {\n    const [min, max] = newValues;\n    this.store.onValuesChange(min, max);\n  }\n\n  labelFunction = (value, type) => {\n    let label = ''\n    if (type === \"max\")\n      label = Math.ceil((!this.store.upperBoundSupplied && this.store.isLogarithmic) ? Math.pow(this.store.logBase,this.store.upperBound ) : this.store.upperBound);\n    if (type === \"min\") {\n      label = 0\n      if (this.store.lowerBound !== 0)\n        label = Math.floor((!this.store.lowerBoundSupplied && this.store.isLogarithmic) ? Math.pow(this.store.logBase, this.store.lowerBound) : this.store.lowerBound);\n    }\n    return label;\n  }\n\n  componentDidMount(){\n    loadModules([\n      'esri/widgets/HistogramRangeSlider',\n    ], options)\n    .then(([HistogramRangeSlider]) => {\n      const precision = this.store.isLogarithmic ? 4 : 1;\n      this.slider = new HistogramRangeSlider({\n        bins: this.store.bins,\n        min: this.store.lowerBound,\n        max: this.store.upperBound,\n        values: [\n          this.store.min || this.store.lowerBound,\n          this.store.max || this.store.upperBound\n        ],\n        excludedBarColor: \"#bfbfbf\",\n        rangeType: \"between\",\n        container: this.sliderRef.current,\n        precision\n      });\n      this.slider.labelFormatFunction = this.labelFunction;\n\n      this.listener = this.slider.watch(\"values\", this.onValuesChange);\n    })\n    .catch(er => console.log(er));\n  }\n\n  componentWillUnmount(){\n    if(this.listener) this.listener.remove();\n  }\n\n  render(){\n\n    // needed to register these as observable with mobx\n    const min = this.store.min || this.store.min === 0\n      ? this.store.min\n      : this.store.lowerBound;\n    const max = this.store.max || this.store.max === 0\n      ? this.store.max\n      : this.store.upperBound;\n\n    if(this.slider && this.store.loaded){\n      this.slider.bins = this.store.bins;\n      this.slider.min = this.store.lowerBound;\n      this.slider.max = this.store.upperBound;\n      this.slider.values = [min, max];\n    }\n\n    return(\n      <div style={{height: \"6rem\", width: \"100%\"}}>\n        <div ref={this.sliderRef}></div>\n      </div>\n    )\n  }\n});\n\nexport default HistMinMaxSlideFilter;","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport { Select, Button } from 'antd';\nconst { Option } = Select;\nconst ButtonGroup = Button.Group;\n\nconst DropdownSelectFilter = observer(({store, mode}) => {\n  const children = store.displayOptions.map(o => {\n    let label = o;\n    if (store.domainMap.has(o)) {\n        label = store.domainMap.get(o);\n    }\n    return <Option key={o}>{label}</Option>\n  })\n  return (\n    <div style={{marginBottom: \"1rem\"}}>\n      <Select\n        mode={mode}\n        style={{ width: '100%' }}\n        placeholder=\"Please select\"\n        onSelect={mode === \"multiple\" ? null : store.onValueChange}\n        onChange={mode === \"multiple\" ? store.onValueChange : null}\n        value={store.selectValue}\n      >\n        {children}\n      </Select>\n    </div>\n  )\n})\n\nconst BtnMultiSelectFilter = observer(class BtnMultiSelectFilter extends React.Component{\n\n  _onButtonClick = (e) => {\n    const id = e.target.id;\n    this.props.store.onValueOptionChange(id);\n  }\n\n  render(){\n    const selectedSet = this.props.store.selectedOptionSet;\n    const domainMap = this.props.store.domainMap;\n    const children = this.props.store.displayOptions.map(o => {\n      let label = o;\n      if (domainMap.has(o)) {\n          label = domainMap.get(o);\n      }\n      return (\n        <Button\n          id={o}\n          style={{padding: \"0px 10px\"}}\n          onClick={this._onButtonClick}\n          // size=\"small\"\n          key={o}\n          type={selectedSet.has(o) ? 'primary' : 'dashed'}\n          ghost={selectedSet.has(o) ? true : false}>\n          {label}\n        </Button>\n      )\n    });\n\n    return (\n      <div style={{marginBottom: \"1rem\", margin: \"auto\"}}>\n        <ButtonGroup>\n          {children}\n        </ButtonGroup>\n      </div>\n    )\n  }\n\n});\n\n\nconst SelectFilter = observer( ({store, mode, style}) => {\n  if(style !== 'buttons') return <DropdownSelectFilter store={store} mode={mode}/>;\n  if(mode !== 'multiple') throw new Error('Button selects only support multiple for now');\n  return <BtnMultiSelectFilter store={store}/>\n})\n\nexport default SelectFilter;","import React from 'react';\nimport { Collapse, Card } from 'antd';\nimport './PanelCard.css';\nconst { Panel } = Collapse;\n\nconst PanelCard = ({title, icon, collapsible, defaultActive, children, open, onChange}) => {\n\n  const header = icon\n    ? <h1 style={{padding: \"0px\"}}>{icon}<span style={{marginLeft: \"10px\"}}>{title}</span></h1>\n    : <h1 style={{padding: \"0px\"}}>{title}</h1>;\n\n  if(!collapsible){\n    return (\n      <Card size=\"small\" style={{marginTop: \"10px\"}}>\n        {header}\n        {children}\n      </Card>\n    )\n  }\n\n  const defaultActiveKeys = defaultActive\n    ? ['panel-card']\n    : [];\n\n  let props = {\n    bordered: false,\n    expandIconPosition: 'right',\n    className: 'no-padding',\n    defaultActiveKey: defaultActiveKeys\n  }\n  if(open !== undefined && onChange){\n    props.activeKey = open ? ['panel-card'] : [];\n    props.onChange = onChange\n  }\n\n  return(\n    <Card size=\"small\" style={{marginTop: \"10px\"}}>\n      <Collapse\n        {...props}>\n        <Panel\n          header={header}\n          style={{border: 0}}\n          className=\"no-padding\"\n          key=\"panel-card\">\n          {children}\n        </Panel>\n      </Collapse>\n\n    </Card>\n  )\n}\n\nexport default PanelCard;","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport MinMaxSlideFilter from './filters/MinMaxSlideFilter';\nimport HistMinMaxSlideFilter from './filters/HistMinMaxSlideFilter';\nimport SelectFilter from './filters/SelectFilter';\nimport LayerFilterIcon from 'calcite-ui-icons-react/LayerFilterIcon';\nimport PanelCard from './PanelCard';\nimport { Collapse, Button, Icon, Popover } from 'antd';\nimport './FilterPanel.css';\nconst { Panel } = Collapse;\n\nconst getFilterView = (filter) => {\n  const f = filter;\n  switch(filter.type){\n    case 'minmax':\n      return f.hasHistograms\n        ? <HistMinMaxSlideFilter store={f} key={f.field}/>\n        : <MinMaxSlideFilter store={f} key={f.field} lowerBoundLabel={f.lowerBoundLabel} upperBoundLabel={f.upperBoundLabel}/>\n    case 'multiselect':\n      return <SelectFilter store={f} key={f.field} mode=\"multiple\" style={f.style}/>\n    case 'select':\n      return <SelectFilter store={f} key={f.field} style={f.style}/>\n    case 'quantile':\n      return <SelectFilter store={f} key={f.field} mode=\"multiple\" style={f.style}/>\n    default:\n      throw new Error(\"Unknown filter type!\");\n  }\n}\n\nconst customPanelStyle = {\n  borderRadius: 4,\n  border: 0\n};\n\nconst FilterPanel = observer(class FilterPanel extends React.Component{\n\n  state = {\n    activeKeys: []\n  }\n\n  onAccordionChange = (keys) => {\n    this.setState({\n      activeKeys: keys\n    })\n  }\n\n  onToggleClick = () => {\n    if(this.state.activeKeys.length > 0){\n      this.setState({\n        activeKeys: []\n      });\n    } else {\n      const keys = this.props.store.filters.map(f => f.field);\n      this.setState({\n        activeKeys: keys\n      })\n    }\n  }\n\n  render(){\n    const filters = this.props.store.filters;\n    const filterViews = filters.map(f => {\n      const alias = f.isActive\n        ? <span style={{color: '#00abbc'}}><b>{f.alias}</b></span>\n        : f.alias;\n      let header = f.infoText\n        ? <>\n            <Popover content={f.infoText} placement=\"topLeft\">\n              <Icon\n                type=\"info-circle\"\n                style={{marginRight: \"3px\", color: f.isActive ? '#00abbc' : undefined}}/>\n            </Popover>\n            {alias}\n          </>\n        : alias;\n      return (\n        <Panel header={header} key={f.field} style={customPanelStyle} className='minimal-padding'>\n          {getFilterView(f)}\n        </Panel>\n      )\n    });\n\n    const defaultActive = this.props.defaultActive || false;\n\n    const activeKeys = this.props.activeFilterKeys || this.state.activeKeys;\n    const onAccordionChange = this.props.onFilterAccordionChange || this.onAccordionChange;\n\n    const panelOpen = this.props.panelOpen === undefined ? undefined : this.props.panelOpen;\n    const onPanelChange = this.props.onPanelChange ? this.props.onPanelChange : undefined;\n    const onToggleClick = this.props.onFilterToggleAllClick ? this.props.onFilterToggleAllClick : this.onToggleClick;\n\n    const toggleButtonText = activeKeys.length > 0\n    ? 'Close all'\n    : 'Open all';\n\n    return (\n      <PanelCard\n        title=\"Filter\"\n        icon={<LayerFilterIcon size=\"20\" style={{position: \"relative\", top: \"3px\", left: \"0px\"}}/>}\n        collapsible={true}\n        open={panelOpen}\n        onChange={onPanelChange}\n        defaultActive={defaultActive}>\n        <div style={{display: \"inline-block\", width: \"100%\", padding: \"0px 15px 10px 5px\"}}>\n          <Button type=\"danger\" size=\"small\" ghost  onClick={this.props.store.clearFilters}>Clear</Button>\n          <Button size=\"small\" onClick={onToggleClick} style={{float: \"right\"}}>{toggleButtonText}</Button>\n        </div>\n          <Collapse\n            activeKey={activeKeys}\n            bordered={false}\n            expandIconPosition='right'\n            onChange={onAccordionChange}>\n            {filterViews}\n          </Collapse>\n      </PanelCard>\n\n    )\n  }\n  \n});\n\nexport default FilterPanel;","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport {\n  Switch,\n  Radio,\n  Typography } from 'antd';\nimport FilterPanel from '../components/FilterPanel';\nimport PanelCard from '../components/PanelCard';\nimport LayerIcon from 'calcite-ui-icons-react/LayerIcon';\n\nconst { Text } = Typography;\n\nconst radioStyle = {\n  display: 'block',\n  height: '30px',\n  lineHeight: '30px',\n};\n\nconst LayerPanel = observer(class LayerPanel extends React.Component{\n\n  nonMainRenderer = 'harsh_acc_ratio';\n\n  state = {\n    filterActiveKeys: [],\n    filterPanelOpen: false\n  }\n\n  _updateAccordionForRender = (rendererField) => {\n    if(this.state.filterActiveKeys.includes(rendererField)) return;\n    const nextKeys = this.state.filterActiveKeys.slice();\n    nextKeys.push(rendererField);\n    this.setState({\n      filterActiveKeys: nextKeys,\n      filterPanelOpen: true\n    })\n  }\n\n  onRadioChange = (e) => {\n    let renderer = e.target.value;\n    this.nonMainRenderer = renderer;\n    this.props.store.setRendererField(renderer);\n    this._updateAccordionForRender(renderer);\n  }\n\n  onSwitchChange = (isChecked) => {\n    if(isChecked){\n      this.props.store.setRendererField('eventvalue');\n      this._updateAccordionForRender('eventvalue');\n    } else {\n      this.props.store.setRendererField(this.nonMainRenderer);\n      this._updateAccordionForRender(this.nonMainRenderer);\n    }\n  }\n\n  onFilterAccordionClick = (keys) => {\n    this.setState({\n      filterActiveKeys: keys\n    });\n  }\n\n  onFilterToggleAllClick = () => {\n    if(this.state.filterActiveKeys.length > 0){\n      this.setState({\n        filterActiveKeys: []\n      });\n    } else {\n      const keys = this.props.store.filters.map(f => f.field);\n      this.setState({\n        filterActiveKeys: keys\n      })\n    }\n  }\n\n  onFilterPanelChange = () => {\n    const isOpen = !this.state.filterPanelOpen;\n    this.setState({\n      filterPanelOpen: isOpen\n    })\n  }\n\n  render(){\n\n    let radioOptions;\n    if(this.props.store.aliasMap){\n      radioOptions = this.props.store.rendererOptions\n        .filter(o => o !== 'eventvalue')\n        .map(o => \n          <Radio value={o} key={o} style={radioStyle}>{this.props.store.aliasMap.get(o)}</Radio>\n        )\n    }\n\n    let radioValue = this.props.store.rendererField === 'eventvalue'\n      ? this.nonMainRenderer\n      : this.props.store.rendererField;\n\n    const isSwitchChecked = this.props.store.rendererField === 'eventvalue';\n\n    return (\n      <>\n        <PanelCard\n          icon={<LayerIcon size=\"20\" style={{position: \"relative\", top: \"4px\", left: \"0px\"}}/>}\n          title=\"Layer Selection\"\n          collapsible={true}\n          defaultActive={true}>\n          <div>\n            <Switch\n              onChange={this.onSwitchChange}\n              checked={isSwitchChecked}\n              style={{float: \"left\", marginTop: \"1px\"}}/>\n            <h3 style={{display: \"inline-block\", margin: \"0px 0px 2px 10px\"}}>Road Risk Score</h3>\n          </div>\n          <p style={{margin: \"10px 0px 5px 0px\"}}><Text strong> Toggle Road Risk Score off to explore individual data layers of the overall score</Text></p>\n          <Radio.Group\n            disabled={isSwitchChecked}\n            onChange={this.onRadioChange}\n            value={radioValue}>\n            {radioOptions}\n          </Radio.Group>\n        </PanelCard>\n        <FilterPanel\n          store={this.props.store}\n          panelOpen={this.state.filterPanelOpen}\n          onPanelChange={this.onFilterPanelChange}\n          activeFilterKeys={this.state.filterActiveKeys}\n          onFilterAccordionChange={this.onFilterAccordionClick}\n          onFilterToggleAllClick={this.onFilterToggleAllClick}/>\n      </>\n    )\n  }\n\n});\n\nexport default LayerPanel;\n","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport {\n  Input,\n  Button,\n  Icon,\n  Statistic,\n  Card,\n  Divider,\n  Alert\n} from 'antd';\nimport PinIcon from 'calcite-ui-icons-react/PinPlusIcon';\n\nconst CreateIcon = () => (\n  <PinIcon filled size=\"17\"/>\n)\n\nconst InputGroup = Input.Group;\n\n\nconst IndicatorTitle = ({title, value}) => {\n  const text = value || value === 0\n    ? ` ${Math.round(Math.abs(value))}%`\n    : ' - - %';\n  let spanStyle = {float: 'right'};\n  let iconType = 'arrow-down';\n  if(value && value >= 0){\n    spanStyle.color = '#f5222d';\n    iconType = 'arrow-up';\n  } else if (value && value < 0){\n    spanStyle.color = '#52c41a';\n    iconType = 'arrow-down';\n  }\n  return (\n    <div>\n      {title}\n      <span style={spanStyle}>\n        <Icon type={iconType}/>\n        <b>{text}</b>\n      </span>\n    </div>\n  )\n}\n\nconst RoutePanel = observer(class RoutePanel extends React.Component{\n\n  alertFading = false;\n\n  componentWillUnmount(){\n    this.props.store.clearRouteData();\n  }\n\n  closeAlert = () => {\n    this.alertFading = true;\n    this.props.store.clearRouteData();\n  }\n\n  afterCloseAlert = () => {\n    this.alertFading = false;\n  }\n\n\n\n  render(){\n    const store = this.props.store;\n\n    const startIcon = store.editMode === 'start' || store.startGraphic\n      ? <Icon type='close'/>\n      : <Icon component={CreateIcon} />;\n    \n    const endIcon = store.editMode === 'end' || store.endGraphic\n      ? <Icon type='close'/>\n      : <Icon component={CreateIcon} />\n\n    let alert;\n    if ( (store.safetyScoreDelta && store.safetyScoreDelta > 0) || this.alertFading){\n      alert = (\n        <Alert\n        style={{marginBottom: \"10px\"}}\n        message=\"Invalid Results\"\n        description=\"For a POC, we only consider high scoring roads, which can cause poor results in areas with many low scoring roads. Close this alert to reset\"\n        type=\"error\"\n        onClose={this.closeAlert}\n        afterClose={this.afterCloseAlert}\n        closable/>\n      )\n    } else if((store.safetyTimeDelta && store.safetyTimeDelta > 25) || this.alertFading){\n      alert = (\n        <Alert\n        style={{marginBottom: \"10px\"}}\n        message=\"Unrealistic Results\"\n        description=\"Time difference is too high.\"\n        type=\"warning\"\n        onClose={this.closeAlert}\n        afterClose={this.afterCloseAlert}\n        closable/>\n      )\n    } \n\n    console.log(store.safetyTimeDelta && store.safetyTimeDelta < 5);\n\n    return(\n      <>\n        <p>Route Start</p>\n        <InputGroup compact style={{marginBottom: \"15px\"}}>\n          <Button\n            style={{padding: \"0px 10px\"}}\n            onClick={_ => store.onCreateClick('start')}\n            disabled={!store.isSketchLoaded}>\n            {startIcon}\n          </Button>\n          <Input\n            disabled\n            style={{width: 'calc(100% - 40px)', cursor: 'default'}}\n            value={store.startStr}>\n          </Input>\n        </InputGroup>\n        <p>Route End</p>\n        <InputGroup compact style={{marginBottom: \"30px\"}}>\n          <Button\n            style={{padding: \"0px 10px\"}}\n            onClick={_ => store.onCreateClick('end')}\n            disabled={!store.isSketchLoaded}>\n            {endIcon}\n          </Button>\n          <Input\n            disabled\n            style={{width: 'calc(100% - 40px)', cursor: 'default'}}\n            value={store.endStr}>\n          </Input>\n        </InputGroup>\n        <Button\n          size=\"large\"\n          style={{width: \"65%\", marginRight: \"5px\"}}\n          disabled={!(store.startGraphic && store.endGraphic)}\n          type=\"primary\"\n          onClick={store.generateRoutes}>\n          Generate routes\n        </Button>\n        <Button\n          type=\"danger\"\n          size=\"large\"\n          disabled={!(store.startGraphic || store.endGraphic || store.stdTravelTime)}\n          ghost\n          onClick={store.clearRouteData}>\n            Clear\n        </Button>\n        <Divider/>\n        {alert}\n        <Card\n          size=\"small\"\n          style={{marginBottom: '15px'}}>\n          <span style={{color: \"rgba(0, 0, 0, 0.85)\", fontWeight: \"500\", fontSize: \"14px\"}}>\n            <IndicatorTitle title=\"Travel Risk Score Change\" value={store.safetyScoreDelta}/>\n          </span>\n          {/* <Statistic\n            title=\"Without accounting for risk\"\n            value={store.stdTravelScore ? store.stdTravelScore : ' - - '}\n            precision={2}\n            prefix={<Icon type=\"minus\" style={{color: 'rgb(94, 43, 255)'}}/>}\n          />\n          <Statistic\n            title=\"Accounting for risk\"\n            value={store.safetyTravelScore ? store.safetyTravelScore : ' - - '}\n            precision={2}\n            prefix={<Icon type=\"minus\" style={{color: \"rgb(227, 69, 143)\"}}/>}\n          /> */}\n        </Card>\n        <Card\n          title={<IndicatorTitle title=\"Travel Time Change\" value={store.safetyTimeDelta}/>}\n          size=\"small\">\n          <Statistic\n            title=\"Without accounting for risk\"\n            value={store.stdTravelTime ? store.stdTravelTime : ' - - '}\n            precision={0}\n            prefix={<Icon type=\"minus\" style={{color: 'rgb(94, 43, 255)'}}/>}\n            suffix=\"min\"\n          />\n          <Statistic\n            title=\"Accounting for risk\"\n            value={store.safetyTravelTime ? store.safetyTravelTime : ' - - '}\n            precision={0}\n            prefix={<Icon type=\"minus\" style={{color: \"rgb(227, 69, 143)\"}}/>}\n            suffix=\"min\"\n          />\n        </Card>\n\n      </>\n    ) \n  }\n});\n\nexport default RoutePanel;","import { decorate, observable, computed, action } from 'mobx';\n\nclass Filter {\n  constructor(fieldName, params = null){\n    this.field = fieldName;\n    this.fieldInfo = {};\n    this.infoText = params && params.info ? params.info : null;\n    this.isDynamic = params && params.dynamic ? params.dynamic : false;\n    // this.caption = (params !== null && \"caption\" in params) ? params.caption : null;\n  }\n\n  setFieldInfoFromLayer(featureLayer){\n    this.fieldInfo = featureLayer.fields.find(f => f.name === this.field);\n  }\n\n  load(featureLayer){\n    if(!featureLayer.loaded){\n      throw new Error(\"Please wait until the layer is loaded\");\n    }\n    this.setFieldInfoFromLayer(featureLayer);\n  }\n  get alias(){\n    // if (this.caption !== null) return this.caption;\n    if(this.fieldInfo) return this.fieldInfo.alias;\n    return null;\n  }\n\n  get where(){\n    return null;\n  }\n  \n  get isActive(){\n    return !!this.where;\n  }\n\n}\n\ndecorate(Filter, {\n  fieldInfo: observable,\n  alias: computed,\n  where: computed,\n  isActive: computed,\n  load: action.bound,\n  setFieldInfoFromLayer: action.bound\n})\n\nexport default Filter;","const getDomainMap = (domain) => {\n  if(!domain) return new Map();\n  return domain.codedValues.reduce((p, cv) => {\n    p.set(cv.code, cv.name);\n    return p;\n  }, new Map());\n}\n\nconst transformQueryToRechartSeries = (queryResults, xField, yField) => {\n  if(!queryResults || queryResults.features.length < 1) return [];\n  return queryResults.features.map(f => ({\n    [xField]: f.attributes[xField],\n    [yField]: f.attributes[yField]\n  }));\n}\n\nconst getMinMaxWhere = (field, min, max) => {\n  const isMin = min || min === 0;\n  const isMax = max || max === 0;\n  let where = null;\n  if(isMin && isMax){\n    where = field + \" <= \" + max + \" AND \" + field + \" >= \" + min;\n  } else if(isMax){\n    where = field + \" <= \" + max;\n  } else if(isMin){\n    where = field + \" >= \" + min;\n  }\n  return where;\n}\n\nconst getMultiSelectWhere = (field, values, fieldType) => {\n  if(!values || values.length < 1) return null;\n  let where = null;\n  if(fieldType === 'string') {\n    const wstr = values.join(\"','\");\n    where = `${field} IN ('${wstr}')`;\n  } else {\n    const wstr = values.join(\",\");\n    where =  `${field} IN (${wstr})`;\n  }\n  return where;\n}\n\nconst getSelectWhere = (field, value, fieldType) => {\n  if(!value) return null;\n  let where = null;\n  where = (fieldType === 'string')\n    ? `${field} = '${value}'` :\n    `${field} = ${value}`;\n  return where\n}\n\nconst getMaxQuery = (field) => ({\n  onStatisticField: field,\n  outStatisticField: `MAX_${field}`,\n  statisticType: 'max'\n})\n\nconst getMinQuery = (field) => ({\n  onStatisticField: field,\n  outStatisticField: `MIN_${field}`,\n  statisticType: 'min'\n})\n\nexport {\n  getMinMaxWhere,\n  getMultiSelectWhere,\n  getSelectWhere,\n  getMaxQuery,\n  getMinQuery,\n  getDomainMap,\n  transformQueryToRechartSeries\n};","import Filter from './Filter';\nimport { decorate, observable, action, computed } from 'mobx';\nimport { getSelectWhere, getDomainMap } from '../../utils/Utils';\n\nclass SelectFilter extends Filter{\n  type = 'select';\n  loaded = false;\n  options = [];\n  selectValue = null;\n  domainMap = new Map();\n\n  constructor(fieldName, params=null){\n    super(fieldName, params);\n    this.style = params && params.style ? params.style : 'dropdown';\n  }\n  _setFromQueryResults(results){\n    this.options = results.features.map(f => \n      f.attributes[this.field]\n    ).sort();\n    this.loaded = true;\n  }\n\n  load(featureLayer){\n    super.load(featureLayer);\n    const domain = featureLayer.getFieldDomain(this.field);\n    if(domain){\n      this.domainMap = getDomainMap(domain);\n    }\n    featureLayer.queryFeatures({\n      where: \"1=1\",\n      returnDistinctValues: true,\n      outFields: [this.field]\n    }).then(this._setFromQueryResults);\n  }\n\n  // execute client-side query based on what's currently available\n  refresh(featureLayer, featureLayerView, where=\"1=1\"){\n    super.load(featureLayer);\n    const domain = featureLayer.getFieldDomain(this.field);\n    if(domain){\n      this.domainMap = getDomainMap(domain);\n    }\n    featureLayerView.queryFeatures({\n      where,\n      returnDistinctValues: true,\n      outFields: [this.field]\n    }).then(this._setFromQueryResults);\n  }\n\n  onValueChange(v){\n    if(this.selectValue === v){\n      this.selectValue = null;\n    } else {\n      this.selectValue = v;\n    }\n  }\n\n  clear(){\n    this.selectValue = null;\n  }\n\n  get where(){\n    return getSelectWhere(this.field, this.selectValue, this.fieldInfo.type);\n  }\n\n  get optionSet(){\n    return new Set(this.options);\n  }\n\n  get displayOptions(){\n    return this.options.slice().sort();\n  }\n\n}\n\ndecorate(SelectFilter, {\n  options: observable,\n  loaded: observable,\n  selectValue: observable,\n  load: action.bound,\n  where: computed,\n  onValueChange: action.bound,\n  clear: action.bound,\n  _setFromQueryResults: action.bound,\n  optionSet: computed,\n  displayOptions: computed\n})\n\nexport default SelectFilter;","import Filter from './Filter';\nimport { decorate, observable, action, computed } from 'mobx';\nimport {loadModules} from 'esri-loader';\nimport options from '../../config/esri-loader-options';\nimport {getMinQuery, getMaxQuery, getMinMaxWhere } from '../../utils/Utils';\n\nclass MinMaxFilter extends Filter{\n\n  type = 'minmax';\n  bins = [];\n  loaded = false;\n  min = null;\n  max = null;\n\n  constructor(fieldName, params){\n    super(fieldName, params);\n    this.lowerBound = params.lowerBound || null;\n    this.upperBound = params.upperBound || null;\n    this.upperBoundSupplied = this.upperBound !== null;\n    this.lowerBoundSupplied = this.lowerBound !== null;\n    this.logBase = 10;\n    this.isLogarithmic = params.isLogarithmic || false;\n    this.numBins = (typeof params.numBins === 'undefined') ? 50 : params.numBins;\n    this.hasHistograms = params.hasHistograms || false;\n    this.upperBoundLabel = params.upperBoundLabel || null;\n    this.lowerBoundLabel = params.lowerBoundLabel || null;\n  }\n\n  _setBoundsFromQueryResult([rawMin, rawMax]){\n    this.lowerBound = Math.floor(rawMin);\n    this.upperBound = Math.ceil(rawMax);\n    if (this.isLogarithmic){\n      if (!this.lowerBoundSupplied && this.lowerBound !== 0)\n        this.lowerBound = Math.floor((Math.log(this.lowerBound) / Math.log(this.logBase)) * 100) / 100;\n      if (!this.upperBoundSupplied && this.upperBound !== 0)\n        this.upperBound = Math.ceil((Math.log(this.upperBound) / Math.log(this.logBase)) * 100) / 100;\n    }\n    return [this.lowerBound, this.upperBound];\n  }\n\n  _setHistogramBins(featureLayer, view){\n    return loadModules([\n      'esri/renderers/smartMapping/statistics/histogram'\n    ], options)\n    .then(([getHistogram]) => \n      getHistogram({\n        layer: featureLayer,\n        field: this.field,\n        numBins: this.numBins,\n        minValue: this.lowerBound,\n        maxValue: this.upperBound,\n        valueExpression: this.isLogarithmic ? `IIf($feature.${this.field} != 0,Log($feature.${this.field}) / Log(${this.logBase}),0)` : `$feature.${this.field}`,\n        view\n      })\n    ).then(histRes => {\n      this.bins = histRes.bins;\n    })\n  };\n\n  load(featureLayer, view){\n    super.load(featureLayer);\n    const field = this.field;\n\n    const isLwr = this.lowerBound || this.lowerBound === 0;\n    const isUpr = this.upperBound || this.upperBound === 0;\n\n    let lwrUprPromise;\n    if(isLwr && isUpr){\n      lwrUprPromise = Promise.resolve([this.lowerBound, this.upperBound]);\n    } else {\n      let queries = [];\n      if(!isLwr) queries.push(getMinQuery(field));\n      if(!isUpr) queries.push(getMaxQuery(field));\n      lwrUprPromise = featureLayer.queryFeatures({\n        where: \"1=1\",\n        outStatistics: queries\n      }).then(qRes => {\n        const attrs = qRes.features[0].attributes;\n        return [\n          isLwr ? this.lowerBound : attrs[`MIN_${field}`],\n          isUpr ? this.upperBound : attrs[`MAX_${field}`]\n        ]\n      })\n    }\n\n    lwrUprPromise.then(minMaxRes => {\n      this._setBoundsFromQueryResult(minMaxRes);\n      if(this.hasHistograms) {\n        return this._setHistogramBins(featureLayer, view)\n      }\n      return Promise.resolve();\n    })\n    .then(_ => this.loaded = true);\n\n  }\n\n  onValuesChange(min, max){\n    this.min = min;\n    this.max = max;\n  }\n\n  clear(){\n    this.min = this.lowerBound;\n    this.max = this.upperBound;\n  }\n\n  get where(){\n    let where;\n    if(this.min <= this.lowerBound && this.max >= this.upperBound){\n      where = null;\n    } else {\n      let maxWhere = (!this.upperBoundSupplied && this.isLogarithmic) ? Math.pow(this.logBase, this.max) : this.max;\n      let minWhere = (!this.lowerBoundSupplied && this.isLogarithmic) ? Math.pow(this.logBase, this.min) : this.min;\n      where = getMinMaxWhere(this.field, minWhere, maxWhere);\n    }\n    return where;\n  }\n}\ndecorate(MinMaxFilter, {\n  min: observable,\n  max: observable,\n  loaded: observable,\n  fieldInfo: observable,\n  where: computed,\n  load: action.bound,\n  onValuesChange: action.bound,\n  clear: action.bound\n})\n\nexport default MinMaxFilter;","import SelectFilter from './SelectFilter';\nimport { decorate, action, computed } from 'mobx';\nimport {getMultiSelectWhere} from '../../utils/Utils';\n\nclass MultiSelectFilter extends SelectFilter{\n  \n  type = 'multiselect';\n  selectValue = [];\n\n  // Used for directly setting the selected value array\n  onValueChange(v){\n    this.selectValue = v;\n    console.log(v);\n  }\n\n  // Used for setting whether an individual option is selected\n  onValueOptionChange(option){\n    if(!option) return;\n    if(this.selectedOptionSet.has(option)){\n      this.selectValue = this.selectValue.slice().filter(s => s !== option);\n    } else {\n      this.selectValue.push(option);\n    }\n  }\n\n  clear(){\n    this.selectValue = [];\n  }\n  \n  get where(){\n    return getMultiSelectWhere(this.field, this.selectValue, this.fieldInfo.type);\n  }\n\n  get selectedOptionSet(){\n    return new Set(this.selectValue);\n  }\n\n};\n\ndecorate(MultiSelectFilter, {\n  onValueChange: action.bound,\n  clear: action.bound,\n  where: computed,\n  selectedOptionSet: computed\n})\n\nexport default MultiSelectFilter;","import MultiSelectFilter from './MultiSelectFilter';\nimport { getMinMaxWhere } from '../../utils/Utils';\nimport { decorate, action, computed, observable } from 'mobx';\n\nclass QuantileFilter extends MultiSelectFilter{\n  type = 'quantile';\n  options = [];\n  \n  constructor(fieldName, params=null){\n    super(fieldName, params);\n    this.quantiles = params.quantiles;\n    if(!this.quantiles){\n      throw new Error(\"Please provide quantile breaks\")\n    }\n  }\n\n  load(featureLayer){\n    // we're not doing anything because these are hardcoded for now!\n    super.setFieldInfoFromLayer(featureLayer);\n    this.loaded = true;\n    this.options = this.quantiles.map(q => q.label);\n    this.selectValue = this.options.slice();\n    this.labelMap = new Map();\n    this.quantiles.forEach(q => this.labelMap.set(q.label, q));\n  }\n\n  clear(){\n    this.selectValue = this.options.slice();\n  }\n\n  get where(){\n    if(this.options.length === this.selectValue.length) return null;\n    let min, max;\n    for(let i = 0; i < this.selectValue.length; i++){\n      const label = this.selectValue[i];\n      const q = this.labelMap.get(label);\n      min = (q.min !== undefined && (min === undefined || q.min < min))\n        ? q.min\n        : min;\n      max = (q.max !== undefined && (max === undefined || q.max > max))\n        ? q.max\n        : max;\n    }\n    console.log(min, max);\n    return getMinMaxWhere(this.field, min, max);\n  }\n\n  get displayOptions(){\n    return this.options.slice();\n  }\n\n}\n\ndecorate(QuantileFilter, {\n  options: observable,\n  load: action.bound,\n  where: computed,\n  displayOptions: computed,\n  clear: action.bound\n})\n\nexport default QuantileFilter;","import {decorate, observable, action, computed, autorun} from 'mobx';\nimport {\n  MinMaxFilter,\n  MultiSelectFilter,\n  SelectFilter,\n  QuantileFilter\n} from './Filters';\nimport {loadModules} from 'esri-loader';\nimport options from '../config/esri-loader-options';\nimport { message } from 'antd';\n\nlet pUtils;\n// can we keep this at the top? I find it intrusive in the middle?\nmessage.config({\n  top: 75,\n});\n\nclass Store {\n\n  credential = {};\n  aliasMap = null;\n  chartResultMap = new Map();\n  map = null;\n  layerVisibleMap = new Map();\n  tooltipResults = null;\n  bookmarkInfo = null;\n\n  constructor(appState, storeConfig){\n    this.appState = appState;\n    this.layerId = storeConfig.layerItemId;\n    this.mapId = storeConfig.webmapId;\n    this.filters = storeConfig.filters.map(f => {\n      switch(f.type){\n        case 'minmax':\n          return new MinMaxFilter(f.name, f.params)\n        case 'multiselect':\n          return new MultiSelectFilter(f.name, f.params);\n        case 'select':\n          return new SelectFilter(f.name, f.params);\n        case 'quantile':\n          return new QuantileFilter(f.name, f.params);\n        default:\n          throw new Error(\"Unknown filter type!\")\n      }\n    });\n    this.charts = storeConfig.charts || [];\n    \n    this.renderers = storeConfig.renderers;\n    this.rendererOptions = [...Object.keys(this.renderers)];\n    this.rendererField = storeConfig.initialRendererField;\n    this.popupTemplate = storeConfig.popupTemplate;\n    this.layerLoaded = false;\n    this.viewConfig = storeConfig.viewConfig;\n    this.outFields = storeConfig.outFields;\n    this.hasCustomTooltip = storeConfig.hasCustomTooltip;\n    this.bookmarkInfos = storeConfig.bookmarkInfos;\n  }\n  // to destroy map view, need to do `view.container = view.map = null;`\n  // should probably include this in the dismount\n  destroy(){\n    if(this.effectHandler) this.effectHandler();\n    if(this.rendererHandler) this.rendererHandler();\n    if(this._tooltipListener) this._tooltipListener.remove();\n  }\n\n  loadFilters(){\n    this.filters.forEach(f => f.load(this.lyr, this.view));\n  }\n\n  // todo could query the client instead of the server\n  // once the layerview has loaded\n  loadCharts(){\n    if(!this.charts || this.charts.length < 1) return;\n    this.charts.forEach(c => {\n      this.lyr.queryFeatures(c.queryDefinition)\n        .then(qRes => {\n          const storedResult = c.resultTransform\n            ? c.resultTransform(qRes)\n            : qRes;\n          this.chartResultMap.set(c.id, storedResult);\n        });\n    });\n  }\n\n  _loadLayers(){\n    this.view.whenLayerView(this.lyr)\n    .then(lV => {\n      message.destroy();\n      this.lyrView = lV;\n      this.loadFilters();\n      this.loadCharts();\n\n      this.map.layers.forEach(l => {\n        this.layerVisibleMap.set(l.id, l.visible);\n      })\n\n      if(this.hasCustomTooltip){\n        this._tooltipListener = this.view.on(\"pointer-move\", this._onMouseMove);\n      }\n\n      this.aliasMap = this.lyr.fields.reduce((p, f) => {\n        p.set(f.name, f.alias);\n        return p;\n      }, new Map());\n      this.layerLoaded = true;\n    })\n    .catch(er => {\n      message.destroy();\n      message.error('Error loading the layers, does your account have access to the data?', 4);\n      console.log(er);\n    });\n  }\n\n  _buildAutoRunEffects(){\n    const onApplyFilter = pUtils.debounce(function(layerView, where){\n      layerView.filter = {where}\n      // layerView.effect = {\n      //   filter: {where},\n      //   excludedEffect: \"grayscale(50%) opacity(30%)\"\n      // };\n    });\n    this.effectHandler = autorun(_ => {\n      const where = this.where;\n      if(this.lyrView && onApplyFilter){\n        onApplyFilter(this.lyrView, where);\n      }\n    });\n    this.rendererHandler = autorun(_ => {\n      const rendererField = this.rendererField;\n      if(!this.lyr) return;\n      const renderer = this.renderers[rendererField];\n      if(renderer._type === 'jsapi') {\n        this.lyr.renderer = renderer;\n        return;\n      } \n      loadModules(['esri/renderers/support/jsonUtils'], options)\n        .then(([rendererJsonUtils]) => {\n          this.lyr.renderer = rendererJsonUtils.fromJSON(this.renderers[rendererField]);\n        });\n    })\n  }\n\n  // class to watch for mouse movement\n  // need to figure learn how best to use this debounce function\n  _onMouseMove(evt){\n\n    const handleEvt = pUtils.debounce(function(classRef, event){\n      return classRef.view.hitTest(event)\n        .then(hit => {\n          if(classRef._tooltipHighlight){\n            classRef._tooltipHighlight.remove();\n            classRef._tooltipHighlight = null;\n          }\n          const results = hit.results.filter(r => r.graphic.layer === classRef.lyr);\n          if(results.length){\n            const graphic = results[results.length - 1].graphic;\n            const screenPoint = hit.screenPoint;\n            classRef._tooltipHighlight = classRef.lyrView.highlight(graphic);\n            classRef.tooltipResults = {\n              screenPoint,\n              graphic\n            }\n          } else {\n            classRef.tooltipResults = null;\n          }\n        })\n    })\n    handleEvt(this, evt)\n  }\n\n  setRendererField(field){\n    this.rendererField = field;\n  }\n\n  toggleLayerVisibility(layer){\n    // console.log(layer);\n    const isVisible = !layer.visible;\n    layer.visible = isVisible;\n    this.layerVisibleMap.set(layer.id, isVisible);\n  }\n\n  load(mapViewDiv){\n    message.loading('Loading data.', 0);\n    let renderer;\n    return loadModules([\n      'esri/WebMap',\n      'esri/Map',\n      'esri/views/MapView',\n      'esri/layers/FeatureLayer',\n      'esri/core/promiseUtils',\n      'esri/identity/IdentityManager',\n      'esri/renderers/support/jsonUtils',\n      'esri/geometry/SpatialReference'\n    ], options)\n    .then(([WebMap, Map, MapView, FeatureLayer, promiseUtils, esriId, rendererJsonUtils, SpatialReference]) => {\n\n      esriId.registerToken(this.appState.session.toCredential());\n\n      pUtils = promiseUtils;\n      this._buildAutoRunEffects();\n\n      if(this.renderers && this.renderers[this.rendererField]){\n        renderer = this.renderers[this.rendererField]._type === 'jsapi'\n          ? this.renderers[this.rendererField]\n          : rendererJsonUtils.fromJSON(this.renderers[this.rendererField]);\n      }\n\n      this.view = new MapView({\n        container: mapViewDiv,\n        center: this.viewConfig.center,\n        zoom: this.viewConfig.zoom,\n        //spatialReference: SpatialReference.WGS84\n        //spatialReference: new SpatialReference({ wkid: 4326 })\n      })\n\n      if(this.mapId){\n        this.map = new WebMap({\n          portalItem: {\n            id: this.mapId\n          }\n        });\n        this.view.map = this.map;\n        return this.map.when();\n      } else {\n        const lyr = new FeatureLayer({\n          portalItem: {id: this.layerId}\n        })\n        this.map = new Map({\n          basemap: 'dark-gray-vector',\n          layers: [lyr]\n        });\n        this.view.map = this.map;\n        return Promise.resolve();\n      }\n\n    })\n    .then(_ => {\n      this.lyr = this.map.layers.find(l => \n        l.portalItem.id === this.layerId\n      );\n      if(renderer) this.lyr.renderer = renderer;\n      if(this.outFields) this.lyr.outFields = this.outFields;\n      if(this.popupTemplate !== undefined) this.lyr.popupTemplate = this.popupTemplate;\n      this._loadLayers();\n      return this.view;\n    })\n    .catch(er => {\n      message.destroy();\n      message.error('Error creating the map, please refresh for now');\n    });\n  }\n\n  clearFilters(){\n    this.filters.forEach(f => f.clear());\n  }\n\n  //todo, move the GoTo to the view?\n  onBookmarkClick(index){\n    if(!this.view || index >= this.bookmarks.length) return;\n    const bookmark = this.bookmarks[index];\n    this.view.goTo(bookmark.extent);\n    if(this.bookmarkInfos){\n      console.log('bookmark setting', bookmark.name)\n      this.bookmarkInfo = this.bookmarkInfos[bookmark.name]\n    }\n  }\n\n  onClearBookmark(){\n    this.bookmarkInfo = null;\n  }\n\n  get where(){\n    const where = this.filters\n      .filter(f => !!f.where)\n      .map(f => f.where)\n      .join(' AND '); \n    return where ? where : \"1=1\";\n  }\n  \n  get layers(){\n    if(this.map && this.layerLoaded) {\n      return this.map.layers.items.reverse();\n    };\n    return [];\n  }\n  get bookmarks(){\n    if(this.map && this.layerLoaded) {\n      return this.map.bookmarks.items;\n    };\n    return [];\n  }\n}\n\ndecorate(Store, {\n  user: observable,\n  rendererField: observable,\n  layerLoaded: observable,\n  aliasMap: observable,\n  layerVisibleMap: observable,\n  chartResultMap: observable.shallow,\n  tooltipResults: observable.shallow,\n  bookmarkInfo: observable.ref,\n  map: observable.ref,\n  where: computed,\n  layers: computed,\n  bookmarks: computed,\n  load: action.bound,\n  _loadLayers: action.bound,\n  loadFilters: action.bound,\n  loadCharts: action.bound,\n  setRendererField: action.bound,\n  clearFilters: action.bound,\n  toggleLayerVisibility: action.bound,\n  _onMouseMove: action.bound,\n  onBookmarkClick: action.bound,\n  onClearBookmark: action.bound\n});\n\nexport default Store;","import {decorate, observable, action } from 'mobx';\nimport {loadModules} from 'esri-loader';\nimport options from '../config/esri-loader-options';\nimport Store from '../stores/Store';\nimport { message } from 'antd';\n\nmessage.config({\n  // top: \"calc(100vh - 70px)\"\n  top: \"75px\"\n})\n\nconst scoreStatQuery = {\n  onStatisticField: 'eventvalue',\n  outStatisticFieldName: 'score_sum',\n  statisticType: 'sum'\n}\n\nclass SafetyStore extends Store {\n  editMode = null;\n  startGraphic = null;\n  endGraphic = null;\n  startStr = '';\n  endStr = '';\n  isSketchLoaded = false;\n\n  stdRoute = null;\n  stdTravelTime = null;\n  stdTravelScore = null;\n  scoreRoute = null;\n  safetyTravelTime = null;\n  safetyTravelScore = null;\n\n  load(mapViewDiv){\n    return super.load(mapViewDiv)\n      .then(view => {\n        loadModules([\n          'esri/widgets/Sketch/SketchViewModel',\n          'esri/layers/FeatureLayer',\n          'esri/geometry/SpatialReference'\n        ], options)\n          .then(([SketchVM, FeatureLayer, SpatialReference]) => {\n            this.sketchVM = new SketchVM({\n              view,\n              layer: view.graphics\n            });\n            this.sketchListener = this.sketchVM.on(\"create\", this.onCreateComplete);\n            this.isSketchLoaded = true;\n\n            this.routeResultLyr = new FeatureLayer({\n              title: \"Route Results\",\n              geometryType: \"polyline\",\n              spatialReference: SpatialReference.WebMercator,\n              //spatialReference: SpatialReference.WGS84,\n              objectIdField: 'oid',\n              source: []\n            })\n            this.map.add(this.routeResultLyr);\n          });\n        return view;\n      })\n  }\n\n  clearRouteData(){\n    if(this.startGraphic){\n      this.view.graphics.remove(this.startGraphic);\n      this.startGraphic = null;\n    }\n    if(this.endGraphic){\n      this.view.graphics.remove(this.endGraphic);\n      this.endGraphic = null;\n    }\n    if(this.stdRoute){\n      this.view.graphics.remove(this.stdRoute);\n      this.stdRoute = null;\n    }\n    if(this.scoreRoute){\n      this.view.graphics.remove(this.scoreRoute);\n      this.scoreRoute = null;\n    }\n    this.editMode = null;\n    this.startStr = '';\n    this.endStr = '';\n    this.stdTravelTime = null;\n    this.stdTravelScore = null;\n    this.safetyTravelTime = null;\n    this.safetyTravelScore = null;\n  }\n\n  onCreateComplete(evt){\n    if(evt.state !== 'complete') return;\n    if(this.editMode === 'start'){\n      this.startGraphic = evt.graphic;\n      this.setAddressFromGeocode('start', this.startGraphic);\n    } else if (this.editMode === 'end'){\n      this.endGraphic = evt.graphic;\n      this.setAddressFromGeocode('end', this.endGraphic);\n    } else {\n      this.view.graphics.remove(evt.graphic);\n    }\n    if(this.startGraphic && this.endGraphic){\n      this.view.goTo([this.startGraphic, this.endGraphic])\n    }\n  }\n\n  setAddressFromGeocode(stopType, graphic){\n\n    loadModules(['esri/tasks/Locator'], options)\n      .then(([Locator]) => {\n        const locator = new Locator({\n          url: \"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer\"\n        });\n        return locator.locationToAddress({\n          location: graphic.geometry,\n          locationType: \"street\"\n        });\n      })\n      .then(res => {\n        if(stopType === 'start') this.startStr = res.address;\n        else if(stopType === 'end') this.endStr = res.address;\n      })\n      .catch(er => {\n        message.error('Error converting point to an address, please retry!')\n      });\n  }\n\n  // don't like this logic, re-write at some point #refactor!\n  onCreateClick(e){\n    if(e === 'start' && this.startGraphic){\n      this.view.graphics.remove(this.startGraphic);\n      this.startGraphic = null;\n      this.editMode = e;\n      this.startStr = '';\n    }\n    if(e === 'end' && this.endGraphic){\n      this.view.graphics.remove(this.endGraphic);\n      this.endGraphic = null;\n      this.editMode = e;\n      this.endStr = '';\n    }\n    if(this.editMode === e){\n      this.editMode = null;\n      if(this.sketchVM.state === 'active') {\n        this.sketchVM.cancel();\n      }\n    } else {\n      this.sketchVM.create(\"point\");\n      this.editMode = e;\n    }\n  }\n\n  generateStdRoute(){\n    return loadModules([\n      'esri/tasks/RouteTask',\n      'esri/tasks/support/RouteParameters',\n      'esri/tasks/support/FeatureSet',\n      'esri/geometry/SpatialReference'\n    ], options)\n    .then(([\n      RouteTask,\n      RouteParameters,\n      FeatureSet,\n      SpatialReference\n    ]) => {\n      const routeTask = new RouteTask({\n        url: \"https://route.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World/solve\"\n      });\n  \n      const routeParams = new RouteParameters({\n        stops: new FeatureSet(),\n        outSpatialReference: SpatialReference.WebMercator,\n        impedanceAttribute: 'Miles',\n        accumulateAttributes: ['TravelTime']\n      });\n  \n      routeParams.stops.features.push(this.startGraphic);\n      routeParams.stops.features.push(this.endGraphic);\n  \n      return routeTask.solve(routeParams)\n    })\n    .then(data => {\n      // console.log('std', data);\n      \n      // const existingGraphic = this.routeResultLyr.source.find(f => f.attributes.oid === 1);\n      // if(existingGraphic){\n      //   this.routeResultLyr.source.remove(existingGraphic);\n      // }\n      // const nextRoute = data.routeResults[0].route;\n\n      if(this.stdRoute) this.view.graphics.remove(this.stdRoute);\n      this.stdRoute = data.routeResults[0].route;\n      this.stdRoute.symbol = {\n        type: \"simple-line\",\n        color: [94, 43, 255, 1],\n        width: 3\n      };\n      this.stdTravelTime = this.stdRoute.attributes['Total_TravelTime'];\n      this.view.graphics.add(this.stdRoute);\n      return this.lyrView.queryFeatures({\n        where: \"1=1\",\n        geometry: this.stdRoute.geometry,\n        outStatistics: [scoreStatQuery]\n      })\n    })\n    .then(res => {\n      if(res.features && res.features.length){\n        this.stdTravelScore = res.features[0].attributes['score_sum']\n      }\n    });\n  }\n\n  generateScoreRoute(){\n\n    const pQuery = this.lyrView.queryFeatures({\n      where: \"eventvalue > 0\",\n      geometry: this.view.extent,\n      spatialRelationship: 'contains',\n      orderByFields: ['eventvalue DESC'],\n      returnGeometry: true,\n      outFields: ['eventvalue', 'OBJECTID']\n    });\n\n    const pModules = loadModules([\n      'esri/tasks/RouteTask',\n      'esri/tasks/support/RouteParameters',\n      'esri/tasks/support/FeatureSet',\n      'esri/geometry/SpatialReference',\n      \"esri/geometry/geometryEngine\"\n    ], options);\n\n    return Promise.all([pQuery, pModules])\n    .then(([\n      qres,\n      [ RouteTask, RouteParameters, FeatureSet, SpatialReference,geometryEngine]\n    ]) => {\n\n      const routeTask = new RouteTask({\n        url: \"https://route.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World/solve\"\n      });\n  \n      const routeParams = new RouteParameters({\n        stops: new FeatureSet(),\n        polygonBarriers: new FeatureSet(),\n        outSpatialReference: SpatialReference.WebMercator,\n        impedanceAttribute: 'Miles',\n        accumulateAttributes: ['TravelTime']\n      });\n  \n      routeParams.stops.features.push(this.startGraphic);\n      routeParams.stops.features.push(this.endGraphic);\n\n      var scorepolys = qres.features.slice(0,150).map((f,i) => {\n        var scorebuffer = {\n          geometry: geometryEngine.geodesicBuffer(f.geometry, 15, \"meters\"),\n          attributes: {\n            Name: f.attributes['ObjectId'],\n            BarrierType: 1,\n            Attr_Miles: f.attributes['eventvalue'] / 4\n          },\n        }\n        return scorebuffer;  \n      });\n      routeParams.polygonBarriers.features = scorepolys;\n\n      return routeTask.solve(routeParams)\n    })\n    .then(data => {\n      console.log('score', data);\n      if(this.scoreRoute) this.view.graphics.remove(this.scoreRoute);\n      this.scoreRoute = data.routeResults[0].route;\n      this.scoreRoute.symbol = {\n        type: \"simple-line\",\n        color: [227, 69, 143, 1],\n        width: 3\n      };\n      this.safetyTravelTime = this.scoreRoute.attributes['Total_TravelTime'];\n      this.view.graphics.add(this.scoreRoute);\n      return this.lyrView.queryFeatures({\n        where: \"1=1\",\n        geometry: this.scoreRoute.geometry,\n        outStatistics: [scoreStatQuery]\n      })\n    })\n    .then(res => {\n      if(res.features && res.features.length){\n        this.safetyTravelScore = res.features[0].attributes['score_sum']\n      }\n    });\n  }\n\n  // todo refactor to add to map and zoom to the extents then query data\n  generateRoutes(){\n    message.loading('Generating routes!', 0);\n    loadModules([\n      'esri/tasks/RouteTask',\n      'esri/tasks/support/RouteParameters',\n      'esri/tasks/support/FeatureSet',\n      'esri/geometry/SpatialReference'\n    ], options)\n    .then(_ => \n      Promise.all([\n        this.generateStdRoute(),\n        this.generateScoreRoute()\n      ])\n    )\n    .then( _ => {\n      this.view.goTo([this.scoreRoute, this.stdRoute]);\n      message.destroy();\n    })\n    .catch(_ => {\n      message.destroy();\n      message.error('Error generating routes, please retry!');\n    })\n\n  }\n\n  get safetyScoreDelta(){\n    if(!this.stdTravelScore || !this.safetyTravelScore){\n      return null;\n    }\n    return 100 * ((this.safetyTravelScore - this.stdTravelScore) / this.stdTravelScore);\n  }\n\n  get safetyTimeDelta(){\n  if(!this.stdTravelTime || !this.safetyTravelTime){\n    return null;\n  }\n  return 100 * ((this.safetyTravelTime - this.stdTravelTime) / this.stdTravelTime);\n}\n\n}\n\ndecorate(SafetyStore, {\n  editMode: observable,\n  startGraphic: observable,\n  endGraphic: observable,\n  startStr: observable,\n  endStr: observable,\n  isSketchLoaded: observable,\n  stdTravelTime: observable,\n  safetyTravelTime: observable,\n  stdTravelScore: observable,\n  safetyTravelScore: observable,\n  onStartClick: action.bound,\n  onEndClick: action.bound,\n  load: action.bound,\n  onCreateComplete: action.bound,\n  setAddressFromGeocode: action.bound,\n  generateRoutes: action.bound,\n  generateStdRoute: action.bound,\n  clearRouteData: action.bound\n})\n\nexport default SafetyStore;","// for now expect exactly 5 stops that map to the same color ramp\nconst getRenderer = (field, stops,labels) => ({\n  _type: \"jsapi\",\n  type: \"simple\",\n  symbol: { type: \"simple-line\" ,width: \"2.5px\"},\n  label: \"Road segment\",\n  visualVariables: [{\n    type: \"color\",\n    field,\n    stops: [\n      { value: stops[0], color: [44,123,182,255], label: `${labels[0]}` },\n      { value: stops[1], color: [171,217,233,255], label: null },\n      { value: stops[2], color: [255,255,191,255], label: `${labels[1]}` },\n      { value: stops[3], color: [253,174,97,255], label: null },\n      { value: stops[4], color: [215,25,28,255], label: `${labels[2]}`},\n    ]\n  }]\n})\n\nconst safetyConfig = {\n  //layerItemId: '534f26d211154527b31c976ea6b5eafe',\n  layerItemId: 'e37cc788804e4303b6e7898481798691',\n  webmapId: '906b58f399944774a29e05d3d24a939b',\n  // webmapId: '58d18243967d40e9a25db1f02d3652b0',\n  initialRendererField: 'eventvalue',\n  renderers: {\n    'eventvalue': {\n      _type: \"jsapi\",\n      type: 'class-breaks',\n      field: 'eventvalue',\n      classBreakInfos: [{\n        minValue: 0,\n        maxValue: 2.499,\n        symbol: {type: \"simple-line\", width: \"2.5px\", color: [171,217,233,255]},\n        label: \"Low\"\n      }, {\n        minValue: 2.5,\n        maxValue: 5.6453,\n        symbol: {type: \"simple-line\", width: \"2.5px\", color: [255,255,191,255]},\n        label: \"Average\"\n      }, {\n        minValue: 5.6454,\n        maxValue: 12.499,\n        symbol: {type: \"simple-line\", width: \"2.5px\", color: [253,174,97,255]},\n        label: \"High\"\n      }, {\n        minValue: 12.5,\n        maxValue: 1000,\n        symbol: {type: \"simple-line\", width: \"2.5px\", color: [215,25,28,255]},\n        label: \"Very High\"\n      }]\n    },\n    'harsh_acc_ratio': getRenderer('harsh_acc_ratio', [0,3.5,7,10.5,14],['Low','Medium','High']),\n    'harsh_cornering_ratio': getRenderer('harsh_cornering_ratio', [0,1.86,3.7,5.56,7.4],['Low','Medium','High']),\n    'pedestrians_density': getRenderer('pedestrians_density', [0,0.3,0.61,0.9,1.2],['Low','Medium','High']),\n    'bicycles_density': getRenderer('bicycles_density', [0,0.056,0.112,0.166,0.22],['Low','Medium','High']),\n    'speeding_ratio': getRenderer('speeding_ratio', [0,3.7,7.5,11.2,15],['Low','Medium','High']),\n    'avarge_speed': getRenderer('avarge_speed',[28,38,48,58,68],['< 25','50','> 70']),\n    'pcw': getRenderer('pcw', [0,0.01181361,0.02357791,0.03498221,0.05745235],['Low','Medium','High']),\n     'fcw': getRenderer('fcw', [0,1.35499499,2.66894309,6.03785078,8.2561676],['Low','Medium','High'])\n  },\n  filters: [{\n    name:'eventvalue',\n    type: 'quantile',\n    params: {\n      quantiles: [{\n        min: 0,\n        max: 2.5,\n        // label: \"Low (30%)\",\n        label: \"Low\"\n      }, {\n        min: 2.5,\n        max: 5.6453,\n        // label: \"Average (40%)\",\n        label: \"Average\"\n      }, {\n        min: 5.6453,\n        max: 12.5,\n        // label: \"High (20%)\"\n        label: \"High\"\n      }, {\n        min: 12.5,\n        max: 1000,\n        // label: \"Very High (10%)\"\n        label: \"Very High\"\n      }],\n      info: \"Road risk score based on the variables below.\",\n      style: \"buttons\"\n    }\n  },{\n    name: 'harsh_acc_ratio',\n    type: 'minmax',\n    params: {\n      isLogarithmic: false,\n      hasHistograms: false,\n      lowerBoundLabel: 'low',\n      upperBoundLabel: 'high',\n      info: \"Percentage of cars that brake harshly in the segment.\"\n    }\n  },{\n    name: 'harsh_cornering_ratio',\n    type: 'minmax',\n    params: {\n      isLogarithmic: false,\n      hasHistograms: false,\n      lowerBoundLabel: 'low',\n      upperBoundLabel: 'high',\n      info: \"Percentage of cars that turn the corner with high G-force.\"\n    }\n  },{\n    name: 'pedestrians_density',\n    type: 'minmax',\n    params: {\n      isLogarithmic: false,\n      hasHistograms: false,\n      lowerBoundLabel: 'low',\n      upperBoundLabel: 'high',\n      info: \"Density of pedestrians over the segment.\"\n    }\n  },{\n    name: 'bicycles_density',\n    type: 'minmax',\n    params: {\n      isLogarithmic: false,\n      hasHistograms: false,\n      lowerBoundLabel: 'low',\n      upperBoundLabel: 'high',\n      info: \"Density of bicycles over the segment.\"\n    }\n  },{\n    name: 'speeding_ratio',\n    type: 'minmax',\n    params: {\n      isLogarithmic: false,\n      hasHistograms: false,\n      lowerBoundLabel: 'low',\n      upperBoundLabel: 'high',\n      info: \"The percentage of vehicles that drive a standard deviation above the average speed at the segment.\"\n    }\n  },{\n    name: 'avarge_speed',\n    type: 'minmax',\n    params: {\n      isLogarithmic: false,\n      hasHistograms: false,\n      lowerBoundLabel: '0',\n      upperBoundLabel: '140',\n      info: \"Average speed of the respective segment. (Does not contribute to risk score on its own).\"\n    }\n  },{\n    name: 'pcw',\n    type: 'minmax',\n    params: {\n      isLogarithmic: false,\n      hasHistograms: false,\n      lowerBoundLabel: 'low',\n      upperBoundLabel: 'high',\n      info: \"Pedestrian and cyclist collision warning (PCW)\"\n    }\n  },{\n    name: 'fcw',\n    type: 'minmax',\n    params: {\n      isLogarithmic: false,\n      hasHistograms: false,\n      lowerBoundLabel: 'low',\n      upperBoundLabel: 'high',\n      info: \"Forward collision warning (FCW)\"\n    }\n  }],\n  hasCustomTooltip: true,\n  outFields: [\n    'eventvalue', 'harsh_cornering_ratio', 'harsh_acc_ratio', 'pedestrians_density',\n    'bicycles_density', 'speeding_ratio', 'avarge_speed','pcw','fcw'\n  ], \n  popupTemplate: null,\n  //for n\n  // popupTemplate: {\n  //   title: \"Road Segment Information\",\n  //   content: [{\n  //     type: \"text\",\n  //     text: \"<b>Road Risk Score: {expression/round_score}</b>\",\n  //   }, {\n  //     type: \"fields\",\n  //     fieldInfos: [{\n  //       fieldName: 'harsh_cornering_ratio',\n  //       label: 'Harsh cornering (%)',\n  //       format: {\n  //         places: 2,\n  //         digitSeparator: true\n  //       },\n  //     }, {\n  //       fieldName: 'harsh_acc_ratio',\n  //       label: \"Harsh braking (%)\",\n  //       format: {\n  //         places: 2,\n  //         digitSeparator: true\n  //       },\n  //     }, {\n  //       fieldName: 'pedestrians_density',\n  //       label: \"Average pedestrian volume\",\n  //       format: {\n  //         places: 2,\n  //         digitSeparator: true\n  //       },\n  //     }, {\n  //       fieldName: 'bicycles_density',\n  //       label: 'Average cyclist volume',\n  //       format: {\n  //         places: 2,\n  //         digitSeparator: true\n  //       },\n  //     }, {\n  //       fieldName: 'speeding_ratio',\n  //       label: 'Above average speeds (%)',\n  //       format: {\n  //         places: 2,\n  //         digitSeparator: true\n  //       },\n  //     }, {\n  //       fieldName: 'avarge_speed',\n  //       label: 'Average speed (Km/H)',\n  //       format: {\n  //         places: 2,\n  //         digitSeparator: true\n  //       },\n  //     }]\n  //   }],\n  //   expressionInfos: [{\n  //     name: \"round_score\",\n  //     expression: \"Round($feature.eventvalue,2)\"\n  //   }]\n  // },\n  viewConfig: {\n    center: [-74.00157, 40.71955],\n    zoom: 12\n  },\n  bookmarkInfos: {\n    'Willamsburg Bridge': {\n      title: 'Williamsburg Bridge',\n      content: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'\n    },\n    'Jerusalem': {\n      title: 'Jerusalem',\n      content: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'\n    },\n    'Manhattan': {\n      title: 'Manhattan',\n      content: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'\n    }\n  }\n}\n\nexport default safetyConfig;","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport { Card, Button } from 'antd';\n\nclass BookmarkPanelItem extends React.PureComponent {\n\n  onClick = () => {\n    this.props.onClick(this.props.id);\n  }\n\n  render(){\n    const b = this.props.bookmark;\n    return(\n      <Card style={{marginBottom: \"5px\"}} key={b.name}>\n        <h3 style={{margin: 0, display: \"inline-block\"}}>{b.name}</h3>\n        <Button style={{float: \"right\"}} ghost type=\"primary\" onClick={this.onClick}>Explore</Button>\n      </Card>\n    )\n  }\n}\n\nconst BookmarkPanel = observer(({store}) => {\n\n  const bookmarkViews = store.bookmarks.map((b,i) => \n    <BookmarkPanelItem bookmark={b} id={i} key={b.name} onClick={store.onBookmarkClick}/>\n  )\n\n  return(\n    <>\n      {bookmarkViews}\n    </>\n  )\n});\n\nexport default BookmarkPanel;\n\n","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport { Card, Progress } from 'antd';\n\nimport safetyConfig from './SafetyConfig';\n\n// This is really lazy, should be a method in the store but need to adjust config too so\n// quantiles only get defined once\nconst quantiles = safetyConfig.filters.find(f => f.name === 'eventvalue').params.quantiles;\n\nconst getQuantileLabel = value => {\n  for(let i=0; i < quantiles.length; i++){\n    if(value < quantiles[i].max){\n      return quantiles[i].label;\n    }\n  }\n  return ''\n}\n\n\nconst SafetyTooltip = observer(({store}) => {\n\n  if(!store.tooltipResults){\n    return null;\n  }\n  const {\n    graphic,\n    screenPoint\n  } = store.tooltipResults;\n  const {x,y} = screenPoint;\n\n  const isSubsetFields = store.rendererField && store.rendererField !== 'eventvalue';\n\n  const style = {\n    display: 'block',\n    position: 'absolute',\n    top: isSubsetFields ? `${y - 115}px` :`${y - 405}px`,\n    left: `${x - 220/2}px`,\n    width: '220px',\n    height: isSubsetFields ? '110px' : '400px',\n    overflow: 'auto',\n    zIndex: '99',\n    pointerEvents: 'none',\n  }\n  if(!graphic) style.display = 'none';\n  const attrs = graphic.attributes;\n\n  const aM = store.aliasMap;\n  // this is weird, but the filter objects will all have queried attribute metadata\n  // to define information in the tooltip, and we want to show them all\n  // longer term may want to move this out of the filters\n\n  const infoContent = store.filters.filter(f => {\n    const defaultBool = attrs.hasOwnProperty(f.field) && f.type === 'minmax' && f.field !== 'eventvalue';\n    return isSubsetFields\n      ? defaultBool && store.rendererField === f.field\n      : defaultBool;\n  }).map(f => \n    <div key={f.field}>\n      {f.alias}\n      <Progress\n        percent={Math.round((attrs[f.field]/f.upperBound) * 100)}\n        status=\"normal\"\n        showInfo={false}/>\n    </div>\n  )\n\n  return (\n    <Card className=\"antd-esri-widget\" style={style} size=\"small\" title={`${aM.get('eventvalue')}: ${getQuantileLabel(attrs['eventvalue'])}`}>\n      {infoContent}\n    </Card>\n  )\n});\n\nexport default SafetyTooltip;","import React from 'react'\nimport { observer } from \"mobx-react\";\nimport { Layout, Menu, Drawer, Icon, Row, Col, Card } from 'antd';\nimport LayerFilterIcon from 'calcite-ui-icons-react/LayersIcon';\nimport BookmarkIcon from 'calcite-ui-icons-react/BookmarkIcon';\nimport RouteFromIcon from 'calcite-ui-icons-react/RouteFromIcon';\nimport {loadModules} from 'esri-loader';\nimport options from '../config/esri-loader-options';\nimport LayerPanel from './LayerPanel';\nimport RoutePanel from './RoutePanel';\nimport SafetyStore from './SafetyStore';\nimport safetyConfig from './SafetyConfig';\nimport BookmarkPanel from '../components/BookmarkPanel';\nimport SafetyTooltip from './SafetyTooltip';\nimport MobileyeLogo from '../resources/Basic_Web_White_Logo.png';\n\nconst { Header, Content, Sider } = Layout;\n\nconst MenuFilterIcon = () => (\n  <LayerFilterIcon size=\"18\" filled/>\n)\nconst MenuBookmarkIcon = () => (\n  <BookmarkIcon size=\"18\" filled/>\n)\nconst MenuRouteFromIcon = () => (\n  <RouteFromIcon size=\"20\" filled/>\n)\n\nconst SafetyApp = observer(class App extends React.Component {\n\n  state = {\n    collapsed: true,\n    loaded: false,\n    navKey: null\n  };\n\n  constructor(props, context){\n    super(props, context);\n    this.mapViewRef = React.createRef();\n    this.store = new SafetyStore(props.appState, safetyConfig);\n  }\n\n  onCollapse = collapsed => {\n    this.setState({ collapsed });\n  };\n\n  onSelect = item => {\n    const navKey = this.state.navKey === item.key\n      ? null\n      : item.key;\n    this.setState({navKey});\n    this.store.onClearBookmark();\n  }\n\n  onClose = () => {\n    this.setState({\n      navKey: null,\n    });\n    this.store.onClearBookmark();\n  };\n\n  onSignOutClick = () => {\n    this.props.appState.logout();\n  }\n\n  componentDidMount = () => {\n\n    const modulePromise = loadModules([\n      'esri/widgets/Search',\n      'esri/widgets/Legend'\n    ], options);\n    const loadPromise = this.store.load(this.mapViewRef.current);\n\n    Promise.all([modulePromise, loadPromise])\n      .then(([[Search, Legend], mapView]) => {\n        this.view = mapView;\n        const search = new Search({view: this.view});\n        this.view.ui.add(search, \"top-right\");\n        const legend = new Legend({\n          view: this.view,\n          layerInfos: [{layer: this.store.lyr, title: \"\"}]\n        });\n        this.view.popup.actions.removeAll();\n        this.view.ui.add(legend, \"bottom-right\");\n        this.view.ui.move(\"zoom\", \"top-right\");\n\n      })\n  }\n\n  render() {\n\n    let panel;\n    switch(this.state.navKey){\n      case 'Data Layers':\n        panel = <LayerPanel store={this.store}/>;\n        break;\n      case 'Saved Locations':\n        panel = <BookmarkPanel store={this.store}/>\n        break;\n      case 'Route':\n        panel = <RoutePanel store={this.store}/>\n        break;\n      default:\n        panel = null;\n    }\n\n    const signin = this.props.appState.displayName\n      ? (\n        <Menu\n          // theme=\"dark\"\n          mode=\"horizontal\"\n          style={{ lineHeight: '64px', float: \"right\" }}\n        >\n          <Menu.Item key=\"sign in\" onClick={this.onSignOutClick}>\n            <Icon type=\"logout\"/>\n            {this.props.appState.displayName}\n          </Menu.Item>\n        </Menu>\n      )\n      : null;\n      \n    const tooltip = this.store.hasCustomTooltip\n      ? <SafetyTooltip store={this.store}/>\n      : null;\n    \n    \n    let bookmarkCard;\n    if(this.store.bookmarkInfo){\n      bookmarkCard = (\n        <Card\n          title={this.store.bookmarkInfo.title}\n          className=\"antd-esri-widget\"\n          style={{\n            position: \"absolute\",\n            bottom: \"30px\",\n            width: \"400px\",\n            left: \"50%\",\n            marginLeft: \"-200px\",\n          }}\n          size=\"small\">\n          {this.store.bookmarkInfo.content}\n        </Card>\n      )\n    }\n    return (\n      <Layout style={{ minHeight: '100vh' }}>\n        <Sider collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse}>\n          <img\n            src={MobileyeLogo}\n            alt=\"Mobileye Logo\"\n            style={{height: \"40px\", margin: \"12px\"}}\n            />\n          <Menu\n            defaultSelectedKeys={['0']}\n            mode=\"inline\"\n            theme=\"dark\"\n            selectedKeys={[this.state.navKey]}\n            onClick={this.onSelect}>\n            <Menu.Item key=\"Data Layers\">\n              <Icon component={MenuFilterIcon} />\n              <span>Data Layers</span>\n            </Menu.Item>\n            <Menu.Item key=\"Route\">\n              <Icon component={MenuRouteFromIcon} />\n              <span>Route</span>\n            </Menu.Item>\n            <Menu.Item key=\"Saved Locations\">\n              <Icon component={MenuBookmarkIcon} />\n              <span>Saved Locations</span>\n            </Menu.Item>\n          </Menu>\n        </Sider>\n        <Layout>\n          <Header style={{paddingLeft: \"1rem\", paddingRight: \"0rem\", background: \"white\"}}>\n            <h1 style={{float: \"left\"}}>Road Risk Score&nbsp;&nbsp;  </h1>\n            <div style={{float: \"left\"}}> (Data presented from Sep 1st - October 22nd)</div>\n            {signin}\n          </Header>\n          <Content>\n            <Row>\n              <Col\n                span={24}\n                style={{height: \"calc(100vh - 64px)\"}}>\n              <div\n                ref={this.mapViewRef}\n                style={{width: \"100%\", height: \"100%\"}}/>\n              {tooltip}\n              {bookmarkCard}\n              <Drawer\n                title={this.state.navKey}\n                closable={true}\n                onClose={this.onClose}\n                placement=\"left\"\n                visible={this.state.navKey}\n                mask={false}\n                width={340}\n                getContainer={false}\n                style={{ position: 'absolute', background: \"#f5f5f5\", height: \"calc(100% - 15px)\"}}\n                bodyStyle={{ padding: \"10px\", background: \"#f5f5f5\", minHeight: \"calc(100% - 55px)\"}}\n              >\n                {panel}\n              </Drawer>\n            </Col>\n            </Row>\n          </Content>\n        </Layout>\n      </Layout>\n    );\n  }\n});\n\nexport default SafetyApp;","// update to map\n\nimport bicycleImage from '../resources/images/ET_BICYCLE.png'\nimport pedImage from '../resources/images/ET_PED_ON_HW.png'\n\nconst eventsConfig = {\n  layerItemId: 'baf1358ce8d74342af3340f621688e21',\n  webmapId: '54d46b14f5f74e59a523e0ae46ef8736',\n  //layerRefreshIntervalMin: 1,\n  initialRendererField: 'eventsubtype',\n  renderers : {\n    'eventsubtype': {\n      _type: \"jsapi\",\n      type: \"unique-value\",  // autocasts as new UniqueValueRenderer()\n      field: \"eventsubtype\",\n      //defaultSymbol: {type: \"simple-marker\", color: \"blue\"},\n      uniqueValueInfos: [{\n        value: \"pedestrians\",\n        symbol: {\n          type: \"picture-marker\",\n          url: pedImage\n        }\n      }, {\n        value: \"bicycles\",\n        symbol: {\n          type: \"picture-marker\",\n          url: bicycleImage\n        }\n      }\n      ]\n    }\n  }\n  ,\n  filters: [\n//    {name: 'eventvalue', type: 'minmax', params: {lowerBound: 0, upperBound: 20, log: true}},\n//    {name: 'eventtype', type: 'multiselect'},\n    {name: 'eventsubtype', type: 'multiselect'},\n//    {name: 'project', type: 'multiselect', params: {lowerBound: 0, upperBound: 100, log: true}},\n//    {name: 'eventtimestamp', type: 'minmax', params: {lowerBound: 0, upperBound: 100, log: true}},\n  ],\n  popupTemplate: {\n    title: \"Event information:\",\n    content: \"Event type: <b>{eventsubtype}</b><br>\" +\n        \"Project: {project}<br>\" +\n        \"Event value: {eventvalue}<br>\" +\n        \"Event timestamp: {eventtimestamp}\"\n  },\n  viewConfig: {\n    center: [-74.00157, 40.71955],\n    zoom: 12\n  }\n\n}\n\nexport default eventsConfig;\n\n\n","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport {\n  Switch,\n  Typography } from 'antd';\nimport FilterPanel from '../components/FilterPanel';\nimport PanelCard from '../components/PanelCard';\nimport LayerIcon from 'calcite-ui-icons-react/LayerIcon';\n\nconst { Text } = Typography;\n\n\nconst LayerPanel = observer(class LayerPanel extends React.Component{\n\n  constructor(props, context){\n    super(props, context);\n    this.eventFilter = props.store.filters.find(f => f.field === 'eventsubtype');\n  }\n\n  render(){\n\n    let domainMap = this.eventFilter.domainMap;\n    let eventOptions = this.eventFilter.options.map(o => {\n      let text = domainMap.has(o) ? domainMap.get(o) : o;\n      return (\n        <div key={o} style={{margin: \"5px 0px 0px 10px\"}}>\n          <Switch\n            size=\"small\"\n            style={{float: \"left\", marginTop: \"4px\"}}/>\n          <Text style={{margin: \"0px 0px 0px 5px\"}}>{text}</Text>\n        </div>\n      )\n    })\n\n    return (\n      <>\n        <PanelCard\n          icon={<LayerIcon size=\"20\" style={{position: \"relative\", top: \"4px\", left: \"0px\"}}/>}\n          title=\"Data\"\n          collapsible={true}\n          defaultActive={true}>\n          <Switch\n            onChange={this.onSwitchChange}\n            style={{float: \"left\", marginTop: \"1px\"}}/>\n          <h3 style={{display: \"inline-block\", margin: \"0px 0px 2px 10px\"}}>Road Safety Score</h3>\n          {eventOptions}\n        </PanelCard>\n      </>\n    )\n  }\n\n});\n\nexport default LayerPanel;\n","import React from 'react'\nimport { observer } from \"mobx-react\";\nimport { Layout, Menu, Drawer, Icon, Row, Col } from 'antd';\nimport LayerFilterIcon from 'calcite-ui-icons-react/LayersIcon';\nimport BookmarkIcon from 'calcite-ui-icons-react/BookmarkIcon';\nimport InformationIcon from 'calcite-ui-icons-react/InformationIcon';\nimport {loadModules} from 'esri-loader';\nimport options from '../config/esri-loader-options';\nimport FilterPanel from '../components/FilterPanel';\nimport Store from '../stores/Store';\nimport eventsConfig from './EventsConfig';\nimport LayerPanel from './LayerPanel';\n\nconst { Header, Content, Sider } = Layout;\n\nconst MenuFilterIcon = () => (\n  <LayerFilterIcon size=\"18\" filled/>\n)\nconst MenuBookmarkIcon = () => (\n  <BookmarkIcon size=\"18\" filled/>\n)\nconst MenuInformationIcon = () => (\n  <InformationIcon size=\"17\" filled/>\n)\n\nconst EventsApp = observer(class App extends React.Component {\n\n  state = {\n    collapsed: true,\n    loaded: false,\n    navKey: \"Layers\"\n  };\n\n  constructor(props, context){\n    super(props, context);\n    this.mapViewRef = React.createRef();\n    this.sliderRef = React.createRef();\n    this.store = new Store(props.appState, eventsConfig);\n  }\n\n  onCollapse = collapsed => {\n    this.setState({ collapsed });\n  };\n\n  onSelect = item => {\n    const navKey = this.state.navKey === item.key\n      ? null\n      : item.key;\n    this.setState({navKey});\n  }\n\n  onClose = () => {\n    this.setState({\n      navKey: null,\n    });\n  };\n\n  componentDidMount = () => {\n\n    const modulePromise = loadModules([\n      'esri/widgets/Search',\n      'esri/widgets/Legend',\n      'esri/widgets/TimeSlider'\n\n    ], options);\n    const loadPromise = this.store.load(this.mapViewRef.current);\n\n    Promise.all([modulePromise, loadPromise])\n      .then(([[Search, Legend, TimeSlider], mapView]) => {\n        this.view = mapView;\n        const search = new Search({view: this.view});\n        const legend = new Legend({view: this.view, layerInfos: [{layer: this.store.lyr, title: \"\"}]});\n\n        // create a new time slider widget\n        // set other properties when the layer view is loaded\n        // by default timeSlider.mode is \"time-window\" - shows\n        // data falls within time range\n        const timeSlider = new TimeSlider({\n          container: \"timeSlider\",\n          mode: \"time-window\",\n          view: this.view,\n          loop: false\n\n        });\n\n        // const timeSlider = new TimeSlider({\n        //   container: \"timeSlider\",\n        //   playRate: 50,\n        //   stops: {\n        //     interval: {\n        //       value: 1,\n        //       unit: \"hours\"\n        //     }\n        //   }\n        // });\n        this.timeSlider = timeSlider;\n        //timeSlider.values = [new Date(2019, 1, 1), new Date(2020, 1, 1)];\n        this.view.ui.add(timeSlider, \"top-right\");\n        this.view.ui.add(search, \"top-right\");\n        this.view.ui.add(legend, \"bottom-right\");\n        this.view.ui.move(\"zoom\", \"top-right\");\n      });\n  }\n\n  render() {\n    let panel;\n    switch (this.state.navKey) {\n      case 'Layers':\n        panel = <LayerPanel store={this.store}/>;\n        break;\n      case 'Bookmarks':\n        panel = <h1>Woah this are some awesome bookmarks!</h1>;\n        break;\n      case 'About':\n        panel = <h1>This is a slick app! Thanks Max!</h1>;\n        break;\n      default:\n        panel = null;\n    }\n\n    // Init Time Slider\n    if (this.store.layerLoaded){\n      const fullTimeExtent = this.store.lyr.timeInfo.fullTimeExtent;\n\n      // set up time slider properties\n      this.timeSlider.fullTimeExtent = fullTimeExtent;\n      // this.timeSlider.stops = {\n      //   interval: this.store.lyr.timeInfo.interval\n      // };\n    }\n\n\n    const signin = this.props.appState.displayName\n      ? (\n        <Menu\n          theme=\"dark\"\n          mode=\"horizontal\"\n          style={{ lineHeight: '64px', float: \"right\" }}\n        >\n          <Menu.Item key=\"sign in\">{this.props.appState.displayName}</Menu.Item>\n        </Menu>\n      )\n      : null;\n\n    return (\n      <Layout style={{ minHeight: '100vh' }}>\n        <Header style={{paddingLeft: \"1rem\", paddingRight: \"0rem\"}}>\n          <h1 style={{color: \"rgba(255,255,255,0.8\", float: \"left\"}}>Mobileye City Lab</h1>\n          {signin}\n        </Header>\n        <Layout>\n          <Sider collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse}>\n            <Menu\n              defaultSelectedKeys={['0']}\n              mode=\"inline\"\n              theme=\"dark\"\n              selectedKeys={[this.state.navKey]}\n              onClick={this.onSelect}>\n              <Menu.Item key=\"Layers\">\n                <Icon component={MenuFilterIcon} />\n                <span>Layers</span>\n              </Menu.Item>\n              <Menu.Item key=\"Bookmarks\">\n                <Icon component={MenuBookmarkIcon} />\n                <span>Bookmarks</span>\n              </Menu.Item>\n              <Menu.Item key=\"About\">\n                <Icon component={MenuInformationIcon} />\n                <span>About</span>\n              </Menu.Item>\n            </Menu>\n          </Sider>\n          <Content>\n            <Row>\n              <Col\n                span={24}\n                style={{height: \"calc(100vh - 64px)\"}}>\n              <div\n                style={{ position: 'absolute', left: '30%', right: '15px', bottom: '30px'}}\n                ref={this.sliderRef}/>\n              <div\n                ref={this.mapViewRef}\n                style={{width: \"100%\", height: \"100%\"}}/>\n              <Drawer\n                // title={this.state.navKey}\n                closable={false}\n                // onClose={this.onClose}\n                placement=\"left\"\n                visible={this.state.navKey}\n                mask={false}\n                getContainer={false}\n                style={{ position: 'absolute', background: \"#f5f5f5\"}}\n                bodyStyle={{ padding: \"10px\", background: \"#f5f5f5\", height: \"100%\" }}\n              >\n                {panel}\n              </Drawer>\n            </Col>\n            </Row>\n          </Content>\n        </Layout>\n      </Layout>\n    );\n  }\n});\n\nexport default EventsApp;","import React, { Component } from 'react';\nimport {observer} from 'mobx-react';\nimport {transformQueryToRechartSeries} from '../../utils/Utils';\nimport {\n  BarChart, Bar, XAxis, YAxis\n} from 'recharts';\n\n\nconst MyBarChart = observer(class MyBarChart extends Component {\n\n  render() {\n    const store = this.props.store;\n    const config = this.props.config;\n    const {\n      id,\n      xField,\n      yField\n    } = {...config};\n    const chartResultMap = store.chartResultMap;\n    const queryData = chartResultMap.get(id);\n    const chartData = transformQueryToRechartSeries(queryData, xField, yField);\n\n    return (\n      <BarChart\n        width={320}\n        height={400}\n        data={chartData}\n        margin={{\n          top: 15, right: 0, left: 0, bottom: 0,\n        }}\n        layout=\"vertical\"\n      >\n        <XAxis type=\"number\" tick={{fontSize: 8}}/>\n        <YAxis type=\"category\" dataKey={xField} tick={{fontSize: 8}} width={50}/>\n        <Bar dataKey={yField} fill=\"#8884d8\" />\n      </BarChart>\n    );\n  }\n});\n\n\nexport default MyBarChart;\n","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport BarChart from './charts/BarChart';\nimport PanelCard from './PanelCard';\nimport GraphHistogramIcon from 'calcite-ui-icons-react/GraphHistogramIcon';\nimport './FilterPanel.css';\n\nconst getChartView = (chart, store) => {\n  const c = chart;\n  switch(c.type){\n    case 'bar':\n      return <BarChart config={c} store={store}/>\n    default:\n      throw new Error(\"Unknown chart type!\");\n  }\n}\n\nconst FilterPanel = observer(class FilterPanel extends React.Component{\n\n  render(){\n    const charts = this.props.store.charts;\n    const chartViews = charts.map(c => \n      <div key={c.id}>\n        <h4>{c.title}</h4>\n        {getChartView(c, this.props.store)}\n      </div>\n    );\n\n    return (\n      <PanelCard\n        title=\"Charts\"\n        icon={<GraphHistogramIcon size=\"20\" style={{position: \"relative\", top: \"3px\", left: \"0px\"}}/>}\n        collapsible={true}\n        defaultActive={true}>\n        {chartViews}\n      </PanelCard>\n\n    )\n  }\n  \n});\n\nexport default FilterPanel;","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport {\n  Switch } from 'antd';\nimport PanelCard from '../components/PanelCard';\nimport LayerIcon from 'calcite-ui-icons-react/LayerIcon';\nimport './LayerListPanel.css'\n\nconst ListLayer = observer(class ListLayer extends React.Component{\n\n  onToggle = () => {\n    this.props.store.toggleLayerVisibility(this.props.layer);\n  }\n\n  render(){\n    \n    const visibleMap = this.props.store.layerVisibleMap;\n    const l = this.props.layer;\n    const isVisible = visibleMap.has(l.id) && visibleMap.get(l.id);\n\n    return(\n      <div>\n        <Switch\n          defaultChecked={true}\n          checked={isVisible}\n          onChange={this.onToggle}\n          className=\"layer-list-switch\"/>\n        <h3 className=\"layer-list-header\">{this.props.layer.title}</h3>\n      </div> \n    )\n  }\n});\n\nconst LayerPanel = observer(class LayerPanel extends React.Component{\n\n  render(){\n    const layers = this.props.store.layers;\n    const layerListViews = layers.map(l => {\n      return <ListLayer key={l.id} layer={l} store={this.props.store}/>\n    });\n\n    return (\n      <>\n        <PanelCard\n          icon={<LayerIcon size=\"20\" style={{position: \"relative\", top: \"4px\", left: \"0px\"}}/>}\n          title=\"Layer List\"\n          collapsible={true}\n          defaultActive={true}>\n          {layerListViews}\n        </PanelCard>\n      </>\n    )\n  }\n\n});\n\nexport default LayerPanel;\n","import { getDomainMap } from '../utils/Utils';\n\n// import sign10Image from '../resources/images/SIGN_ICON_10.png'\n// import sign20Image from '../resources/images/SIGN_ICON_20.png'\n// import sign30Image from '../resources/images/SIGN_ICON_30.png'\n// import sign40Image from '../resources/images/SIGN_ICON_40.png'\n// import sign50Image from '../resources/images/SIGN_ICON_50.png'\n// import sign60Image from '../resources/images/SIGN_ICON_60.png'\n// import sign70Image from '../resources/images/SIGN_ICON_70.png'\n// import sign80Image from '../resources/images/SIGN_ICON_80.png'\n// import sign90Image from '../resources/images/SIGN_ICON_90.png'\n// import sign100Image from '../resources/images/SIGN_ICON_100.png'\n// import sign110Image from '../resources/images/SIGN_ICON_110.png'\n// import sign120Image from '../resources/images/SIGN_ICON_120.png'\n// import sign130Image from '../resources/images/SIGN_ICON_130.png'\n// import sign140Image from '../resources/images/SIGN_ICON_140.png'\n// import circularSignNoSpeedImage from '../resources/images/CIRCULAR_NO_SPEED.png'\n// import warningImage from '../resources/images/WARNING.png'\n// import constructionImage from '../resources/images/CONSTRUCTION.png'\n// import rectangularSignImage from '../resources/images/RECTANGULAR.png'\n// import trafficLightImage from '../resources/images/TRAFFIC_LIGHTS.png'\n// import diamondImage from '../resources/images/DIAMOND.png'\n// import yieldImage from '../resources/images/YIELD.png'\n// import roadArrowImage from '../resources/images/ROAD_MARKINGS_ARROWS.png'\n// import roadStoplineImage from '../resources/images/ROAD_MARKINGS_STOPLINE.png'\n// import overheadStructureImage from '../resources/images/HORIZONTAL.png'\n// import reflectorImage from '../resources/images/REFLECTORS.png'\n// import roadCrossingImage from '../resources/images/CROSSING.png'\n// import manholeImage from '../resources/images/MANHOLE_COVER.png'\n// import unrecognizedCircleImage from '../resources/images/UNRECOGNIZED_CIRCLE.png'\n// import unrecognizedRectImage from '../resources/images/UNRECOGNIZED_RECT.png'\n\n\n// update to map\n\nconst surveyConfig = {\n  \n  // Production\n  layerItemId: '442c06a8034b4aba9232bd61bd36f0f9',\n  webmapId: 'e89e13f2f6174777bcd81073c4158ce6',\n  // Test\n  // layerItemId: '5d31985daf4c403ba6786c02a52ea715',\n  // webmapId: 'aabc5fa9e96045eaa0968702fd33e6d9',\n  initialRendererField: 'all',\n  renderers: {\n    'all': {\n      _type: \"jsapi\",\n      type: \"unique-value\",  // autocasts as new UniqueValueRenderer()\n      //field: \"icon\",\n      field: \"system_type_group\",\n      defaultSymbol: {type: \"simple-marker\", color: \"blue\"},\n      visualVariables: [{\n        type: \"opacity\",\n        field: \"comparsion_to_prev_map\",\n        stops: [\n              {value: '2', opacity: 0.3},\n              {value: '1', opacity: 1},\n              {value: '0', opacity: 1}\n        ]\n      },\n      // {\n      //   type: \"size\",\n      //   field: \"icon_size\",\n      //     minDataValue: 0.0,\n      //     maxDataValue: 1.0,\n      //     minSize: 0,\n      //     maxSize: 30\n      // }\n      ],\n      uniqueValueInfos: [\n        // {value: 'sign10', symbol: {type: \"picture-marker\", url: sign10Image}},\n        // {value: 'sign20', symbol: {type: \"picture-marker\", url: sign20Image}},\n        // {value: 'sign30', symbol: {type: \"picture-marker\", url: sign30Image}},\n        // {value: 'sign40', symbol: {type: \"picture-marker\", url: sign40Image}},\n        // {value: 'sign50', symbol: {type: \"picture-marker\", url: sign50Image}},\n        // {value: 'sign60', symbol: {type: \"picture-marker\", url: sign60Image}},\n        // {value: 'sign70', symbol: {type: \"picture-marker\", url: sign70Image}},\n        // {value: 'sign80', symbol: {type: \"picture-marker\", url: sign80Image}},\n        // {value: 'sign90', symbol: {type: \"picture-marker\", url: sign90Image}},\n        // {value: 'sign100', symbol: {type: \"picture-marker\", url: sign100Image}},\n        // {value: 'sign110', symbol: {type: \"picture-marker\", url: sign110Image}},\n        // {value: 'sign120', symbol: {type: \"picture-marker\", url: sign120Image}},\n        // {value: 'sign130', symbol: {type: \"picture-marker\", url: sign130Image}},\n        // {value: 'sign140', symbol: {type: \"picture-marker\", url: sign140Image}},\n        // {value: 'CIRCULAR_NO_SPEED', symbol: {type: \"picture-marker\", url: circularSignNoSpeedImage}},\n        // {value: 'WARNING', symbol: {type: \"picture-marker\", url: warningImage}},\n        // {value: 'CONSTRUCTION', symbol: {type: \"picture-marker\", url: constructionImage}},\n        // {value: 'RECTANGULAR', symbol: {type: \"picture-marker\", url: rectangularSignImage}},\n        // {value: 'TRAFFIC_LIGHTS', symbol: {type: \"picture-marker\", url: trafficLightImage}},\n        // {value: 'DIAMOND', symbol: {type: \"picture-marker\", url: diamondImage}},\n        // {value: 'YIELD', symbol: {type: \"picture-marker\", url: yieldImage}},\n        // {value: 'ROAD_MARKINGS_ARROWS', symbol: {type: \"picture-marker\", url: roadArrowImage}},\n        // {value: 'ROAD_MARKINGS_STOPLINE', symbol: {type: \"picture-marker\", url: roadStoplineImage}},\n        // {value: 'DOT1', symbol: {type: \"simple-marker\",color: \"white\"}},\n        // {value: 'HORIZONTAL', symbol: {type: \"picture-marker\", url: overheadStructureImage}},\n        // {value: 'REFLECTORS', symbol: {type: \"picture-marker\", url: reflectorImage}},\n        // {value: 'CROSSING', symbol: {type: \"picture-marker\", url: roadCrossingImage}},\n        // {value: 'MANHOLE_COVER', symbol: {type: \"picture-marker\", url: manholeImage}},\n        // {value: 'DOT2', symbol: {type: \"simple-marker\",color: \"black\"}},\n        // {value: 'UNRECOGNIZED_CIRCLE', symbol:  {type: \"picture-marker\", url: unrecognizedCircleImage}},\n        // {value: 'UNRECOGNIZED_RECRANGLE', symbol:  {type: \"picture-marker\", url: unrecognizedRectImage}}\n        \n        \n        {value: 0, symbol: {type: \"simple-marker\",color: \"red\"}},\n        {value: 1, symbol: {type: \"simple-marker\",color: \"purple\"}},\n        {value: 2, symbol: {type: \"simple-marker\",color: \"blue\"}},\n        {value: 3, symbol: {type: \"simple-marker\",color: \"green\"}},\n        {value: 4, symbol: {type: \"simple-marker\",color: \"yellow\"}},\n    ]\n  }\n  },\n  filters: [\n    {name: 'system_type', type: 'multiselect', params: {dynamic: true}},\n    {name: 'comparsion_to_prev_map', type: 'multiselect', params: {dynamic: true}},\n    {name: 'map_version', type: 'select', params: {dynamic: true}},\n  ],\n  charts: [\n  {\n    id: 'system_type_group_label',\n    type: 'bar',\n    title: 'Landmark Type',\n    xField: 'system_type_group_label',\n    yField: 'countOFsystem_type_group',\n    // see here\n    // https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html\n    // and here\n    // https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-StatisticDefinition.html\n    // use \"order by\" parameter or \"resultTransform\" to sort\n   queryDefinition: {\n        where: \"1=1\",\n        outFields: \"*\",\n        orderByFields: \"countOFsystem_type_group\",\n        groupByFieldsForStatistics: \"system_type_group\",\n        outStatistics: [{\n          \"onStatisticField\":\"system_type_group\",\n          \"outStatisticFieldName\":\"countOFsystem_type_group\",\n          \"statisticType\":\"count\"\n      }]\n    },\n    resultTransform: result => {\n      if(!result || !result.features || result.features.length < 1) return result;\n      const field = result.fields.find(f => f.name === 'system_type_group');\n      const domainMap = getDomainMap(field.domain);\n      const newFeatures = result.features.map(f => {  \n        const attributes = f.attributes;\n        const fieldValue = f.attributes['system_type_group'];\n        const fieldDomain = domainMap.has(fieldValue) ? domainMap.get(fieldValue) : fieldValue;\n        return {\n          attributes: {\n            ...attributes,\n            system_type_group_label: fieldDomain\n          }\n        }\n      });\n      result.features = newFeatures;\n      return result;\n    }\n  },\n  {\n    id: 'system_type_label',\n    type: 'bar',\n    title: 'Specific Landmark type',\n    xField: 'system_type_label',\n    yField: 'countOFsystem_type',\n    // see here\n    // https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html\n    // and here\n    // https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-StatisticDefinition.html\n    // use \"order by\" parameter or \"resultTransform\" to sort\n    queryDefinition: {\n      where: \"1=1\",\n      outFields: \"*\",\n      orderByFields: \"countOFsystem_type\",\n      groupByFieldsForStatistics: \"system_type\",\n      outStatistics: [{\n        \"onStatisticField\":\"system_type\",\n        \"outStatisticFieldName\":\"countOFsystem_type\",\n        \"statisticType\":\"count\"\n      }]\n      },\n    resultTransform: result => {\n      if(!result || !result.features || result.features.length < 1) return result;\n      const field = result.fields.find(f => f.name === 'system_type');\n      const domainMap = getDomainMap(field.domain);\n      const newFeatures = result.features.map(f => {  \n        const attributes = f.attributes;\n        const fieldValue = f.attributes['system_type'];\n        const fieldDomain = domainMap.has(fieldValue) ? domainMap.get(fieldValue) : fieldValue;\n        return {\n          attributes: {\n            ...attributes,\n            system_type_label: fieldDomain\n          }\n        }\n      });\n      result.features = newFeatures;\n      return result;\n    }\n  },], \n  popupTemplate: {\n    title: \"{expression/title-prefix} {system_type} {expression/title_suffix}\",\n    content: [{\n      type: \"text\",\n      text: \"Type: <b>{expression/type-expr}</b> <br>\" +\n             \"Detected at {publish_date} (version {map_version})<br>\" +\n             \"Size: {height} X {width} m<br>\",\n    },\n    // {\n    //     type: \"media\", // MediaContentElement\n    //     mediaInfos: [\n    //       {\n    //         title: \"\",\n    //         type: \"image\",\n    //         caption: \"sign icon\",\n    //         value: {\n    //           sourceURL:\n    //             \"resources/images/SIGN_ICON_10.png\"\n    //         }\n    //       },\n    //     ]\n    //   }],\n    ],\n    expressionInfos: [\n      {\n        name: \"type-expr\",\n        title: \"Type\",\n        expression: \"When($feature.system_type_group == 0, $feature.traffic_sign_type,\" +\n                        \"$feature.system_type_group == 1, 'Traffic Light',\" +\n                        \"$feature.system_type_group == 2, $feature.road_marking_type,\" +\n                       \"$feature.system_type_group == 3, $feature.pole_type,\" +\n//                        \"$feature.system_type_group == 4, $feature.manhole_type,\" +\n                        \"'')\"\n\n      },\n      {\n        name: \"title-prefix\",\n        title: \"Title Prefix\",\n        expression: \"When($feature.comparsion_to_prev_map == 2, 'Missing', $feature.comparsion_to_prev_map == 1, 'New',  '')\"\n      },\n      {\n        name: \"title-suffix\",\n        title: \"Title Suffix\",\n        expression: \"When(($feature.comparsion_to_prev_map == 2) ||  ($feature.comparsion_to_prev_map == 1), '',  'information')\"\n      }\n    ]},\n    \n  \n  viewConfig: { \n    center: [-73.974051, 40.762746],\n    zoom: 16\n  }\n}\n\nexport default surveyConfig;","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport { Layout, Menu, Drawer, Icon, Row, Col } from 'antd';\nimport LayerFilterIcon from 'calcite-ui-icons-react/LayersIcon';\nimport GraphHistogramIcon from 'calcite-ui-icons-react/GraphHistogramIcon';\nimport BookmarkIcon from 'calcite-ui-icons-react/BookmarkIcon';\nimport InformationIcon from 'calcite-ui-icons-react/InformationIcon';\nimport {loadModules} from 'esri-loader';\nimport options from '../config/esri-loader-options';\nimport FilterPanel from '../components/FilterPanel';\nimport ChartPanel from '../components/ChartPanel';\nimport LayerListPanel from '../components/LayerListPanel';\nimport BookmarkPanel from '../components/BookmarkPanel';\nimport Store from '../stores/Store';\nimport surveyConfig from './SurveyConfig';\n\nconst { Header, Content, Sider } = Layout;\n\nconst MenuFilterIcon = () => (\n  <LayerFilterIcon size=\"18\" filled/>\n)\nconst MenuHistogramIcon = () => (\n  <GraphHistogramIcon size=\"18\" filled/>\n)\nconst MenuBookmarkIcon = () => (\n  <BookmarkIcon size=\"18\" filled/>\n)\nconst MenuInformationIcon = () => (\n  <InformationIcon size=\"17\" filled/>\n)\n\nconst SurveyApp = observer(class App extends React.Component {\n\n  state = {\n    collapsed: true,\n    loaded: false,\n    navKey: \"Layers\"\n  };\n\n  constructor(props, context){\n    super(props, context);\n    this.mapViewRef = React.createRef();\n    this.store = new Store(props.appState, surveyConfig);\n  }\n\n  onCollapse = collapsed => {\n    this.setState({ collapsed });\n  };\n\n  onSelect = item => {\n    const navKey = this.state.navKey === item.key\n      ? null\n      : item.key;\n    this.setState({navKey});\n  }\n\n  onClose = () => {\n    this.setState({\n      navKey: null,\n    });\n  };\n\n  componentDidMount = () => {\n\n    const modulePromise = loadModules([\n      'esri/widgets/Search',\n      // 'esri/widgets/Legend'\n    ], options);\n    const loadPromise = this.store.load(this.mapViewRef.current);\n\n    Promise.all([modulePromise, loadPromise])\n      .then(([[Search, Legend], mapView]) => {\n        this.view = mapView;\n        const search = new Search({view: this.view});\n        this.view.ui.add(search, \"top-right\");\n        // const legend = new Legend({view: this.view});\n        // this.view.ui.add(legend, \"bottom-right\");\n        this.view.ui.move(\"zoom\", \"top-right\");\n      });\n  }\n\n  render() {\n    let panel;\n    switch(this.state.navKey){\n      case 'Layers':\n        panel = (\n          <div>\n            <LayerListPanel store={this.store}/>\n            <FilterPanel store={this.store} defaultActive={true}/>\n          </div>\n        );\n        break;\n      case 'Histograms':\n        panel = <ChartPanel store={this.store}/>\n        break;\n      case 'Saved Locations':\n        panel = <BookmarkPanel store={this.store}/>\n        break;\n      case 'About':\n        panel = <h1>This application presents the various assets Mobileye is able to survey and map</h1>;\n        break;\n      default:\n        panel = null;\n    }\n\n    const signin = this.props.appState.displayName\n      ? (\n        <Menu\n          theme=\"dark\"\n          mode=\"horizontal\"\n          style={{ lineHeight: '64px', float: \"right\" }}\n        >\n          <Menu.Item key=\"sign in\" onClick={this.onSignOutClick}>\n            <Icon type=\"logout\"/>\n            {this.props.appState.displayName}\n          </Menu.Item>\n        </Menu>\n      )\n      : null;\n\n    return (\n      <Layout style={{ minHeight: '100vh' }}>\n        <Header style={{paddingLeft: \"1rem\", paddingRight: \"0rem\"}}>\n          <h1 style={{color: \"rgba(255,255,255,0.8\", float: \"left\"}}>Streets Survey</h1>\n          {signin}\n        </Header>\n        <Layout>\n          <Sider collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse}>\n            <Menu\n              defaultSelectedKeys={['0']}\n              mode=\"inline\"\n              theme=\"dark\"\n              selectedKeys={[this.state.navKey]}\n              onClick={this.onSelect}>\n              <Menu.Item key=\"Layers\">\n                <Icon component={MenuFilterIcon} />\n                <span>Layers</span>\n              </Menu.Item>\n              <Menu.Item key=\"Histograms\">\n                <Icon component={MenuHistogramIcon} />\n                <span>Histograms</span>\n              </Menu.Item>\n              <Menu.Item key=\"Saved Locations\">\n                <Icon component={MenuBookmarkIcon} />\n                <span>Saved Locations</span>\n              </Menu.Item>\n              <Menu.Item key=\"About\">\n                <Icon component={MenuInformationIcon} />\n                <span>About</span>\n              </Menu.Item>\n            </Menu>\n          </Sider>\n          <Content>\n            <Row>\n              <Col\n                span={24}\n                style={{height: \"calc(100vh - 64px)\"}}>\n              <div\n                ref={this.mapViewRef}\n                style={{width: \"100%\", height: \"100%\"}}/>\n              <Drawer\n                title={this.state.navKey}\n                closable={true}\n                onClose={this.onClose}\n                placement=\"left\"\n                visible={this.state.navKey}\n                mask={false}\n                width={320}\n                getContainer={false}\n                style={{ position: 'absolute', background: \"#f5f5f5\", height: \"calc(100% - 15px)\"}}\n                bodyStyle={{ padding: \"10px\", background: \"#f5f5f5\", height: \"100%\"}}\n              >\n                {panel}\n              </Drawer>\n            </Col>\n            </Row>\n          </Content>\n        </Layout>\n      </Layout>\n    );\n  }\n});\n\n\nexport default SurveyApp;","const config = {\n  appId: \"o3Zbi02dIsAez6sL\",\n  portalUrl: \"https://www.arcgis.com/sharing\"\n}\n\nexport default config;","import React from 'react'\nimport { observer } from \"mobx-react\";\nimport { HashRouter as Router, BrowserRouter, Route, Link, Redirect } from \"react-router-dom\";\nimport { Row, Col, Card, Layout, Button, Divider } from 'antd';\nimport AppState from './stores/AppState';\nimport MapImage from './resources/images/map.png';\nimport SafetyApp from './safety/SafetyApp';\nimport EventsApp from './events/EventsApp';\nimport SurveyApp from './survey/SurveyApp';\nimport {\n  UserSession\n} from \"@esri/arcgis-rest-auth\";\nimport config from './config/config';\nimport {loadScript} from 'esri-loader';\nimport options from './config/esri-loader-options';\n\nconst { Content } = Layout;\nconst { appId } = config;\n\n// TODO, see if faster way to accept callback without loading whole app\nconst OAuth = _ => {\n  UserSession.completeOAuth2({\n    clientId: appId,\n  });\n  return(\n    <div/>\n  )\n}\n\nconst PrivateRoute = observer(({Component, appState, ...rest}) => {\n  const isAuth = appState.isAuthenticated; //needed to trigger mobx\n  return (\n    <Route\n      {...rest}\n      render={(props) => (\n        isAuth === true\n          ? <Component appState={appState} {...props}/>\n          : <Redirect to={{\n              pathname: '/',\n              state: {from: props.location}\n            }}/>\n      )}/>\n    )\n});\n\nconst Home = observer(class Home extends React.Component{\n  \n  componentDidMount(){\n    loadScript(options);\n  }\n\n  render(){\n    let appState = this.props.appState;\n\n    let topComponent = appState.isAuthenticated\n      ? <h1>Hello <b>{appState.displayName}</b>, please select the application you would like to use:</h1>\n      : <Button type=\"primary\" size=\"large\" onClick={appState.login}>Log in to get started</Button>;\n\n    const {from} = this.props.location.state || {from: null};\n    if(appState.redirectToReferrer && from){\n      return <Redirect to={from}/>\n    }\n\n    // Not good practice, should find a way to inject router Link into antd Button\n    const linkClass = \"ant-btn ant-btn-primary ant-btn-background-ghost ant-btn-block ant-btn ant-btn-lg\";\n\n    return(\n      <Layout style={{ minHeight: '100vh' }}>\n        <Content style={{ padding: '50px 50px'}}>\n          <Row type=\"flex\" justify=\"space-around\" align=\"middle\">\n            <Col style={{textAlign: 'center'}}>\n              {topComponent}\n            </Col>\n          </Row>\n          <Divider/>\n          <Row type=\"flex\" justify=\"space-around\" align=\"middle\">\n            <Col md={{span: 0}} xl={{span: 2}}/>\n            <Col md={{span: 6}} xl={{span: 4}}>\n              <Card\n              cover={<img alt=\"example\" src={MapImage} />}>\n                <Link\n                  to=\"/safety\"\n                  className={linkClass}\n                  disabled={!appState.isAuthenticated}>\n                  Explore Safety\n                </Link>\n              </Card>\n            </Col>\n            <Col md={{span: 6}} xl={{span: 4}}>\n              <Card\n              cover={<img alt=\"example\" src={MapImage}/>}>\n                <Link\n                  to=\"/events\"\n                  className={linkClass}\n                  disabled={!appState.isAuthenticated}>\n                  Explore Events\n                </Link>\n              </Card>\n            </Col>\n            <Col md={{span: 6}} xl={{span: 4}}>\n              <Card\n              cover={<img alt=\"example\" src={MapImage} />}>\n              <Link\n                to=\"/survey\"\n                className={linkClass}\n                disabled={!appState.isAuthenticated}>\n                Explore Survey\n              </Link>\n              </Card>\n            </Col>\n            <Col md={{span: 0}} xl={{span: 2}}/>\n          </Row>\n        </Content>\n      </Layout>\n    )\n  }\n});\n\n\nclass App extends React.Component{\n\n  constructor(props, context){\n    super(props, context);\n    const relativeRedirectUri = '';\n    this.appState = new AppState({...config, relativeRedirectUri});\n    console.log('v 0.0.0.6')\n  }\n\n  render(){\n    if(window.location.hash.includes(\"access_token=\")){\n      return (\n        <BrowserRouter>\n          <Route path=\"/\" component={OAuth} />\n        </BrowserRouter>\n      )\n    }\n    return(\n      <Router>\n        <Route\n          path=\"/\"\n          exact\n          render={props => <Home {...props} appState={this.appState}/>}/>\n        <PrivateRoute\n          path=\"/safety\"\n          appState={this.appState}\n          Component={SafetyApp}/>\n        <PrivateRoute\n          path=\"/events\"\n          appState={this.appState}\n          Component={EventsApp}/>\n        <PrivateRoute\n          path=\"/survey\"\n          appState={this.appState}\n          Component={SurveyApp}/>\n      </Router>\n    )\n  }\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n \nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}